<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡è§</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .mobile-frame {
            position: relative;
            width: 375px;
            height: 812px;
            border: 16px solid black;
            border-radius: 36px;
            box-shadow: 0 0 24px rgba(0,0,0,0.5);
            background: #000;
            overflow: hidden;
        }

        .mobile-screen {
            width: 100%;
            height: 100%;
            background: #fff;
            overflow: hidden;
            position: relative;
        }

        .notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 210px;
            height: 30px;
            background: black;
            border-bottom-left-radius: 12px;
            border-bottom-right-radius: 12px;
            z-index: 10;
        }

        .app-container {
            width: 100%;
            height: 100%;
            background: #f9fafb;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .moment-card {
            transition: all 0.3s ease;
        }
        .moment-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .like-btn {
            transition: all 0.3s ease;
        }
        .like-btn:hover {
            transform: scale(1.1);
        }
        .like-btn.liked {
            color: #ff6b6b;
        }
        .moment-card {
            border-left: 4px solid transparent;
        }
        .moment-filter-btn.active {
            background: linear-gradient(135deg, #34D399 0%, #42E2B8 100%);
            color: white;
            transform: scale(1.05);
        }
        .filter-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: none;
            align-items: flex-end;
        }
        .filter-content {
            background: white;
            border-radius: 20px 20px 0 0;
            padding: 24px;
            width: 100%;
            max-height: 60vh;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        .filter-modal.show .filter-content {
            transform: translateY(0);
        }
        .buddy-type-option {
            transition: all 0.3s ease;
        }
        .buddy-type-option.selected {
            background: linear-gradient(135deg, #34D399 0%, #42E2B8 100%);
            color: white;
            border-color: #34D399;
        }
        /* åº•éƒ¨å¯¼èˆªæ ï¼ˆä¸æ˜Ÿçƒé¡µé¢ä¸€è‡´ï¼‰ */
        .bottom-nav {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-top: 0.5px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
        }
        .nav-button { transition: all 0.2s ease; }
        .nav-button.active { color: #8b5cf6; opacity: 1; }
        .nav-button:active { transform: scale(0.9); }
    </style>
</head>
<body>
    <div class="mobile-frame">
        <div class="mobile-screen">
            <div class="notch"></div>
            <div class="app-container h-full flex flex-col">
    <!-- çŠ¶æ€æ  -->
    <div class="flex justify-between items-center px-6 py-2 text-black text-sm font-medium bg-white">
        <span>9:41</span>
        <div class="flex items-center space-x-1">
            <i class="fas fa-signal text-xs"></i>
            <i class="fas fa-wifi text-xs"></i>
            <div class="w-6 h-3 border border-black rounded-sm">
                <div class="w-4 h-2 bg-black rounded-sm m-0.5"></div>
            </div>
        </div>
    </div>

    <!-- å¯¼èˆªæ  -->
    <div class="bg-white px-6 py-4 flex items-center justify-between border-b border-gray-100">
        <h1 class="text-xl font-bold">é‡è§</h1>
        <div class="flex items-center space-x-4">
<!--            <button class="w-8 h-8 flex items-center justify-center" onclick="openSearch()">-->
<!--                <i class="fas fa-search text-gray-600"></i>-->
<!--            </button>-->
            <button class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center" onclick="openPublishMoment()">
                <i class="fas fa-plus text-white text-sm"></i>
            </button>
        </div>
    </div>



    <!-- åŠ¨æ€åˆ†ç±»ç­›é€‰ -->
    <div class="bg-white px-6 py-4 border-b border-gray-100">
        <div class="flex space-x-2 overflow-x-auto">
            <!-- <button class="moment-filter-btn active px-5 py-2.5 bg-green-100 text-green-600 rounded-full text-sm font-medium whitespace-nowrap shadow-sm" onclick="filterMoments('all')">
                <i class="fas fa-th-large mr-1"></i>å…¨éƒ¨
            </button> -->
            <button class="moment-filter-btn px-5 py-2.5 bg-gray-100 text-gray-600 rounded-full text-sm font-medium whitespace-nowrap" onclick="filterMoments('buddy')" data-category="buddy">
                <i class="fas fa-user-friends mr-1"></i>æ­å­
            </button>
            <button class="moment-filter-btn px-5 py-2.5 bg-gray-100 text-gray-600 rounded-full text-sm font-medium whitespace-nowrap" onclick="filterMoments('love')" data-category="love">
                <i class="fas fa-heart mr-1"></i>æ‹çˆ±
            </button>
            <button class="moment-filter-btn px-5 py-2.5 bg-gray-100 text-gray-600 rounded-full text-sm font-medium whitespace-nowrap" onclick="filterMoments('buddy-activity')" data-category="buddy-activity">
                <i class="fas fa-handshake mr-1"></i>æ­å­æ´»åŠ¨
            </button>
            <button class="moment-filter-btn px-5 py-2.5 bg-gray-100 text-gray-600 rounded-full text-sm font-medium whitespace-nowrap" onclick="filterMoments('official-activity')" data-category="official-activity">
                <i class="fas fa-star mr-1"></i>å®˜æ–¹æ´»åŠ¨
            </button>
        </div>
    </div>

    <!-- æœç´¢å’Œç­›é€‰æ  -->
    <div class="bg-white px-6 py-4 border-b border-gray-100">
        <div class="flex items-center space-x-3">
            <!-- ç­›é€‰æŒ‰é’® -->
<!--            <button class="flex items-center space-x-2 px-4 py-3 bg-gray-100 rounded-xl text-gray-700 font-medium" onclick="toggleFilterModal()">-->
<!--                <i class="fas fa-filter text-sm"></i>-->
<!--                <span class="text-sm">ç­›é€‰</span>-->
<!--                <span id="filterCount" class="hidden bg-green-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">0</span>-->
<!--            </button>-->
            <!-- æœç´¢æ¡† -->
            <div class="flex-1 relative">
                <input type="text" placeholder="ä½ æƒ³æ‰¾ä»€ä¹ˆæ ·çš„æ­å­æˆ–å¯¹è±¡å‘¢"
                       class="w-full pl-10 pr-4 py-3 bg-gray-100 rounded-xl border-none outline-none text-gray-800 placeholder-gray-500"
                       id="searchInput">
                <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            </div>
        </div>
    </div>

    <!-- ä¸»è¦å†…å®¹ -->
    <div class="flex-1 overflow-y-auto px-6 py-4 space-y-4">
        <!-- æ­å­ç±»å‹åŠ¨æ€ 1 -->
        <div class="moment-card bg-white rounded-2xl p-4 shadow-sm border-l-4 border-green-500" data-category="buddy">
            <div class="flex items-center space-x-3 mb-4">
                <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?w=50&h=50&fit=crop&crop=face"
                     alt="å¤´åƒ" class="w-10 h-10 rounded-full object-cover ring-2 ring-green-200">
                <div class="flex-1">
                    <div class="flex items-center space-x-2">
                        <h3 class="font-semibold text-gray-900">å°é›¨</h3>
                        <div class="w-4 h-4 bg-green-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-check text-white text-xs"></i>
                        </div>
                        <span class="px-2 py-1 bg-green-100 text-green-600 rounded-full text-xs font-medium">
                            å­¦ä¹ æ­å­
                        </span>
                    </div>
                    <p class="text-xs text-gray-500">2å°æ—¶å‰ Â· è·ç¦»ä½  1.2km</p>
                </div>
            </div>

            <p class="text-gray-800 mb-4 leading-relaxed">
                æƒ³æ‰¾ä¸€ä¸ªä¸€èµ·å­¦ä¹ çš„å°ä¼™ä¼´ï¼å‘¨æœ«åœ¨å›¾ä¹¦é¦†ï¼Œäº’ç›¸ç›‘ç£å­¦ä¹ æ•ˆç‡ä¼šæ›´é«˜ï½æœ‰ä¸€èµ·çš„å—ï¼ŸğŸ“š
            </p>

            <div class="grid grid-cols-2 gap-2 mb-4">
                <img src="https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=200&h=200&fit=crop"
                     alt="å­¦ä¹ 1" class="w-full h-24 object-cover rounded-xl">
                <img src="https://images.unsplash.com/photo-1521587760476-6c12a4b040da?w=200&h=200&fit=crop"
                     alt="å­¦ä¹ 2" class="w-full h-24 object-cover rounded-xl">
            </div>

            <div class="flex items-center justify-between pt-3 border-t border-gray-100">
                <button class="like-btn flex items-center space-x-2 text-gray-500" onclick="toggleLike(this)">
                    <i class="far fa-heart text-lg"></i>
                    <span class="text-sm">18</span>
                </button>
                <button class="flex items-center space-x-2 text-gray-500" onclick="showComments(1)">
                    <i class="far fa-comment text-lg"></i>
                    <span class="text-sm">5</span>
                </button>
                <button class="flex items-center space-x-2 bg-green-500 text-white px-4 py-2 rounded-full text-sm font-medium" onclick="joinBuddyActivity(1)">
                    <i class="fas fa-handshake text-sm"></i>
                    <span>æˆä¸ºæ­å­</span>
                </button>
            </div>
        </div>

        <!-- æ‹çˆ±ç±»å‹åŠ¨æ€ -->
        <div class="moment-card bg-white rounded-2xl p-4 shadow-sm border-l-4 border-pink-500" data-category="love">
            <div class="flex items-center space-x-3 mb-4">
                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=50&h=50&fit=crop&crop=face"
                     alt="å¤´åƒ" class="w-10 h-10 rounded-full object-cover ring-2 ring-pink-200">
                <div class="flex-1">
                    <div class="flex items-center space-x-2">
                        <h3 class="font-semibold text-gray-900">å°æ˜</h3>
                        <div class="w-4 h-4 bg-green-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-check text-white text-xs"></i>
                        </div>
                        <span class="px-2 py-1 bg-pink-100 text-pink-600 rounded-full text-xs font-medium">
                            <i class="fas fa-heart text-xs mr-1"></i>æ‹çˆ±
                        </span>
                    </div>
                    <p class="text-xs text-gray-500">3å°æ—¶å‰ Â· è·ç¦»ä½  2.3km</p>
                </div>
            </div>

            <p class="text-gray-800 mb-4 leading-relaxed">
                å¸Œæœ›æ‰¾åˆ°ä¸€ä¸ªèƒ½ä¸€èµ·åˆ†äº«ç”Ÿæ´»ã€å…±åŒæˆé•¿çš„å¦ä¸€åŠã€‚æˆ‘å–œæ¬¢æ—…è¡Œã€æ‘„å½±ï¼Œä¹Ÿå–œæ¬¢å®‰é™çš„è¯»ä¹¦æ—¶å…‰ã€‚å¸Œæœ›åœ¨ç¢°ç¢°é‡åˆ°é‚£ä¸ªå¯¹çš„äºº ğŸ’•
            </p>

            <div class="grid grid-cols-3 gap-2 mb-4 text-xs">
                <div class="bg-pink-50 rounded-lg p-3 text-center border border-pink-100">
                    <div class="text-pink-600 font-medium text-sm">28å²</div>
                    <div class="text-gray-500 text-xs">å¹´é¾„</div>
                </div>
                <div class="bg-pink-50 rounded-lg p-3 text-center border border-pink-100">
                    <div class="text-pink-600 font-medium text-sm">175cm</div>
                    <div class="text-gray-500 text-xs">èº«é«˜</div>
                </div>
                <div class="bg-pink-50 rounded-lg p-3 text-center border border-pink-100">
                    <div class="text-pink-600 font-medium text-sm">è®¾è®¡å¸ˆ</div>
                    <div class="text-gray-500 text-xs">èŒä¸š</div>
                </div>
            </div>

            <div class="grid grid-cols-3 gap-2 mb-4">
                <img src="https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=200&h=200&fit=crop"
                     alt="ç…§ç‰‡1" class="w-full h-24 object-cover rounded-xl">
                <img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=200&fit=crop"
                     alt="ç…§ç‰‡2" class="w-full h-24 object-cover rounded-xl">
                <img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=200&h=200&fit=crop"
                     alt="ç…§ç‰‡3" class="w-full h-24 object-cover rounded-xl">
            </div>

            <div class="flex items-center justify-between pt-3 border-t border-gray-100">
                <button class="like-btn flex items-center space-x-2 text-gray-500" onclick="toggleLike(this)">
                    <i class="far fa-heart text-lg"></i>
                    <span class="text-sm">32</span>
                </button>
                <button class="flex items-center space-x-2 text-gray-500" onclick="showComments(2)">
                    <i class="far fa-comment text-lg"></i>
                    <span class="text-sm">8</span>
                </button>
                <button class="flex items-center space-x-2 bg-gradient-to-r from-pink-500 to-rose-500 text-white px-4 py-2 rounded-full text-sm font-medium" onclick="viewProfile(2)">
                    <i class="fas fa-user-plus text-sm"></i>
                    <span>è®¤è¯†ä¸€ä¸‹</span>
                </button>
            </div>
        </div>

        <!-- æ­å­æ´»åŠ¨ç±»å‹åŠ¨æ€ -->
        <div class="moment-card bg-white rounded-2xl p-4 shadow-sm border-l-4 border-green-500" data-category="buddy-activity">
            <div class="flex items-center space-x-3 mb-4">
                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=50&h=50&fit=crop&crop=face"
                     alt="å¤´åƒ" class="w-10 h-10 rounded-full object-cover ring-2 ring-green-200">
                <div class="flex-1">
                    <div class="flex items-center space-x-2">
                        <h3 class="font-semibold text-gray-900">é˜¿æ˜</h3>
                        <div class="w-4 h-4 bg-green-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-check text-white text-xs"></i>
                        </div>
                        <span class="px-2 py-1 bg-green-100 text-green-600 rounded-full text-xs font-medium">
                            <i class="fas fa-handshake text-xs mr-1"></i>æ­å­æ´»åŠ¨
                        </span>
                    </div>
                    <p class="text-xs text-gray-500">4å°æ—¶å‰ Â· è·ç¦»ä½  2.1km</p>
                </div>
            </div>

            <p class="text-gray-800 mb-4 leading-relaxed">
                å¯»æ‰¾ç¾½æ¯›çƒæ­å­ï¼å‘¨æœ«æƒ³æ‰¾äººä¸€èµ·æ‰“ç¾½æ¯›çƒï¼ŒæŠ€æœ¯ä¸€èˆ¬ï¼Œä¸»è¦æ˜¯æƒ³è¿åŠ¨è¿åŠ¨ï¼Œæœ‰æ„Ÿå…´è¶£çš„æœ‹å‹å—ï¼ŸğŸ¸
            </p>

            <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 mb-4 border border-green-200">
                <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center space-x-2">
                        <div class="w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-calendar-alt text-white"></i>
                        </div>
                        <div>
                            <div class="text-sm font-medium text-green-900">æ´»åŠ¨æ—¶é—´</div>
                            <div class="text-xs text-green-700">æœ¬å‘¨å…­ 14:00-16:00</div>
                        </div>
                    </div>
                    <span class="px-3 py-1 bg-green-500 text-white rounded-full text-xs font-medium">è¿›è¡Œä¸­</span>
                </div>
                <div class="space-y-2 text-sm">
                    <div class="flex items-center space-x-2 text-green-700">
                        <i class="fas fa-map-marker-alt text-green-600"></i>
                        <span>å¸‚ä½“è‚²é¦†ç¾½æ¯›çƒé¦†</span>
                    </div>
                    <div class="flex items-center space-x-2 text-green-700">
                        <i class="fas fa-users text-green-600"></i>
                        <span>å·²æœ‰ 2 äººå‚ä¸ Â· è¿˜éœ€ 1-2 äºº</span>
                    </div>
                    <div class="flex items-center space-x-2 text-green-700">
                        <i class="fas fa-dollar-sign text-green-600"></i>
                        <span>AAåˆ¶ Â· é¢„ä¼°äººå‡ 30å…ƒ</span>
                    </div>
                </div>
            </div>

            <div class="mb-4">
                <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=200&fit=crop"
                     alt="ç¾½æ¯›çƒ" class="w-full h-40 object-cover rounded-xl">
            </div>

            <div class="flex items-center justify-between pt-3 border-t border-gray-100">
                <button class="like-btn flex items-center space-x-2 text-gray-500" onclick="toggleLike(this)">
                    <i class="far fa-heart text-lg"></i>
                    <span class="text-sm">15</span>
                </button>
                <button class="flex items-center space-x-2 text-gray-500" onclick="showComments(3)">
                    <i class="far fa-comment text-lg"></i>
                    <span class="text-sm">6</span>
                </button>
                <button class="flex items-center space-x-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-2 rounded-full text-sm font-medium" onclick="joinBuddyActivity(3)">
                    <i class="fas fa-handshake text-sm"></i>
                    <span>å‚ä¸æ´»åŠ¨</span>
                </button>
            </div>
        </div>

        <!-- å®˜æ–¹æ´»åŠ¨ç±»å‹åŠ¨æ€ -->
        <div class="moment-card bg-white rounded-2xl p-4 shadow-sm border-l-4 border-purple-500 relative" data-category="official-activity">
            <div class="absolute top-4 right-4 z-10">
                <span class="px-3 py-1 bg-gradient-to-r from-yellow-400 to-amber-400 text-yellow-900 rounded-full text-xs font-bold flex items-center space-x-1">
                    <i class="fas fa-crown text-xs"></i>
                    <span>å®˜æ–¹</span>
                </span>
            </div>

            <div class="flex items-center space-x-3 mb-4">
                <div class="relative">
                    <img src="https://images.unsplash.com/photo-1511795409834-ef04bbd61622?w=50&h=50&fit=crop"
                         alt="å®˜æ–¹å¤´åƒ" class="w-10 h-10 rounded-full object-cover ring-2 ring-purple-300">
                    <div class="absolute -bottom-1 -right-1 w-5 h-5 bg-purple-500 rounded-full border-2 border-white flex items-center justify-center">
                        <i class="fas fa-check text-white text-xs"></i>
                    </div>
                </div>
                <div class="flex-1">
                    <div class="flex items-center space-x-2">
                        <h3 class="font-semibold text-gray-900">ç¢°ç¢°å®˜æ–¹</h3>
                        <span class="px-2 py-1 bg-purple-100 text-purple-600 rounded-full text-xs font-medium">
                            <i class="fas fa-star text-xs mr-1"></i>å®˜æ–¹æ´»åŠ¨
                        </span>
                    </div>
                    <p class="text-xs text-gray-500">5å°æ—¶å‰ Â· å®˜æ–¹å‘å¸ƒ</p>
                </div>
                        </div>

            <div class="mb-4 relative">
                <img src="https://images.unsplash.com/photo-1511795409834-ef04bbd61622?w=400&h=250&fit=crop"
                     alt="æ´»åŠ¨å°é¢" class="w-full h-48 object-cover rounded-xl">
                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent rounded-b-xl p-4">
                    <h4 class="text-white font-bold text-lg mb-1">æ‘„å½±å…´è¶£æ´¾å¯¹</h4>
                    <div class="flex items-center space-x-3 text-white text-xs">
                        <span><i class="fas fa-calendar-alt mr-1"></i>12æœˆ25æ—¥ 14:00</span>
                        <span><i class="fas fa-map-marker-alt mr-1"></i>798è‰ºæœ¯åŒº</span>
                    </div>
                </div>
            </div>

            <p class="text-gray-800 mb-4 leading-relaxed">
                æœ¬æ¬¡æ‘„å½±å…´è¶£æ´¾å¯¹ç”±ä¸“ä¸šæ‘„å½±å¸ˆæŒ‡å¯¼ï¼Œå°†ä¸ºå¤§å®¶åˆ†äº«æ‘„å½±æŠ€å·§ã€æ„å›¾æ–¹æ³•ã€åæœŸå¤„ç†ç­‰ä¸“ä¸šçŸ¥è¯†ã€‚æ´»åŠ¨ç°åœºæä¾›ä¸“ä¸šæ‘„å½±è®¾å¤‡ä¾›å¤§å®¶ä½“éªŒï¼
            </p>

            <div class="bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl p-4 mb-4 border border-purple-200">
                <div class="grid grid-cols-2 gap-3 mb-3">
                    <div class="bg-white rounded-lg p-3">
                        <div class="flex items-center space-x-2 mb-1">
                            <i class="fas fa-users text-purple-600"></i>
                            <span class="text-xs text-gray-600">å‚ä¸äººæ•°</span>
                        </div>
                        <div class="text-sm font-bold text-purple-900">18/30äºº</div>
                    </div>
                    <div class="bg-white rounded-lg p-3">
                        <div class="flex items-center space-x-2 mb-1">
                            <i class="fas fa-dollar-sign text-purple-600"></i>
                            <span class="text-xs text-gray-600">æ´»åŠ¨è´¹ç”¨</span>
                        </div>
                        <div class="text-sm font-bold text-purple-900">å…è´¹</div>
                    </div>
                </div>
                <div class="flex items-center space-x-2 text-sm text-purple-700">
                    <i class="fas fa-clock text-purple-600"></i>
                    <span>æ´»åŠ¨æ—¶é•¿ï¼šçº¦3å°æ—¶</span>
                </div>
            </div>

            <div class="flex items-center justify-between pt-3 border-t border-gray-100">
                <button class="like-btn flex items-center space-x-2 text-gray-500" onclick="toggleLike(this)">
                    <i class="far fa-heart text-lg"></i>
                    <span class="text-sm">128</span>
                </button>
                <button class="flex items-center space-x-2 text-gray-500" onclick="showComments(4)">
                    <i class="far fa-comment text-lg"></i>
                    <span class="text-sm">24</span>
                </button>
                <button class="flex items-center space-x-2 bg-gradient-to-r from-purple-500 to-indigo-500 text-white px-4 py-2 rounded-full text-sm font-medium" onclick="viewActivityDetails(4)">
                    <i class="fas fa-user-plus text-sm"></i>
                    <span>ç«‹å³æŠ¥å</span>
                </button>
            </div>
        </div>

        <!-- æ­å­ç±»å‹åŠ¨æ€ 2 -->
        <div class="moment-card bg-white rounded-2xl p-4 shadow-sm border-l-4 border-green-500" data-category="buddy">
            <div class="flex items-center space-x-3 mb-4">
                <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=50&h=50&fit=crop&crop=face"
                     alt="å¤´åƒ" class="w-10 h-10 rounded-full object-cover ring-2 ring-green-200">
                <div class="flex-1">
                    <div class="flex items-center space-x-2">
                        <h3 class="font-semibold text-gray-900">å°é›…</h3>
                        <div class="w-4 h-4 bg-green-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-check text-white text-xs"></i>
                        </div>
                        <span class="px-2 py-1 bg-green-100 text-green-600 rounded-full text-xs font-medium">
                            é¥­æ­å­
                        </span>
                    </div>
                    <p class="text-xs text-gray-500">6å°æ—¶å‰ Â· è·ç¦»ä½  0.8km</p>
                </div>
            </div>

            <p class="text-gray-800 mb-4 leading-relaxed">
                æƒ³æ‰¾ä¸€ä¸ªé¥­æ­å­ï¼å‘¨æœ«æƒ³å»æ–°å¼€çš„æ—¥æ–™åº—ï¼Œä¸€ä¸ªäººåƒæœ‰ç‚¹å­¤å•ï¼Œæ‰¾ä¸ªäººä¸€èµ·åˆ†äº«ç¾é£Ÿï½ğŸ±
            </p>

            <div class="mb-4">
                <img src="https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=400&h=250&fit=crop"
                     alt="æ—¥æ–™" class="w-full h-40 object-cover rounded-xl">
            </div>

            <div class="flex items-center justify-between pt-3 border-t border-gray-100">
                <button class="like-btn flex items-center space-x-2 text-gray-500" onclick="toggleLike(this)">
                    <i class="far fa-heart text-lg"></i>
                    <span class="text-sm">22</span>
                </button>
                <button class="flex items-center space-x-2 text-gray-500" onclick="showComments(5)">
                    <i class="far fa-comment text-lg"></i>
                    <span class="text-sm">9</span>
                </button>
                <button class="flex items-center space-x-2 bg-green-500 text-white px-4 py-2 rounded-full text-sm font-medium" onclick="joinBuddyActivity(5)">
                    <i class="fas fa-handshake text-sm"></i>
                    <span>æˆä¸ºæ­å­</span>
                </button>
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨å¯¼èˆªæ  -->
    <div class="bottom-nav px-6 py-3 flex-shrink-0">
        <div class="flex justify-around">
            <button class="nav-button flex flex-col items-center text-gray-600 opacity-70" data-page="home">
                <i class="fas fa-globe text-xl mb-1"></i>
                <span class="text-xs font-medium">æ˜Ÿçƒ</span>
            </button>
            <button class="nav-button flex flex-col items-center text-gray-600 opacity-70" data-page="chat">
                <i class="fas fa-comments text-xl mb-1"></i>
                <span class="text-xs font-medium">æ¶ˆæ¯</span>
            </button>
            <button class="nav-button active flex flex-col items-center text-purple-600" data-page="moments">
                <i class="fas fa-heart text-xl mb-1"></i>
                <span class="text-xs font-medium">é‡è§</span>
            </button>
            <button class="nav-button flex flex-col items-center text-gray-600 opacity-70" data-page="profile">
                <i class="fas fa-user text-xl mb-1"></i>
                <span class="text-xs font-medium">æˆ‘çš„</span>
            </button>
        </div>
    </div>

    <!-- ç­›é€‰æµ®çª— -->
    <div id="filterModal" class="filter-modal">
        <div class="filter-content">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-lg font-semibold text-gray-900">ç­›é€‰æ­å­ç±»å‹</h3>
                <button onclick="closeFilterModal()" class="w-8 h-8 flex items-center justify-center text-gray-400">
                    <i class="fas fa-times text-lg"></i>
                </button>
            </div>

            <div class="space-y-4">
                <p class="text-sm text-gray-600 mb-4">é€‰æ‹©ä½ æ„Ÿå…´è¶£çš„æ­å­ç±»å‹ï¼ˆå¯å¤šé€‰ï¼‰</p>

                <div class="grid grid-cols-2 gap-3">
                    <button class="buddy-type-option flex items-center space-x-3 p-4 rounded-xl border-2 border-gray-200 bg-gray-50 text-left" data-type="study" onclick="toggleBuddyType('study')">
                        <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-book text-green-600"></i>
                        </div>
                        <div>
                            <div class="font-medium text-gray-900">å­¦ä¹ æ­å­</div>
                            <div class="text-xs text-gray-500">ä¸€èµ·å­¦ä¹ è¿›æ­¥</div>
                        </div>
                    </button>

                    <button class="buddy-type-option flex items-center space-x-3 p-4 rounded-xl border-2 border-gray-200 bg-gray-50 text-left" data-type="food" onclick="toggleBuddyType('food')">
                        <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-utensils text-orange-600"></i>
                        </div>
                        <div>
                            <div class="font-medium text-gray-900">é¥­æ­å­</div>
                            <div class="text-xs text-gray-500">ä¸€èµ·å“å°ç¾é£Ÿ</div>
                        </div>
                    </button>

                    <button class="buddy-type-option flex items-center space-x-3 p-4 rounded-xl border-2 border-gray-200 bg-gray-50 text-left" data-type="sport" onclick="toggleBuddyType('sport')">
                        <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-dumbbell text-green-600"></i>
                        </div>
                        <div>
                            <div class="font-medium text-gray-900">è¿åŠ¨æ­å­</div>
                            <div class="text-xs text-gray-500">ä¸€èµ·è¿åŠ¨å¥èº«</div>
                        </div>
                    </button>

                    <button class="buddy-type-option flex items-center space-x-3 p-4 rounded-xl border-2 border-gray-200 bg-gray-50 text-left" data-type="travel" onclick="toggleBuddyType('travel')">
                        <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-plane text-purple-600"></i>
                        </div>
                        <div>
                            <div class="font-medium text-gray-900">æ—…æ¸¸æ­å­</div>
                            <div class="text-xs text-gray-500">ä¸€èµ·æ¢ç´¢ä¸–ç•Œ</div>
                        </div>
                    </button>

                    <button class="buddy-type-option flex items-center space-x-3 p-4 rounded-xl border-2 border-gray-200 bg-gray-50 text-left" data-type="movie" onclick="toggleBuddyType('movie')">
                        <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-film text-red-600"></i>
                        </div>
                        <div>
                            <div class="font-medium text-gray-900">ç”µå½±æ­å­</div>
                            <div class="text-xs text-gray-500">ä¸€èµ·è§‚å½±è®¨è®º</div>
                        </div>
                    </button>

                    <button class="buddy-type-option flex items-center space-x-3 p-4 rounded-xl border-2 border-gray-200 bg-gray-50 text-left" data-type="game" onclick="toggleBuddyType('game')">
                        <div class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-gamepad text-indigo-600"></i>
                        </div>
                        <div>
                            <div class="font-medium text-gray-900">æ¸¸æˆæ­å­</div>
                            <div class="text-xs text-gray-500">ä¸€èµ·æ¸¸æˆå¨±ä¹</div>
                        </div>
                    </button>
                </div>
            </div>

            <div class="flex space-x-3 mt-8">
                <button onclick="clearFilter()" class="flex-1 py-3 px-4 bg-gray-100 text-gray-700 rounded-xl font-medium">
                    æ¸…ç©º
                </button>
                <button onclick="applyFilter()" class="flex-1 py-3 px-4 bg-green-500 text-white rounded-xl font-medium">
                    ç¡®å®š
                </button>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥å¯¼èˆªè„šæœ¬ -->
    <script src="js/navigation.js"></script>

    <!-- é¡µé¢ç‰¹å®šäº¤äº’è„šæœ¬ -->
    <script>
        // åˆ‡æ¢ç‚¹èµçŠ¶æ€
        function toggleLike(button) {
            const icon = button.querySelector('i');
            const countSpan = button.querySelector('span');
            let count = parseInt(countSpan.textContent);

            if (button.classList.contains('liked')) {
                button.classList.remove('liked');
                icon.classList.remove('fas');
                icon.classList.add('far');
                count--;
                showToast('å·²å–æ¶ˆç‚¹èµ', 'info');
            } else {
                button.classList.add('liked');
                icon.classList.remove('far');
                icon.classList.add('fas');
                count++;
                showToast('å·²ç‚¹èµ', 'success');
            }

            countSpan.textContent = count;
        }

        // æ˜¾ç¤ºè¯„è®º
        function showComments(momentId) {
            showToast('æ­£åœ¨åŠ è½½è¯„è®º...', 'info');
            // è¿™é‡Œå¯ä»¥è·³è½¬åˆ°è¯„è®ºé¡µé¢æˆ–æ˜¾ç¤ºè¯„è®ºå¼¹çª—
        }

        // åˆ†äº«åŠ¨æ€
        function shareMoment(momentId) {
            showToast('åˆ†äº«åŠŸèƒ½å¼€å‘ä¸­...', 'info');
            // è¿™é‡Œå¯ä»¥å®ç°åˆ†äº«åŠŸèƒ½
        }

        // åŠ¨æ€ç­›é€‰åŠŸèƒ½
        function filterMoments(category) {
            // ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.moment-filter-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-green-100', 'text-green-600', 'shadow-sm');
                btn.classList.add('bg-gray-100', 'text-gray-600');
            });

            // æ¿€æ´»å½“å‰æŒ‰é’®
            const activeBtn = event.target.closest('.moment-filter-btn');
            if (activeBtn) {
                activeBtn.classList.add('active', 'bg-green-100', 'text-green-600', 'shadow-sm');
                activeBtn.classList.remove('bg-gray-100', 'text-gray-600');
            }

            // ç­›é€‰åŠ¨æ€å¡ç‰‡
            const momentCards = document.querySelectorAll('.moment-card');
            let visibleCount = 0;

            momentCards.forEach(card => {
                const cardCategory = card.getAttribute('data-category');
                if (category === 'all' || cardCategory === category) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });

            const categoryName = category === 'all' ? 'å…¨éƒ¨' :
                               category === 'buddy' ? 'æ­å­' :
                               category === 'love' ? 'æ‹çˆ±' :
                               category === 'buddy-activity' ? 'æ­å­æ´»åŠ¨' : 'å®˜æ–¹æ´»åŠ¨';

            if (visibleCount > 0) {
                showToast(`å·²ç­›é€‰ ${categoryName} åŠ¨æ€ï¼ˆ${visibleCount}æ¡ï¼‰`, 'info');
            } else {
                showToast(`æš‚æ—  ${categoryName} åŠ¨æ€`, 'warning');
            }
        }

        // å‚ä¸æ­å­æ´»åŠ¨
        function joinBuddyActivity(activityId) {
            showToast('æ­£åœ¨åŠ å…¥æ­å­æ´»åŠ¨...', 'info');
            // è¿™é‡Œå¯ä»¥æ·»åŠ åŠ å…¥æ­å­æ´»åŠ¨çš„é€»è¾‘
        }

        // æŸ¥çœ‹æ´»åŠ¨è¯¦æƒ…
        function viewActivityDetails(activityId) {
            showToast('æ­£åœ¨æŸ¥çœ‹æ´»åŠ¨è¯¦æƒ…...', 'info');
            // è¿™é‡Œå¯ä»¥è·³è½¬åˆ°æ´»åŠ¨è¯¦æƒ…é¡µé¢
            if (window.navigationManager) {
                window.navigationManager.navigateToSubPage('offline-activity-detail');
            } else {
                setTimeout(() => {
                    window.location.href = 'offline-activity-detail.html';
                }, 500);
            }
        }

        // æŸ¥çœ‹ç”¨æˆ·èµ„æ–™
        function viewProfile(userId) {
            showToast('æ­£åœ¨æŸ¥çœ‹ç”¨æˆ·èµ„æ–™...', 'info');
            if (window.navigationManager) {
                window.navigationManager.navigateToSubPage('profile');
            } else {
                setTimeout(() => {
                    window.location.href = 'profile.html';
                }, 500);
            }
        }

        // æ‰“å¼€å‘å¸ƒåŠ¨æ€é¡µé¢
        function openPublishMoment() {
            if (window.navigationManager) {
                window.navigationManager.navigateToSubPage('publish-moment');
            } else {
                // showToast('æ­£åœ¨è·³è½¬åˆ°å‘å¸ƒåŠ¨æ€é¡µé¢...', 'info');
                setTimeout(() => {
                    window.location.href = 'publish-moment.html';
                }, 50);
            }
        }

        // æœç´¢åŠŸèƒ½
        function openSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.focus();
            showToast('è¯·è¾“å…¥æœç´¢å…³é”®è¯', 'info');
        }

        // ç­›é€‰ç›¸å…³å˜é‡
        let selectedBuddyTypes = [];
        let originalCards = [];

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // ä¿å­˜åŸå§‹å¡ç‰‡æ•°æ®
            originalCards = Array.from(document.querySelectorAll('.moment-card'));

            // æœç´¢åŠŸèƒ½
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                filterCards();
            });
        });

        // åˆ‡æ¢ç­›é€‰æµ®çª—
        function toggleFilterModal() {
            const modal = document.getElementById('filterModal');
            modal.classList.toggle('show');
            if (modal.classList.contains('show')) {
                modal.style.display = 'flex';
            } else {
                modal.style.display = 'none';
            }
        }

        // å…³é—­ç­›é€‰æµ®çª—
        function closeFilterModal() {
            const modal = document.getElementById('filterModal');
            modal.classList.remove('show');
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300);
        }

        // åˆ‡æ¢æ­å­ç±»å‹é€‰æ‹©
        function toggleBuddyType(type) {
            const option = document.querySelector(`[data-type="${type}"]`);
            const index = selectedBuddyTypes.indexOf(type);

            if (index > -1) {
                selectedBuddyTypes.splice(index, 1);
                option.classList.remove('selected');
            } else {
                selectedBuddyTypes.push(type);
                option.classList.add('selected');
            }

            updateFilterCount();
        }

        // æ›´æ–°ç­›é€‰è®¡æ•°
        function updateFilterCount() {
            const countElement = document.getElementById('filterCount');
            if (selectedBuddyTypes.length > 0) {
                countElement.textContent = selectedBuddyTypes.length;
                countElement.classList.remove('hidden');
            } else {
                countElement.classList.add('hidden');
            }
        }

        // æ¸…ç©ºç­›é€‰
        function clearFilter() {
            selectedBuddyTypes = [];
            document.querySelectorAll('.buddy-type-option').forEach(option => {
                option.classList.remove('selected');
            });
            updateFilterCount();
            filterCards();
        }

        // åº”ç”¨ç­›é€‰
        function applyFilter() {
            filterCards();
            closeFilterModal();
            showToast(`å·²ç­›é€‰ ${selectedBuddyTypes.length} ç§æ­å­ç±»å‹`, 'success');
        }

        // ç­›é€‰å¡ç‰‡
        function filterCards() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

            originalCards.forEach(card => {
                let shouldShow = true;

                // æœç´¢ç­›é€‰
                if (searchTerm) {
                    const cardText = card.textContent.toLowerCase();
                    if (!cardText.includes(searchTerm)) {
                        shouldShow = false;
                    }
                }

                // æ­å­ç±»å‹ç­›é€‰
                if (selectedBuddyTypes.length > 0) {
                    const cardCategory = card.getAttribute('data-category');
                    if (cardCategory === 'buddy') {
                        const buddyTypeSpan = card.querySelector('span[class*="bg-green-100"]');
                        if (buddyTypeSpan) {
                            const buddyTypeText = buddyTypeSpan.textContent.trim();
                            const typeMapping = {
                                'å­¦ä¹ æ­å­': 'study',
                                'é¥­æ­å­': 'food',
                                'è¿åŠ¨æ­å­': 'sport',
                                'æ—…æ¸¸æ­å­': 'travel',
                                'ç”µå½±æ­å­': 'movie',
                                'æ¸¸æˆæ­å­': 'game'
                            };

                            const cardBuddyType = typeMapping[buddyTypeText];
                            if (!selectedBuddyTypes.includes(cardBuddyType)) {
                                shouldShow = false;
                            }
                        } else {
                            shouldShow = false;
                        }
                    } else {
                        shouldShow = false;
                    }
                }

                card.style.display = shouldShow ? 'block' : 'none';
            });
        }

        // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `fixed top-20 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-full text-white text-sm font-medium z-50 transition-all duration-300`;

            const styles = {
                'info': 'bg-green-500',
                'success': 'bg-green-500',
                'error': 'bg-red-500',
                'warning': 'bg-yellow-500'
            };

            toast.className += ` ${styles[type] || styles['info']}`;
            toast.textContent = message;

            document.body.appendChild(toast);

            setTimeout(() => {
                toast.style.opacity = '1';
                toast.style.transform = 'translate(-50%, 0)';
            }, 100);

            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translate(-50%, -20px)';
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 2000);
        }
    </script>
            </div>
        </div>
    </div>
</body>
</html>
