# ç¢°ç¢°å°ç¨‹åºå‰åç«¯æ¥å£æ–‡æ¡£

## æ–‡æ¡£ä¿¡æ¯
- **ç”Ÿæˆæ—¶é—´**ï¼š2025-11-02 21:30
- **æ›´æ–°æ—¶é—´**ï¼š2025-12-08ï¼ˆæ–°å¢å–æ¶ˆå–œæ¬¢ã€ç§»é™¤ç²‰ä¸ã€ç¼–è¾‘åŠ¨æ€æ¥å£ï¼‰
- **æ¥å£æ•°é‡**ï¼š92ä¸ª
- **ä½œè€…**ï¼š[tang]
- **Base URL**ï¼š`http://localhost:8080`
- **è®¤è¯æ–¹å¼**ï¼šBearer Tokenï¼ˆJWTï¼‰
- **âš ï¸ é‡è¦**ï¼šå›¾ç‰‡ä¸Šä¼ é‡‡ç”¨ä¸¤æ­¥æœºåˆ¶ï¼Œè¯¦è§ [å›¾ç‰‡ä¸Šä¼ å®Œæ•´æµç¨‹è¯´æ˜](#-å›¾ç‰‡ä¸Šä¼ å®Œæ•´æµç¨‹è¯´æ˜)

---

## ğŸ“‘ æ¥å£ç›®å½•

### ç”¨æˆ·è®¤è¯æ¨¡å—ï¼ˆ3ä¸ªï¼‰
- [1. å¾®ä¿¡ç™»å½•](#1-å¾®ä¿¡ç™»å½•)
- [2. ç”Ÿæˆæµ‹è¯•Tokenï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰](#2-ç”Ÿæˆæµ‹è¯•tokenä»…å¼€å‘ç¯å¢ƒ)
- [3. æ ¡éªŒToken](#3-æ ¡éªŒtoken)

### ç”¨æˆ·èµ„æ–™æ¨¡å—ï¼ˆ7ä¸ªï¼‰
- [4. å®Œå–„èµ„æ–™](#4-å®Œå–„èµ„æ–™)
- [5. æ›´æ–°èµ„æ–™](#5-æ›´æ–°èµ„æ–™)
- [6. æŸ¥çœ‹æˆ‘çš„èµ„æ–™](#6-æŸ¥çœ‹æˆ‘çš„èµ„æ–™)
- [7. æŸ¥çœ‹ä»–äººèµ„æ–™](#7-æŸ¥çœ‹ä»–äººèµ„æ–™)
- [8. æŸ¥çœ‹èµ„æ–™å®Œå–„çŠ¶æ€](#8-æŸ¥çœ‹èµ„æ–™å®Œå–„çŠ¶æ€)
- [9. è·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ®](#9-è·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ®)
- [10. æäº¤å®åè®¤è¯](#10-æäº¤å®åè®¤è¯)
- [11. æŸ¥è¯¢å®åè®¤è¯çŠ¶æ€](#11-æŸ¥è¯¢å®åè®¤è¯çŠ¶æ€)

### å›¾ç‰‡ç®¡ç†æ¨¡å—ï¼ˆ8ä¸ªï¼‰
- [12. ä¿å­˜å›¾ç‰‡åˆ°ä¸šåŠ¡æ¨¡å—](#12-ä¿å­˜å›¾ç‰‡åˆ°ä¸šåŠ¡æ¨¡å—)
- [13. è·å–å›¾ç‰‡åˆ—è¡¨](#13-è·å–å›¾ç‰‡åˆ—è¡¨)
- [14. åˆ é™¤å›¾ç‰‡](#14-åˆ é™¤å›¾ç‰‡)
- [15. è®¾ç½®ä¸»å›¾ç‰‡](#15-è®¾ç½®ä¸»å›¾ç‰‡)
- [16. æ›´æ–°å›¾ç‰‡](#16-æ›´æ–°å›¾ç‰‡)
- [17. æ ¹æ®ä¸šåŠ¡ç±»å‹è·å–å›¾ç‰‡](#17-æ ¹æ®ä¸šåŠ¡ç±»å‹è·å–å›¾ç‰‡)
- [18. æ‰¹é‡åˆ é™¤å›¾ç‰‡](#18-æ‰¹é‡åˆ é™¤å›¾ç‰‡)
- [19. æ¢å¤å›¾ç‰‡](#19-æ¢å¤å›¾ç‰‡)

### æ ‡ç­¾ä¸éšç§æ¨¡å—ï¼ˆ6ä¸ªï¼‰
- [20. è·å–æ ‡ç­¾åº“](#20-è·å–æ ‡ç­¾åº“)
- [21. è®¾ç½®æˆ‘çš„æ ‡ç­¾](#21-è®¾ç½®æˆ‘çš„æ ‡ç­¾)
- [22. æ›´æ–°éšç§è®¾ç½®](#22-æ›´æ–°éšç§è®¾ç½®)
- [23. è·å–éšç§è®¾ç½®](#23-è·å–éšç§è®¾ç½®)
- [24. æ‹‰é»‘ç”¨æˆ·](#24-æ‹‰é»‘ç”¨æˆ·)
- [25. ç§»é™¤é»‘åå•](#25-ç§»é™¤é»‘åå•)

### æ™ºèƒ½åŒ¹é…æ¨¡å—ï¼ˆ10ä¸ªï¼‰
- [26. è®¾ç½®åŒ¹é…åå¥½](#26-è®¾ç½®åŒ¹é…åå¥½)
- [27. è·å–åŒ¹é…åå¥½](#27-è·å–åŒ¹é…åå¥½)
- [28. è·å–æ¨èç”¨æˆ·åˆ—è¡¨](#28-è·å–æ¨èç”¨æˆ·åˆ—è¡¨)
- [29. å–œæ¬¢æ“ä½œ](#29-å–œæ¬¢æ“ä½œ)
- [30. è¶…çº§å–œæ¬¢æ“ä½œ](#30-è¶…çº§å–œæ¬¢æ“ä½œ)
- [31. è·³è¿‡æ“ä½œ](#31-è·³è¿‡æ“ä½œ)
- [32. æŸ¥çœ‹è°å–œæ¬¢æˆ‘](#32-æŸ¥çœ‹è°å–œæ¬¢æˆ‘)
- [33. è·å–åŒ¹é…é™åˆ¶ä¿¡æ¯](#33-è·å–åŒ¹é…é™åˆ¶ä¿¡æ¯)
- [70. è·å–åŒ¹é…å†å²](#70-è·å–åŒ¹é…å†å²)
- [90. å–æ¶ˆå–œæ¬¢](#90-å–æ¶ˆå–œæ¬¢)

### OSSå­˜å‚¨æ¨¡å—ï¼ˆ5ä¸ªï¼‰
- [34. ä¸Šä¼ å›¾ç‰‡ï¼ˆæ–‡ä»¶æ–¹å¼ï¼‰](#34-ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶æ–¹å¼)
- [35. ä¸Šä¼ å›¾ç‰‡ï¼ˆBase64æ–¹å¼ï¼‰](#35-ä¸Šä¼ å›¾ç‰‡base64æ–¹å¼)
- [36. æ‰¹é‡ä¸Šä¼ å›¾ç‰‡](#36-æ‰¹é‡ä¸Šä¼ å›¾ç‰‡)
- [37. åˆ é™¤OSSå›¾ç‰‡](#37-åˆ é™¤osså›¾ç‰‡)
- [38. è·å–å›¾ç‰‡ç­¾åURL](#38-è·å–å›¾ç‰‡ç­¾åurl)

### åŠ¨æ€å¹¿åœºæ¨¡å—ï¼ˆ11ä¸ªï¼‰
- [39. å‘å¸ƒåŠ¨æ€](#39-å‘å¸ƒåŠ¨æ€)
- [40. è·å–åŠ¨æ€åˆ—è¡¨](#40-è·å–åŠ¨æ€åˆ—è¡¨)
- [41. è·å–åŠ¨æ€è¯¦æƒ…](#41-è·å–åŠ¨æ€è¯¦æƒ…)
- [42. ç‚¹èµåŠ¨æ€](#42-ç‚¹èµåŠ¨æ€)
- [43. å–æ¶ˆç‚¹èµ](#43-å–æ¶ˆç‚¹èµ)
- [44. ç¼–è¾‘åŠ¨æ€](#44-ç¼–è¾‘åŠ¨æ€)
- [45. åˆ é™¤åŠ¨æ€](#45-åˆ é™¤åŠ¨æ€)
- [46. æŠ¥åæ´»åŠ¨](#46-æŠ¥åæ´»åŠ¨)
- [47. å–æ¶ˆæŠ¥å](#47-å–æ¶ˆæŠ¥å)
- [48. æ£€æŸ¥å‘å¸ƒé™åˆ¶](#48-æ£€æŸ¥å‘å¸ƒé™åˆ¶)
- [73. æœç´¢åŠ¨æ€](#73-æœç´¢åŠ¨æ€)

### VIPä¼šå‘˜æ¨¡å—ï¼ˆ3ä¸ªï¼‰
- [48. è·å–VIPä¿¡æ¯](#48-è·å–vipä¿¡æ¯)
- [49. æ£€æŸ¥VIPçŠ¶æ€](#49-æ£€æŸ¥vipçŠ¶æ€)
- [50. æ£€æŸ¥VIPåŠŸèƒ½æƒé™](#50-æ£€æŸ¥vipåŠŸèƒ½æƒé™)

### æ”¯ä»˜æ¨¡å—ï¼ˆ3ä¸ªï¼‰
- [51. åˆ›å»ºè®¢å•](#51-åˆ›å»ºè®¢å•)
- [52. æŸ¥è¯¢è®¢å•](#52-æŸ¥è¯¢è®¢å•)
- [53. å–æ¶ˆè®¢å•](#53-å–æ¶ˆè®¢å•)

### ç”¨æˆ·å…³æ³¨æ¨¡å—ï¼ˆ6ä¸ªï¼‰âœ¨ æ–°å¢
- [54. å…³æ³¨ç”¨æˆ·](#54-å…³æ³¨ç”¨æˆ·)
- [55. å–æ¶ˆå…³æ³¨](#55-å–æ¶ˆå…³æ³¨)
- [56. è·å–å…³æ³¨åˆ—è¡¨](#56-è·å–å…³æ³¨åˆ—è¡¨)
- [57. è·å–ç²‰ä¸åˆ—è¡¨](#57-è·å–ç²‰ä¸åˆ—è¡¨)
- [74. æ£€æŸ¥æ˜¯å¦å·²å…³æ³¨](#74-æ£€æŸ¥æ˜¯å¦å·²å…³æ³¨)
- [91. ç§»é™¤ç²‰ä¸](#91-ç§»é™¤ç²‰ä¸)

### ç”¨æˆ·æ”¶è—æ¨¡å—ï¼ˆ5ä¸ªï¼‰âœ¨ æ–°å¢
- [58. æ”¶è—ç”¨æˆ·/æ´»åŠ¨/åŠ¨æ€](#58-æ”¶è—ç”¨æˆ·æ´»åŠ¨åŠ¨æ€)
- [59. å–æ¶ˆæ”¶è—](#59-å–æ¶ˆæ”¶è—)
- [60. è·å–æ”¶è—ç”¨æˆ·åˆ—è¡¨](#60-è·å–æ”¶è—ç”¨æˆ·åˆ—è¡¨)
- [61. è·å–æ”¶è—æ´»åŠ¨åˆ—è¡¨](#61-è·å–æ”¶è—æ´»åŠ¨åˆ—è¡¨)
- [62. è·å–æ”¶è—åŠ¨æ€åˆ—è¡¨](#62-è·å–æ”¶è—åŠ¨æ€åˆ—è¡¨)

### åŠ¨æ€è¯„è®ºæ¨¡å—ï¼ˆ4ä¸ªï¼‰âœ¨ æ–°å¢
- [63. è·å–åŠ¨æ€è¯„è®ºåˆ—è¡¨](#63-è·å–åŠ¨æ€è¯„è®ºåˆ—è¡¨)
- [64. å‘è¡¨è¯„è®º](#64-å‘è¡¨è¯„è®º)
- [65. å›å¤è¯„è®º](#65-å›å¤è¯„è®º)
- [66. ç‚¹èµè¯„è®º](#66-ç‚¹èµè¯„è®º)

### æ´»åŠ¨ç®¡ç†æ¨¡å—ï¼ˆ3ä¸ªï¼‰âœ¨ æ–°å¢
- [67. è·å–æ´»åŠ¨å†å²è®°å½•](#67-è·å–æ´»åŠ¨å†å²è®°å½•)
- [68. æ´»åŠ¨ç­¾åˆ°](#68-æ´»åŠ¨ç­¾åˆ°)
- [69. è·å–æ´»åŠ¨è¯¦æƒ…](#69-è·å–æ´»åŠ¨è¯¦æƒ…)

### å…¶ä»–åŠŸèƒ½æ¨¡å—ï¼ˆ4ä¸ªï¼‰âœ¨ æ–°å¢
- [70. è·å–åŒ¹é…å†å²](#70-è·å–åŒ¹é…å†å²)
- [71. æäº¤æ„è§åé¦ˆ](#71-æäº¤æ„è§åé¦ˆ)
- [72. äººè„¸è¯†åˆ«éªŒè¯](#72-äººè„¸è¯†åˆ«éªŒè¯)
- [73. æœç´¢åŠ¨æ€](#73-æœç´¢åŠ¨æ€)

### èŠå¤©ç®¡ç†æ¨¡å—ï¼ˆ8ä¸ªï¼‰ğŸ”¥ æœ€æ–°
- [75. è·å–ä¼šè¯åˆ—è¡¨](#75-è·å–ä¼šè¯åˆ—è¡¨)
- [76. åˆ›å»ºæˆ–è·å–ä¼šè¯](#76-åˆ›å»ºæˆ–è·å–ä¼šè¯)
- [77. è·å–ä¼šè¯æ¶ˆæ¯å†å²](#77-è·å–ä¼šè¯æ¶ˆæ¯å†å²)
- [78. å‘é€æ¶ˆæ¯](#78-å‘é€æ¶ˆæ¯)
- [79. æ’¤å›æ¶ˆæ¯](#79-æ’¤å›æ¶ˆæ¯)
- [80. æ ‡è®°æ¶ˆæ¯å·²è¯»](#80-æ ‡è®°æ¶ˆæ¯å·²è¯»)
- [81. è·å–æœªè¯»æ¶ˆæ¯æ€»æ•°](#81-è·å–æœªè¯»æ¶ˆæ¯æ€»æ•°)
- [82. åˆ é™¤ä¼šè¯](#82-åˆ é™¤ä¼šè¯)

### æ˜Ÿçƒå¥‡é‡ç®¡ç†æ¨¡å—ï¼ˆ7ä¸ªï¼‰ğŸ”¥ æœ€æ–°
- [83. è·å–æ˜Ÿçƒåˆ—è¡¨](#83-è·å–æ˜Ÿçƒåˆ—è¡¨)
- [84. è¿›å…¥æ˜Ÿçƒï¼ˆå¼€å§‹å¥‡é‡ï¼‰](#84-è¿›å…¥æ˜Ÿçƒå¼€å§‹å¥‡é‡)
- [85. è·å–å¥‡é‡è¯¦æƒ…](#85-è·å–å¥‡é‡è¯¦æƒ…)
- [86. å®Œæˆä»»åŠ¡](#86-å®Œæˆä»»åŠ¡)
- [87. è¡¨è¾¾å…´è¶£](#87-è¡¨è¾¾å…´è¶£)
- [88. è·³è¿‡å¥‡é‡](#88-è·³è¿‡å¥‡é‡)
- [89. è·å–å¥‡é‡å†å²](#89-è·å–å¥‡é‡å†å²)

---

## ğŸ“Š æ¨¡å—ç»Ÿè®¡

| æ¨¡å— | æ¥å£æ•°é‡ |
|------|---------|
| ç”¨æˆ·è®¤è¯ | 3ä¸ª |
| ç”¨æˆ·èµ„æ–™ | 7ä¸ª |
| å›¾ç‰‡ç®¡ç† | 8ä¸ª |
| æ ‡ç­¾ä¸éšç§ | 6ä¸ª |
| æ™ºèƒ½åŒ¹é… | 10ä¸ª |
| OSSå­˜å‚¨ | 5ä¸ª |
| åŠ¨æ€å¹¿åœº | 11ä¸ª |
| VIPä¼šå‘˜ | 3ä¸ª |
| æ”¯ä»˜æ¨¡å— | 3ä¸ª |
| ç”¨æˆ·å…³æ³¨ | 6ä¸ª |
| ç”¨æˆ·æ”¶è— | 5ä¸ª |
| åŠ¨æ€è¯„è®º | 4ä¸ª |
| æ´»åŠ¨ç®¡ç† | 3ä¸ª |
| å…¶ä»–åŠŸèƒ½ | 4ä¸ª |
| èŠå¤©ç®¡ç† ğŸ”¥ | 8ä¸ª |
| æ˜Ÿçƒå¥‡é‡ ğŸ”¥ | 7ä¸ª |
| **æ€»è®¡** | **91ä¸ª** |

## âš ï¸ é‡è¦å˜æ›´è¯´æ˜

### BUGä¿®å¤ï¼šèµ„æ–™å®Œå–„çŠ¶æ€æ£€æŸ¥é—®é¢˜ï¼ˆ2025-11-05ï¼‰

**é—®é¢˜æè¿°**ï¼š
- ç”¨æˆ·è®¾ç½®äº†æ˜µç§°ã€å¤´åƒã€æ€§åˆ«ã€ç”Ÿæ—¥ã€å¹´é¾„ã€å…´è¶£æ ‡ç­¾ç­‰æ‰€æœ‰å¿…å¡«ä¿¡æ¯åï¼Œ`profileComplete` ä»ç„¶æ˜¾ç¤ºä¸º 0
- è°ƒç”¨ `/api/user/profile/status` æ¥å£æ˜¾ç¤ºç¼ºå°‘"å…´è¶£æ ‡ç­¾"å­—æ®µ

**é—®é¢˜åŸå› **ï¼š
- `checkProfileStatus` æ–¹æ³•åœ¨æŸ¥è¯¢ç”¨æˆ·æ ‡ç­¾æ—¶ï¼Œä½¿ç”¨äº†æ•°æ®åº“è‡ªå¢IDï¼ˆLongç±»å‹ï¼‰
- è€Œä¿å­˜æ ‡ç­¾æ—¶ä½¿ç”¨çš„æ˜¯ä¸šåŠ¡ç”¨æˆ·IDï¼ˆStringç±»å‹ï¼‰
- å¯¼è‡´æŸ¥è¯¢ä¸åˆ°å·²è®¾ç½®çš„æ ‡ç­¾æ•°æ®ï¼Œè¯¯åˆ¤ä¸ºæœªè®¾ç½®æ ‡ç­¾

**ä¿®å¤å†…å®¹**ï¼š
1. ä¿®æ”¹ `checkProfileStatus` æ–¹æ³•ï¼Œç»Ÿä¸€ä½¿ç”¨ä¸šåŠ¡ç”¨æˆ·IDï¼ˆStringç±»å‹ï¼‰æŸ¥è¯¢æ ‡ç­¾
2. ä¿®æ”¹ `getUserTags` æ–¹æ³•å‚æ•°ç±»å‹ä» `Long` æ”¹ä¸º `String`
3. ä¿®æ”¹ `getProfile` æ–¹æ³•ä¸­è°ƒç”¨ `getUserTags` æ—¶ä¼ å…¥ä¸šåŠ¡ç”¨æˆ·ID

**å½±å“èŒƒå›´**ï¼š
- å·²è®¾ç½®æ ‡ç­¾çš„ç”¨æˆ·ï¼Œä¿®å¤å `profileComplete` å°†æ­£ç¡®æ˜¾ç¤ºä¸º 1
- èµ„æ–™å®Œå–„åº¦è®¡ç®—æ›´åŠ å‡†ç¡®

**å‰ç«¯é€‚é…**ï¼š
- æ— éœ€ä¿®æ”¹ï¼Œæ¥å£è¿”å›æ ¼å¼æœªå˜åŒ–

### userId å­—æ®µç±»å‹å˜æ›´ï¼ˆ2025-11-04ï¼‰

**å˜æ›´å†…å®¹**ï¼š
- æ‰€æœ‰æ¥å£è¿”å›çš„ `userId` å­—æ®µç±»å‹ä» `Long`ï¼ˆæ•°å­—ï¼‰ å˜æ›´ä¸º `String`ï¼ˆå­—ç¬¦ä¸²ï¼‰
- `userId` ç°åœ¨ä¸ºä¸šåŠ¡ç”¨æˆ·IDï¼Œæ ¼å¼ä¸ºï¼š`U` + 13ä½æ—¶é—´æˆ³ + 6ä½éšæœºå­—ç¬¦ï¼ˆå…±20ä½ï¼‰
- ç¤ºä¾‹ï¼š`U1699123456789AB12CD`

**å½±å“èŒƒå›´**ï¼š
1. **å¾®ä¿¡ç™»å½•æ¥å£**ï¼šè¿”å›çš„ `userId` ä¸º String ç±»å‹
2. **è·å–ç”¨æˆ·ä¿¡æ¯æ¥å£**ï¼šè¿”å›çš„ `userId` ä¸º String ç±»å‹
3. **ç”¨æˆ·èµ„æ–™æ¥å£**ï¼šè¿”å›çš„ `userId` ä¸º String ç±»å‹
4. **æŸ¥çœ‹ä»–äººèµ„æ–™æ¥å£**ï¼šè·¯å¾„å‚æ•° `userId` éœ€ä¼  String ç±»å‹çš„ä¸šåŠ¡ç”¨æˆ·ID
5. **åŒ¹é…åå¥½æ¥å£**ï¼šè¿”å›çš„ `userId` ä¸º String ç±»å‹

**å‰ç«¯é€‚é…è¦ç‚¹**ï¼š
```typescript
// ä¿®æ”¹å‰
interface User {
  userId: number;  // Longç±»å‹
}

// ä¿®æ”¹å
interface User {
  userId: string;  // Stringç±»å‹ï¼Œä¸šåŠ¡ç”¨æˆ·ID
}
```

**å†…éƒ¨å®ç°**ï¼š
- JWT Token å†…éƒ¨ä»ä½¿ç”¨æ•°æ®åº“è‡ªå¢IDï¼ˆLongç±»å‹ï¼‰è¿›è¡Œè®¤è¯
- å¯¹å¤–æ¥å£ç»Ÿä¸€è¿”å›ä¸šåŠ¡ç”¨æˆ·IDï¼ˆStringç±»å‹ï¼‰
- æ•°æ®åº“ä¸­åŒæ—¶å­˜å‚¨æ•°æ®åº“IDï¼ˆ`id`å­—æ®µï¼‰å’Œä¸šåŠ¡ç”¨æˆ·IDï¼ˆ`user_id`å­—æ®µï¼‰

---

## ğŸ“¸ å›¾ç‰‡ä¸Šä¼ å®Œæ•´æµç¨‹è¯´æ˜

### æ ¸å¿ƒæ¦‚å¿µ

æœ¬ç³»ç»Ÿé‡‡ç”¨**ä¸¤æ­¥ä¸Šä¼ **æœºåˆ¶ï¼š

```
æ­¥éª¤1ï¼šOSSä¸Šä¼  â†’ è·å¾—å›¾ç‰‡URL
æ­¥éª¤2ï¼šä¸šåŠ¡ä¿å­˜ â†’ å…³è”åˆ°å…·ä½“ä¸šåŠ¡ï¼ˆå¤´åƒã€ç›¸å†Œã€åŠ¨æ€ç­‰ï¼‰
```

### ä¸ºä»€ä¹ˆè¦ä¸¤æ­¥ï¼Ÿ

1. **è§£è€¦å­˜å‚¨å’Œä¸šåŠ¡**ï¼šOSSè´Ÿè´£å­˜å‚¨ï¼Œä¸šåŠ¡ç³»ç»Ÿè´Ÿè´£é€»è¾‘
2. **çµæ´»æ€§**ï¼šä¸Šä¼ åå¯ä»¥é€‰æ‹©ä¸ä¿å­˜ï¼ˆé¢„è§ˆã€ç¼–è¾‘ç­‰åœºæ™¯ï¼‰
3. **å¤ç”¨æ€§**ï¼šä¸€å¼ å›¾ç‰‡å¯ä»¥ç”¨äºå¤šä¸ªåœ°æ–¹
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šOSSç›´ä¼ ï¼Œä¸å ç”¨ä¸šåŠ¡æœåŠ¡å™¨å¸¦å®½

---

### å®Œæ•´è°ƒç”¨æµç¨‹

#### åœºæ™¯1ï¼šç”¨æˆ·ä¸Šä¼ å¤´åƒ

```javascript
// æ­¥éª¤1ï¼šä¸Šä¼ å›¾ç‰‡åˆ°OSS
const formData = new FormData();
formData.append('file', avatarFile);
formData.append('category', 'avatar');

const ossResponse = await fetch('/api/oss/upload', {
  method: 'POST',
  headers: { 'Authorization': `Bearer ${token}` },
  body: formData
});

const { data } = await ossResponse.json();
const imageUrl = data.imageUrl;
// å¾—åˆ°ï¼šhttps://your-bucket.oss-cn-hangzhou.aliyuncs.com/uploads/avatar/U123.../avatar.jpg

// æ­¥éª¤2ï¼šä¿å­˜åˆ°ä¸šåŠ¡ç³»ç»Ÿï¼ˆå¤´åƒä¼šè‡ªåŠ¨æ›¿æ¢ï¼‰
const saveResponse = await fetch('/api/media/save', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    imageUrl: imageUrl,      // æ­¥éª¤1è·å¾—çš„URL
    mediaType: 'avatar',     // å›¾ç‰‡ç±»å‹
    isPrimary: true          // è®¾ä¸ºä¸»å›¾ç‰‡
  })
});

// å®Œæˆï¼å¤´åƒå·²æ›´æ–°
```

#### åœºæ™¯2ï¼šç”¨æˆ·ä¸Šä¼ ç›¸å†Œç…§ç‰‡ï¼ˆæ‰¹é‡ï¼‰

```javascript
// æ­¥éª¤1ï¼šæ‰¹é‡ä¸Šä¼ åˆ°OSS
const files = [photo1, photo2, photo3]; // ç”¨æˆ·é€‰æ‹©çš„3å¼ ç…§ç‰‡
const formData = new FormData();
files.forEach(file => formData.append('files', file));
formData.append('category', 'album');

const ossResponse = await fetch('/api/oss/upload/batch', {
  method: 'POST',
  headers: { 'Authorization': `Bearer ${token}` },
  body: formData
});

const { data } = await ossResponse.json();
const urls = data.urls;
// å¾—åˆ°ï¼š["url1", "url2", "url3"]

// æ­¥éª¤2ï¼šé€ä¸ªä¿å­˜åˆ°ä¸šåŠ¡ç³»ç»Ÿ
for (const url of urls) {
  await fetch('/api/media/save', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      imageUrl: url,
      mediaType: 'album',
      isPrimary: false  // ç›¸å†Œç…§ç‰‡ä¸è®¾ä¸»å›¾
    })
  });
}

// å®Œæˆï¼ç›¸å†Œå·²æ·»åŠ 3å¼ æ–°ç…§ç‰‡
```

#### åœºæ™¯3ï¼šç¼–è¾‘ç›¸å†Œç…§ç‰‡ï¼ˆæ›¿æ¢ï¼‰

```javascript
// åœºæ™¯ï¼šç”¨æˆ·æƒ³æ›¿æ¢ç›¸å†Œä¸­çš„ç¬¬2å¼ ç…§ç‰‡

// æ­¥éª¤1ï¼šè·å–å½“å‰ç›¸å†Œåˆ—è¡¨ï¼Œæ‰¾åˆ°è¦æ›¿æ¢çš„ç…§ç‰‡ID
const listResponse = await fetch('/api/media/list?mediaType=album', {
  headers: { 'Authorization': `Bearer ${token}` }
});
const { data } = await listResponse.json();
const photoToReplace = data[1]; // ç¬¬2å¼ ç…§ç‰‡
const mediaId = photoToReplace.id; // ä¾‹å¦‚ï¼š12345

// æ­¥éª¤2ï¼šä¸Šä¼ æ–°å›¾ç‰‡åˆ°OSS
const formData = new FormData();
formData.append('file', newPhotoFile);
formData.append('category', 'album');

const ossResponse = await fetch('/api/oss/upload', {
  method: 'POST',
  headers: { 'Authorization': `Bearer ${token}` },
  body: formData
});

const { data: ossData } = await ossResponse.json();
const imageUrl = ossData.imageUrl;

// æ­¥éª¤3ï¼šæ›´æ–°ä¸šåŠ¡ç³»ç»Ÿä¸­çš„ç…§ç‰‡
await fetch(`/api/media/${mediaId}/update`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    imageUrl: imageUrl  // æ–°çš„URL
  })
});

// å®Œæˆï¼ç›¸å†Œç¬¬2å¼ ç…§ç‰‡å·²æ›¿æ¢
```

---

### æ¥å£å¯¹åº”å…³ç³»

| æ­¥éª¤ | æ¥å£ç±»å‹ | æ¥å£è·¯å¾„ | è¯´æ˜ |
|------|---------|---------|------|
| 1ï¸âƒ£ OSSä¸Šä¼  | POST | `/api/oss/upload` | ä¸Šä¼ å•å¼ å›¾ç‰‡åˆ°OSS |
| 1ï¸âƒ£ OSSä¸Šä¼  | POST | `/api/oss/upload/base64` | Base64æ–¹å¼ä¸Šä¼ åˆ°OSS |
| 1ï¸âƒ£ OSSä¸Šä¼  | POST | `/api/oss/upload/batch` | æ‰¹é‡ä¸Šä¼ åˆ°OSS |
| 2ï¸âƒ£ ä¸šåŠ¡ä¿å­˜ | POST | `/api/media/save` | ä¿å­˜å›¾ç‰‡åˆ°ä¸šåŠ¡ï¼ˆæ–°å¢/æ›¿æ¢ï¼‰ |
| 2ï¸âƒ£ ä¸šåŠ¡æ›´æ–° | POST | `/api/media/{id}/update` | æ›´æ–°å·²æœ‰å›¾ç‰‡ |
| 2ï¸âƒ£ ä¸šåŠ¡åˆ é™¤ | DELETE | `/api/media/{id}` | åˆ é™¤å›¾ç‰‡ |
| 2ï¸âƒ£ ä¸šåŠ¡æŸ¥è¯¢ | GET | `/api/media/list` | è·å–å›¾ç‰‡åˆ—è¡¨ |

---

### å¸¸è§é—®é¢˜ FAQ

**Q1ï¼šèƒ½ä¸èƒ½ç›´æ¥ä¸Šä¼ åˆ°ä¸šåŠ¡ç³»ç»Ÿï¼Œä¸ç”¨OSSï¼Ÿ**  
Aï¼šä¸å¯ä»¥ã€‚æ‰€æœ‰å›¾ç‰‡å¿…é¡»å…ˆä¸Šä¼ åˆ°OSSï¼Œä¸šåŠ¡ç³»ç»Ÿåªä¿å­˜URLå¼•ç”¨ã€‚

**Q2ï¼šä¸Šä¼ åˆ°OSSåï¼Œå¯ä»¥ä¸è°ƒç”¨ä¸šåŠ¡ä¿å­˜æ¥å£å—ï¼Ÿ**  
Aï¼šå¯ä»¥ã€‚æ¯”å¦‚ç”¨æˆ·åœ¨ç¼–è¾‘æ—¶é¢„è§ˆå›¾ç‰‡ï¼Œä½†æœ€ç»ˆå–æ¶ˆäº†ï¼Œæ­¤æ—¶åªä¼šåœ¨OSSç•™ä¸‹ä¸€å¼ æœªä½¿ç”¨çš„å›¾ç‰‡ã€‚

**Q3ï¼šå¤´åƒ/èƒŒæ™¯å¢™ä¸ºä»€ä¹ˆä¸éœ€è¦å…ˆåˆ é™¤ï¼Ÿ**  
Aï¼šç³»ç»Ÿä¼šè‡ªåŠ¨åˆ¤æ–­ã€‚é¦–æ¬¡ä¸Šä¼ åˆ›å»ºæ–°è®°å½•ï¼Œå†æ¬¡ä¸Šä¼ è‡ªåŠ¨æ›´æ–°ç°æœ‰è®°å½•ï¼ŒmediaIdä¸å˜ã€‚

**Q4ï¼šç›¸å†Œç…§ç‰‡èƒ½ç›´æ¥æ›¿æ¢å—ï¼Ÿ**  
Aï¼šä¸èƒ½é€šè¿‡ä¿å­˜æ¥å£ç›´æ¥æ›¿æ¢ã€‚éœ€è¦ï¼š
- æ–¹æ¡ˆ1ï¼šè·å–åˆ—è¡¨æ‰¾åˆ°mediaIdï¼Œè°ƒç”¨æ›´æ–°æ¥å£
- æ–¹æ¡ˆ2ï¼šåˆ é™¤æ—§çš„ï¼Œä¸Šä¼ æ–°çš„

**Q5ï¼šä¸Šä¼ å¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ**  
Aï¼š
- OSSä¸Šä¼ å¤±è´¥ï¼šæ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆâ‰¤10MBï¼‰ã€æ ¼å¼ï¼ˆjpg/png/gifï¼‰ã€ç½‘ç»œ
- ä¸šåŠ¡ä¿å­˜å¤±è´¥ï¼šæ£€æŸ¥æ˜¯å¦è¶…è¿‡æ•°é‡é™åˆ¶ã€å®¡æ ¸çŠ¶æ€ã€Tokenæ˜¯å¦æœ‰æ•ˆ

**Q6ï¼šå›¾ç‰‡URLä¼šè¿‡æœŸå—ï¼Ÿ**  
Aï¼šä¸ä¼šã€‚OSS bucketè®¾ç½®ä¸ºå…¬å…±è¯»ï¼ŒURLæ°¸ä¹…æœ‰æ•ˆã€‚

**Q7ï¼šä¸ºä»€ä¹ˆå¤´åƒ/ç›¸å†Œè¦åˆ†ä¸¤æ¬¡è°ƒç”¨ï¼Ÿ**  
Aï¼šèŒè´£åˆ†ç¦»ã€‚OSSè´Ÿè´£æ–‡ä»¶å­˜å‚¨ï¼Œä¸šåŠ¡ç³»ç»Ÿè´Ÿè´£æƒé™ã€é™åˆ¶ã€å®¡æ ¸ç­‰é€»è¾‘ã€‚

---

## æ¥å£ç›®å½•

### è®¤è¯ç›¸å…³
1. [å¾®ä¿¡ç™»å½•](#1-å¾®ä¿¡ç™»å½•)
2. [ç”Ÿæˆæµ‹è¯•Token](#2-ç”Ÿæˆæµ‹è¯•tokenä»…å¼€å‘ç¯å¢ƒ)
3. [æ ¡éªŒToken](#3-æ ¡éªŒtoken)

### ç”¨æˆ·èµ„æ–™
4. [å®Œå–„èµ„æ–™](#4-å®Œå–„èµ„æ–™)
5. [æ›´æ–°èµ„æ–™](#5-æ›´æ–°èµ„æ–™)
6. [æŸ¥çœ‹æˆ‘çš„èµ„æ–™](#6-æŸ¥çœ‹æˆ‘çš„èµ„æ–™)
7. [æŸ¥çœ‹ä»–äººèµ„æ–™](#7-æŸ¥çœ‹ä»–äººèµ„æ–™)
8. [æŸ¥çœ‹èµ„æ–™å®Œå–„çŠ¶æ€](#8-æŸ¥çœ‹èµ„æ–™å®Œå–„çŠ¶æ€)
9. [è·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ®](#9-è·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ®)

### å®åè®¤è¯
10. [æäº¤å®åè®¤è¯](#10-æäº¤å®åè®¤è¯)
11. [æŸ¥è¯¢å®åè®¤è¯çŠ¶æ€](#11-æŸ¥è¯¢å®åè®¤è¯çŠ¶æ€)

### ~~ç›¸å†Œç®¡ç†~~ âŒ å·²åºŸå¼ƒ
~~12. [ä¸Šä¼ ç…§ç‰‡](#12-ä¸Šä¼ ç…§ç‰‡)~~ - å·²åºŸå¼ƒï¼Œè¯·ä½¿ç”¨ç»Ÿä¸€å›¾ç‰‡ç®¡ç†æ¥å£  
~~13. [åˆ é™¤ç…§ç‰‡](#13-åˆ é™¤ç…§ç‰‡)~~ - å·²åºŸå¼ƒï¼Œè¯·ä½¿ç”¨ç»Ÿä¸€å›¾ç‰‡ç®¡ç†æ¥å£  
~~14. [è®¾ç½®å°é¢ç…§ç‰‡](#14-è®¾ç½®å°é¢ç…§ç‰‡)~~ - å·²åºŸå¼ƒï¼Œè¯·ä½¿ç”¨ç»Ÿä¸€å›¾ç‰‡ç®¡ç†æ¥å£

### å›¾ç‰‡ç®¡ç†ï¼ˆç»Ÿä¸€ï¼‰âœ¨ æ–°æ¥å£
12. [ä¿å­˜å›¾ç‰‡åˆ°ä¸šåŠ¡æ¨¡å—](#12-ä¿å­˜å›¾ç‰‡åˆ°ä¸šåŠ¡æ¨¡å—)
13. [è·å–å›¾ç‰‡åˆ—è¡¨](#13-è·å–å›¾ç‰‡åˆ—è¡¨)
14. [åˆ é™¤å›¾ç‰‡](#14-åˆ é™¤å›¾ç‰‡)
15. [è®¾ç½®ä¸»å›¾ç‰‡](#15-è®¾ç½®ä¸»å›¾ç‰‡)
16. [æ›´æ–°å›¾ç‰‡](#16-æ›´æ–°å›¾ç‰‡)
17. [æ ¹æ®ä¸šåŠ¡ç±»å‹è·å–å›¾ç‰‡](#17-æ ¹æ®ä¸šåŠ¡ç±»å‹è·å–å›¾ç‰‡)
18. [æ‰¹é‡åˆ é™¤å›¾ç‰‡](#18-æ‰¹é‡åˆ é™¤å›¾ç‰‡) âœ¨ æ–°å¢
19. [æ¢å¤å›¾ç‰‡](#19-æ¢å¤å›¾ç‰‡) âœ¨ æ–°å¢

### æ ‡ç­¾ç®¡ç†
20. [è·å–æ ‡ç­¾åº“](#20-è·å–æ ‡ç­¾åº“)
21. [è®¾ç½®æˆ‘çš„æ ‡ç­¾](#21-è®¾ç½®æˆ‘çš„æ ‡ç­¾)

### éšç§è®¾ç½®
22. [æ›´æ–°éšç§è®¾ç½®](#22-æ›´æ–°éšç§è®¾ç½®)
23. [è·å–éšç§è®¾ç½®](#23-è·å–éšç§è®¾ç½®)

### é»‘åå•ç®¡ç†
24. [æ‹‰é»‘ç”¨æˆ·](#24-æ‹‰é»‘ç”¨æˆ·)
25. [ç§»é™¤é»‘åå•](#25-ç§»é™¤é»‘åå•)

### åŒ¹é…åå¥½
26. [è®¾ç½®åŒ¹é…åå¥½](#26-è®¾ç½®åŒ¹é…åå¥½)
27. [è·å–åŒ¹é…åå¥½](#27-è·å–åŒ¹é…åå¥½)

### æ™ºèƒ½åŒ¹é…ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
28. [è·å–æ¨èç”¨æˆ·åˆ—è¡¨](#28-è·å–æ¨èç”¨æˆ·åˆ—è¡¨)
29. [å–œæ¬¢æ“ä½œ](#29-å–œæ¬¢æ“ä½œ)
30. [è¶…çº§å–œæ¬¢æ“ä½œ](#30-è¶…çº§å–œæ¬¢æ“ä½œ)
31. [è·³è¿‡æ“ä½œ](#31-è·³è¿‡æ“ä½œ)
32. [æŸ¥çœ‹è°å–œæ¬¢æˆ‘](#32-æŸ¥çœ‹è°å–œæ¬¢æˆ‘)
33. [è·å–åŒ¹é…é™åˆ¶ä¿¡æ¯](#33-è·å–åŒ¹é…é™åˆ¶ä¿¡æ¯)

### OSSå›¾ç‰‡ä¸Šä¼ 
34. [ä¸Šä¼ å›¾ç‰‡ï¼ˆæ–‡ä»¶æ–¹å¼ï¼‰](#34-ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶æ–¹å¼)
35. [ä¸Šä¼ å›¾ç‰‡ï¼ˆBase64æ–¹å¼ï¼‰](#35-ä¸Šä¼ å›¾ç‰‡base64æ–¹å¼)
36. [æ‰¹é‡ä¸Šä¼ å›¾ç‰‡](#36-æ‰¹é‡ä¸Šä¼ å›¾ç‰‡)
37. [åˆ é™¤OSSå›¾ç‰‡](#37-åˆ é™¤osså›¾ç‰‡)
38. [è·å–å›¾ç‰‡ç­¾åURL](#38-è·å–å›¾ç‰‡ç­¾åurl)

---

## 1. å¾®ä¿¡ç™»å½•

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/auth/wx/login`
- **æ¥å£è¯´æ˜**ï¼šå¾®ä¿¡å°ç¨‹åºç™»å½•ï¼Œè¿”å›ç”¨æˆ·ä¿¡æ¯å’ŒçŠ¶æ€æ ‡è¯†
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šå¦

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| code | String | æ˜¯ | å¾®ä¿¡ç™»å½•code |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/auth/wx/login \
  -H "Content-Type: application/json" \
  -d "{\"code\": \"test_code_12345\"}"
```

**è¯·æ±‚Body**ï¼š
```json
{
  "code": "test_code_12345"
}
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjEwMDF9...",
    "userId": "U1699123456789AB12CD",
    "isNewUser": false,
    "nickname": "æµ‹è¯•ç”¨æˆ·",
    "avatar": "https://example.com/avatar.jpg",
    "vipLevel": 0,
    "profileComplete": 0,
    "matchPreferenceSet": 0
  }
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| token | String | JWTè®¿é—®ä»¤ç‰Œï¼ˆå†…éƒ¨åŒ…å«æ•°æ®åº“IDç”¨äºè®¤è¯ï¼‰ |
| userId | String | ä¸šåŠ¡ç”¨æˆ·IDï¼ˆç”¨äºå¯¹å¤–å±•ç¤ºï¼Œæ ¼å¼ï¼šU + æ—¶é—´æˆ³ + éšæœºæ•°ï¼‰ |
| isNewUser | Boolean | æ˜¯å¦æ–°ç”¨æˆ· |
| nickname | String | ç”¨æˆ·æ˜µç§° |
| avatar | String | ç”¨æˆ·å¤´åƒ |
| vipLevel | Integer | ä¼šå‘˜ç­‰çº§ï¼ˆ0-æ™®é€šï¼Œ1-VIPï¼Œ2-SVIPï¼‰ |
| **profileComplete** | **Integer** | **èµ„æ–™æ˜¯å¦å®Œå–„ï¼ˆ0-å¦ï¼Œ1-æ˜¯ï¼‰** |
| **matchPreferenceSet** | **Integer** | **åŒ¹é…åå¥½æ˜¯å¦è®¾ç½®ï¼ˆ0-æœªè®¾ç½®ï¼Œ1-å·²è®¾ç½®ï¼‰** |

### ä¸šåŠ¡è¯´æ˜

ç™»å½•åæ ¹æ®ä¸¤ä¸ªæ ‡å¿—ä½å¼•å¯¼ç”¨æˆ·ï¼š

1. **profileComplete = 0**ï¼šå¼•å¯¼ç”¨æˆ·å®Œå–„èµ„æ–™
2. **profileComplete = 1 ä¸” matchPreferenceSet = 0**ï¼šå¼•å¯¼ç”¨æˆ·è®¾ç½®åŒ¹é…åå¥½
3. **ä¸¤è€…éƒ½ä¸º1**ï¼šè¿›å…¥ä¸»é¡µï¼Œå¼€å§‹åŒ¹é…

---

## 2. ç”Ÿæˆæµ‹è¯•Tokenï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/test/generate-token`
- **æ¥å£è¯´æ˜**ï¼šç”Ÿæˆæµ‹è¯•ç”¨çš„JWT Tokenï¼Œæ— éœ€å¾®ä¿¡ç™»å½•ï¼ˆä»…åœ¨devå’Œuatç¯å¢ƒå¯ç”¨ï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šå¦

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| businessUserId | String | å¦ | ä¸šåŠ¡ç”¨æˆ·IDï¼ˆé»˜è®¤U1234567890123TESTï¼‰ |
| vipLevel | Integer | å¦ | ä¼šå‘˜ç­‰çº§ï¼ˆé»˜è®¤0ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST "http://localhost:8080/api/test/generate-token?businessUserId=U1699123456789AB12CD&vipLevel=0"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æµ‹è¯•Tokenç”ŸæˆæˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiJ9...",
    "userId": "U1699123456789AB12CD",
    "openid": "test_openid_U1699123456789AB12CD",
    "vipLevel": 0,
    "expiresIn": 604800,
    "authHeader": "Bearer eyJhbGciOiJIUzI1NiJ9..."
  }
}
```

### ä¸šåŠ¡è¯´æ˜

1. **ä»…ç”¨äºå¼€å‘æµ‹è¯•**ï¼šç”Ÿäº§ç¯å¢ƒä¸å¯ç”¨
2. **Tokenæœ‰æ•ˆæœŸ**ï¼š7å¤©
3. **è‡ªåŠ¨å­˜å…¥Redis**ï¼šæ¨¡æ‹Ÿç™»å½•çŠ¶æ€

---

## 3. æ ¡éªŒToken

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/auth/token/validate`
- **æ¥å£è¯´æ˜**ï¼šæ ¡éªŒJWT Tokençš„æœ‰æ•ˆæ€§ï¼Œè¿”å›Tokenç›¸å…³ä¿¡æ¯
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šå¦ï¼ˆä½†éœ€è¦æä¾›Tokenï¼‰

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/auth/token/validate \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**Tokenæœ‰æ•ˆ**ï¼š
```json
{
  "code": 200,
  "message": "Tokenæœ‰æ•ˆ",
  "data": {
    "valid": true,
    "userId": "U1699123456789AB12CD",
    "openid": "oAB***xyz",
    "vipLevel": 0,
    "expireTime": 1730000000000
  }
}
```

**Tokenæ— æ•ˆ**ï¼š
```json
{
  "code": 401,
  "message": "Tokenå·²å¤±æ•ˆæˆ–ç”¨æˆ·å·²ç™»å‡º",
  "data": {
    "valid": false,
    "userId": null,
    "openid": null,
    "vipLevel": null,
    "expireTime": null,
    "reason": "Tokenå·²å¤±æ•ˆæˆ–ç”¨æˆ·å·²ç™»å‡º"
  }
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| valid | Boolean | Tokenæ˜¯å¦æœ‰æ•ˆ |
| userId | String | ç”¨æˆ·IDï¼ˆä¸šåŠ¡ç”¨æˆ·IDï¼‰ |
| openid | String | å¾®ä¿¡OpenIDï¼ˆè„±æ•æ˜¾ç¤ºï¼‰ |
| vipLevel | Integer | ä¼šå‘˜ç­‰çº§ï¼ˆ0-æ™®é€šï¼Œ1-VIPï¼Œ2-SVIPï¼‰ |
| expireTime | Long | Tokenè¿‡æœŸæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ |
| reason | String | å¤±è´¥åŸå› ï¼ˆä»…åœ¨valid=falseæ—¶æœ‰å€¼ï¼‰ |

### ä¸šåŠ¡è¯´æ˜

1. **å¤šé‡éªŒè¯**ï¼š
   - JWTç­¾åéªŒè¯
   - Tokenè¿‡æœŸæ—¶é—´éªŒè¯
   - Redisç¼“å­˜éªŒè¯ï¼ˆé˜²æ­¢tokenè¢«ç™»å‡ºåä»ç„¶ä½¿ç”¨ï¼‰
   - ç”¨æˆ·çŠ¶æ€éªŒè¯ï¼ˆç”¨æˆ·æ˜¯å¦å­˜åœ¨ã€æ˜¯å¦è¢«å°ç¦ï¼‰

2. **å¤±è´¥åŸå› **ï¼š
   - "Tokenæ— æ•ˆæˆ–å·²è¿‡æœŸ"ï¼šJWTç­¾åé”™è¯¯æˆ–å·²è¿‡æœŸ
   - "Tokenå·²å¤±æ•ˆæˆ–ç”¨æˆ·å·²ç™»å‡º"ï¼šç”¨æˆ·å·²ä¸»åŠ¨ç™»å‡º
   - "ç”¨æˆ·ä¸å­˜åœ¨"ï¼šç”¨æˆ·å·²è¢«åˆ é™¤
   - "ç”¨æˆ·å·²è¢«å°ç¦"ï¼šç”¨æˆ·è´¦å·è¢«å°ç¦

3. **å®‰å…¨æ€§**ï¼š
   - openidè¿›è¡Œè„±æ•æ˜¾ç¤º
   - ä¸ä¼šæš´éœ²æ•æ„Ÿä¿¡æ¯

---

## 4. å®Œå–„èµ„æ–™

**è¯´æ˜**ï¼šæ­¤æ¥å£ç”¨äº**é¦–æ¬¡å®Œå–„èµ„æ–™**æˆ–åç»­æ›´æ–°èµ„æ–™ï¼Œæ”¯æŒä¸€æ¬¡æ€§æäº¤æ‰€æœ‰å­—æ®µã€‚

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/user/profile`
- **æ¥å£è¯´æ˜**ï¼šå®Œå–„æˆ–æ›´æ–°ç”¨æˆ·èµ„æ–™ï¼ˆæ”¯æŒä¸€æ¬¡æ€§æäº¤æ‰€æœ‰å¿…å¡«å­—æ®µï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚å‚æ•°

#### å¿…å¡«å­—æ®µï¼ˆå®Œå–„èµ„æ–™æ—¶å¿…é¡»æä¾›ï¼‰

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| nickname | String | æ˜¯ | æ˜µç§°ï¼ˆæœ€å¤š50å­—ï¼‰ |
| avatar | String | æ˜¯ | å¤´åƒURLï¼ˆæœ€å¤š255å­—ï¼‰ |
| gender | Integer | æ˜¯ | æ€§åˆ«ï¼ˆ0-æœªçŸ¥ï¼Œ1-ç”·ï¼Œ2-å¥³ï¼‰ |
| age | Integer | æ˜¯ | å¹´é¾„ï¼ˆèŒƒå›´0-100ï¼Œç”¨æˆ·åªèƒ½è®¾ç½®ä¸€æ¬¡ï¼‰ |
| tagIds | Array | æ˜¯ | å…´è¶£æ ‡ç­¾IDåˆ—è¡¨ï¼ˆæœ€å¤š10ä¸ªï¼‰ |

#### å¯é€‰å­—æ®µï¼ˆç¼–è¾‘èµ„æ–™æ—¶å¯è¡¥å……ï¼‰

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| birthday | String | å¦ | ç”Ÿæ—¥ï¼ˆæ ¼å¼ï¼šYYYY-MM-DDï¼‰ |
| height | Integer | å¦ | èº«é«˜ï¼ˆcmï¼ŒèŒƒå›´100-250ï¼‰ |
| weight | Integer | å¦ | ä½“é‡ï¼ˆkgï¼ŒèŒƒå›´30-200ï¼‰ |
| occupation | String | å¦ | èŒä¸šï¼ˆæœ€å¤š50å­—ï¼‰ |
| education | String | å¦ | å­¦å†ï¼ˆæœ€å¤š20å­—ï¼‰ |
| income | String | å¦ | æ”¶å…¥ï¼ˆæœ€å¤š20å­—ï¼‰ |
| hometown | String | å¦ | å®¶ä¹¡ï¼ˆæœ€å¤š50å­—ï¼‰ |
| currentCity | String | å¦ | ç°å±…åŸå¸‚ï¼ˆæœ€å¤š50å­—ï¼‰ |
| bio | String | å¦ | ä¸ªäººç®€ä»‹ï¼ˆæœ€å¤š200å­—ï¼‰ |
| maritalStatus | String | å¦ | å©šå§»çŠ¶å†µï¼ˆæœ€å¤š20å­—ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/user/profile \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "nickname": "æµ‹è¯•ç”¨æˆ·å°é›¨",
    "avatar": "https://example.com/avatar.jpg",
    "gender": 2,
    "birthday": "1998-05-20",
    "age": 25,
    "tagIds": [1, 5, 8],
    "height": 165,
    "occupation": "UIè®¾è®¡å¸ˆ",
    "education": "æœ¬ç§‘",
    "currentCity": "åŒ—äº¬å¸‚æœé˜³åŒº",
    "bio": "çƒ­çˆ±ç”Ÿæ´»ï¼Œå–œæ¬¢æ‘„å½±å’Œæ—…è¡Œã€‚"
  }'
```

**è¯·æ±‚Body**ï¼š
```json
{
  "nickname": "æµ‹è¯•ç”¨æˆ·å°é›¨",
  "avatar": "https://example.com/avatar.jpg",
  "gender": 2,
  "birthday": "1998-05-20",
  "age": 25,
  "tagIds": [1, 5, 8],
  "height": 165,
  "occupation": "UIè®¾è®¡å¸ˆ",
  "education": "æœ¬ç§‘",
  "currentCity": "åŒ—äº¬å¸‚æœé˜³åŒº",
  "bio": "çƒ­çˆ±ç”Ÿæ´»ï¼Œå–œæ¬¢æ‘„å½±å’Œæ—…è¡Œã€‚å¸Œæœ›èƒ½æ‰¾åˆ°å¿—åŒé“åˆçš„æœ‹å‹ã€‚"
}
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "èµ„æ–™ä¿å­˜æˆåŠŸ",
  "data": true
}
```

### ä¸šåŠ¡è¯´æ˜

1. **è‡ªåŠ¨æ›´æ–°WxUserè¡¨**ï¼šæ˜µç§°ã€å¤´åƒã€æ€§åˆ«ã€å¹´é¾„ã€ç”Ÿæ—¥ï¼ˆå¯é€‰ï¼‰
2. **è‡ªåŠ¨è®¾ç½®æ ‡ç­¾**ï¼šä¿å­˜åˆ°`t_user_tag`è¡¨
3. **è‡ªåŠ¨æ£€æŸ¥å®Œå–„çŠ¶æ€**ï¼šå¦‚æœ5ä¸ªå¿…å¡«å­—æ®µï¼ˆæ˜µç§°ã€å¤´åƒã€æ€§åˆ«ã€å¹´é¾„ã€æ ‡ç­¾ï¼‰éƒ½å¡«å†™ï¼Œè‡ªåŠ¨æ›´æ–°`profile_complete=1`
4. **æ€§åˆ«ä¸º0ï¼ˆæœªçŸ¥ï¼‰ä¸ç®—å®Œå–„**ï¼šå¿…é¡»é€‰æ‹©1æˆ–2

---

## 5. æ›´æ–°èµ„æ–™

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/user/profile/update`
- **æ¥å£è¯´æ˜**ï¼šæ›´æ–°ç”¨æˆ·èµ„æ–™ï¼ˆä¸å®Œå–„èµ„æ–™ä½¿ç”¨åŒä¸€ä¸ªserviceæ–¹æ³•ï¼Œå‚æ•°ç›¸åŒï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚å‚æ•°

å‚æ•°ä¸"å®Œå–„èµ„æ–™"æ¥å£å®Œå…¨ç›¸åŒï¼Œæ”¯æŒéƒ¨åˆ†æ›´æ–°ã€‚

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/user/profile/update \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "bio": "æ›´æ–°åçš„ä¸ªäººç®€ä»‹",
    "currentCity": "æ·±åœ³å¸‚å—å±±åŒº"
  }'
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "èµ„æ–™æ›´æ–°æˆåŠŸ",
  "data": true
}
```

---

## 6. æŸ¥çœ‹æˆ‘çš„èµ„æ–™

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/user/profile`
- **æ¥å£è¯´æ˜**ï¼šæŸ¥çœ‹å½“å‰ç™»å½•ç”¨æˆ·çš„å®Œæ•´èµ„æ–™
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET http://localhost:8080/api/user/profile \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "userId": "U1699123456789AB12CD",
    "nickname": "æµ‹è¯•ç”¨æˆ·å°é›¨",
    "avatar": "https://example.com/avatar.jpg",
    "gender": 2,
    "age": 27,
    "height": 165,
    "occupation": "UIè®¾è®¡å¸ˆ",
    "education": "æœ¬ç§‘",
    "income": null,
    "hometown": null,
    "currentCity": "åŒ—äº¬å¸‚æœé˜³åŒº",
    "bio": "çƒ­çˆ±ç”Ÿæ´»ï¼Œå–œæ¬¢æ‘„å½±å’Œæ—…è¡Œã€‚",
    "voiceIntroUrl": null,
    "isVerified": 0,
    "verifyStatus": 0,
    "photos": [],
    "tags": [
      {
        "tagId": 1,
        "tagName": "æ—…æ¸¸",
        "icon": "ğŸ–ï¸"
      },
      {
        "tagId": 5,
        "tagName": "ç”µå½±",
        "icon": "ğŸ¬"
      },
      {
        "tagId": 8,
        "tagName": "è¯»ä¹¦",
        "icon": "ğŸ“š"
      }
    ],
    "profileComplete": 1,
    "onlineStatus": 1,
    "lastLoginTime": "2025-11-01T21:15:00",
    "createdAt": "2025-10-28T10:00:00",
    "updatedAt": "2025-11-01T21:15:30"
  }
}
```

---

## 7. æŸ¥çœ‹ä»–äººèµ„æ–™

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/user/profile/{userId}`
- **æ¥å£è¯´æ˜**ï¼šæŸ¥çœ‹å…¶ä»–ç”¨æˆ·çš„èµ„æ–™ï¼ˆä¼šæ ¹æ®éšç§è®¾ç½®è¿‡æ»¤éƒ¨åˆ†ä¿¡æ¯ï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | String | æ˜¯ | è¦æŸ¥çœ‹çš„ç”¨æˆ·IDï¼ˆä¸šåŠ¡ç”¨æˆ·IDï¼Œå¦‚ï¼šU1699123456789AB12CDï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET http://localhost:8080/api/user/profile/U1699234567890CD34EF \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "userId": "U1699234567890CD34EF",
    "nickname": "æå››",
    "avatar": "https://example.com/avatar2.jpg",
    "gender": 1,
    "age": 28,
    "height": 180,
    "occupation": "äº§å“ç»ç†",
    "education": "ç¡•å£«",
    "currentCity": "åŒ—äº¬å¸‚æµ·æ·€åŒº",
    "bio": "å–œæ¬¢è¿åŠ¨å’Œè¯»ä¹¦",
    "isVerified": 1,
    "vipLevel": 1,
    "photos": [
      {
        "id": 1,
        "photoUrl": "https://example.com/photo1.jpg",
        "isCover": 1,
        "auditStatus": 1,
        "sortOrder": 0
      }
    ],
    "tags": [
      {
        "id": 2,
        "tagName": "å¥èº«",
        "category": "è¿åŠ¨",
        "icon": "icon-fitness"
      }
    ],
    "onlineStatus": 1,
    "lastLoginTime": "2025-11-01T20:00:00"
  }
}
```

### ä¸šåŠ¡è¯´æ˜

1. **éšç§è¿‡æ»¤**ï¼šæ ¹æ®è¢«æŸ¥çœ‹ç”¨æˆ·çš„éšç§è®¾ç½®ï¼ŒæŸäº›ä¿¡æ¯å¯èƒ½ä¸å¯è§
2. **é»‘åå•åˆ¤æ–­**ï¼šå¦‚æœåœ¨å¯¹æ–¹é»‘åå•ä¸­ï¼Œå¯èƒ½è¿”å›å—é™ä¿¡æ¯
3. **è·ç¦»æ˜¾ç¤º**ï¼šæ ¹æ®å¯¹æ–¹çš„éšç§è®¾ç½®å†³å®šæ˜¯å¦æ˜¾ç¤ºè·ç¦»

---

## 8. æŸ¥çœ‹èµ„æ–™å®Œå–„çŠ¶æ€

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/user/profile/status`
- **æ¥å£è¯´æ˜**ï¼šæŸ¥çœ‹å½“å‰ç”¨æˆ·çš„èµ„æ–™å®Œå–„çŠ¶æ€å’Œç¼ºå¤±å­—æ®µ
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET http://localhost:8080/api/user/profile/status \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**èµ„æ–™æœªå®Œå–„æ—¶**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "profileComplete": false,
    "completionRate": 60,
    "completedFields": 3,
    "totalFields": 5,
    "missingFields": [
      "æ€§åˆ«",
      "å…´è¶£æ ‡ç­¾"
    ],
    "suggestions": [
      "è®¾ç½®æ‚¨çš„æ€§åˆ«ä¿¡æ¯",
      "é€‰æ‹©è‡³å°‘1ä¸ªå…´è¶£æ ‡ç­¾ï¼Œè®©åˆ«äººæ›´äº†è§£ä½ ",
      "ğŸ’¡ å»ºè®®ï¼šç»‘å®šæ‰‹æœºå·æé«˜ä¿¡ä»»åº¦",
      "ğŸ’¡ å»ºè®®ï¼šå¡«å†™èº«é«˜ä¿¡æ¯"
    ]
  }
}
```

**èµ„æ–™å·²å®Œå–„æ—¶**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "profileComplete": true,
    "completionRate": 100,
    "completedFields": 5,
    "totalFields": 5,
    "missingFields": [],
    "suggestions": [
      "ğŸ’¡ å»ºè®®ï¼šç»‘å®šæ‰‹æœºå·æé«˜ä¿¡ä»»åº¦",
      "ğŸ’¡ å»ºè®®ï¼šå¡«å†™èº«é«˜ä¿¡æ¯",
      "ğŸ’¡ å»ºè®®ï¼šå¡«å†™å­¦å†ä¿¡æ¯"
    ]
  }
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| profileComplete | Boolean | èµ„æ–™æ˜¯å¦å®Œå–„ |
| completionRate | Integer | å®Œå–„åº¦ç™¾åˆ†æ¯”ï¼ˆ0-100ï¼‰ |
| completedFields | Integer | å·²å®Œå–„çš„å¿…å¡«å­—æ®µæ•°é‡ |
| totalFields | Integer | æ€»å¿…å¡«å­—æ®µæ•°é‡ï¼ˆå›ºå®šä¸º5ï¼‰ |
| missingFields | Array | ç¼ºå¤±çš„å¿…å¡«å­—æ®µåˆ—è¡¨ |
| suggestions | Array | æ”¹è¿›å»ºè®®ï¼ˆåŒ…æ‹¬å¿…å¡«å’Œå¯é€‰å­—æ®µæç¤ºï¼‰ |

### å¿…å¡«å­—æ®µè¯´æ˜

1. æ˜µç§°
2. å¤´åƒ
3. æ€§åˆ«ï¼ˆ1æˆ–2ï¼Œ0ä¸ç®—å®Œå–„ï¼‰
4. å¹´é¾„
5. å…´è¶£æ ‡ç­¾ï¼ˆè‡³å°‘1ä¸ªï¼‰

---

## 9. è·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ®

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/user/stats`
- **æ¥å£è¯´æ˜**ï¼šè·å–ç”¨æˆ·çš„ç»Ÿè®¡æ•°æ®ï¼ˆå…³æ³¨ã€ç²‰ä¸ã€åŒ¹é…ç­‰ï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET http://localhost:8080/api/user/stats \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "followingCount": 0,
    "followersCount": 0,
    "buddyMatchCount": 0,
    "activityJoinCount": 0,
    "momentCount": 0,
    "likedMeCount": 0,
    "myFavoritesCount": 0
  }
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| followingCount | Integer | å…³æ³¨æ•°é‡ |
| followersCount | Integer | ç²‰ä¸æ•°é‡ |
| buddyMatchCount | Integer | æ­å­åŒ¹é…æ•°é‡ |
| activityJoinCount | Integer | æ´»åŠ¨å‚ä¸æ•°é‡ |
| momentCount | Integer | åŠ¨æ€æ•°é‡ |
| likedMeCount | Integer | å–œæ¬¢æˆ‘çš„äººæ•° |
| myFavoritesCount | Integer | æˆ‘æ”¶è—çš„äººæ•° |

**æ³¨æ„**ï¼šå½“å‰ç‰ˆæœ¬æš‚æ—¶è¿”å›0ï¼Œç­‰ç›¸å…³æ¨¡å—å¼€å‘å®Œæˆåä¼šè¿”å›çœŸå®æ•°æ®ã€‚

---

## 10. æäº¤å®åè®¤è¯

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/user/real-name-verify`
- **æ¥å£è¯´æ˜**ï¼šæäº¤å®åè®¤è¯ï¼Œç³»ç»Ÿè‡ªåŠ¨ä»èº«ä»½è¯å·æå–ç”Ÿæ—¥å¹¶æ›´æ–°çœŸå®å¹´é¾„
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| realName | String | æ˜¯ | çœŸå®å§“åï¼ˆ2-50ä¸ªå­—ç¬¦ï¼‰ |
| idCard | String | æ˜¯ | èº«ä»½è¯å·ï¼ˆ18ä½ï¼Œç¬¦åˆæ ¼å¼è§„åˆ™ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/user/real-name-verify \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "realName": "å¼ ä¸‰",
    "idCard": "110101199001011234"
  }'
```

**è¯·æ±‚Body**ï¼š
```json
{
  "realName": "å¼ ä¸‰",
  "idCard": "110101199001011234"
}
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å®åè®¤è¯æäº¤æˆåŠŸï¼Œå¹´é¾„å·²æ ¹æ®ç”Ÿæ—¥è‡ªåŠ¨æ›´æ–°",
  "data": true
}
```

**å¤±è´¥å“åº”**ï¼š
```json
{
  "code": 40001,
  "message": "æ‚¨å·²å®Œæˆå®åè®¤è¯ï¼Œæ— éœ€é‡å¤æäº¤",
  "data": null
}
```

### ä¸šåŠ¡è¯´æ˜

1. **è‡ªåŠ¨æå–ç”Ÿæ—¥**ï¼šä»èº«ä»½è¯å·ç¬¬7-14ä½æå–å‡ºç”Ÿæ—¥æœŸ
2. **è‡ªåŠ¨è®¡ç®—å¹´é¾„**ï¼šæ ¹æ®ç”Ÿæ—¥è®¡ç®—çœŸå®å¹´é¾„å¹¶æ›´æ–°
3. **é”å®šå¹´é¾„**ï¼šå®åè®¤è¯åï¼Œç”¨æˆ·æ— æ³•å†ä¿®æ”¹å¹´é¾„
4. **å¹´é¾„é™åˆ¶**ï¼šå¿…é¡»â‰¥18å²æ‰èƒ½ä½¿ç”¨æœåŠ¡
5. **é˜²é‡å¤è®¤è¯**ï¼šå·²è®¤è¯ç”¨æˆ·æ— æ³•é‡å¤æäº¤

### é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | é”™è¯¯ä¿¡æ¯ |
|--------|---------|
| 40001 | æ‚¨å·²å®Œæˆå®åè®¤è¯ï¼Œæ— éœ€é‡å¤æäº¤ |
| 40002 | èº«ä»½è¯å·æ ¼å¼ä¸æ­£ç¡® |
| 40002 | æœªæ»¡18å²ä¸èƒ½ä½¿ç”¨æœ¬æœåŠ¡ |
| 40002 | èº«ä»½è¯å‡ºç”Ÿæ—¥æœŸå¼‚å¸¸ |
| 40401 | ç”¨æˆ·ä¸å­˜åœ¨ |

---

## 11. æŸ¥è¯¢å®åè®¤è¯çŠ¶æ€

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/user/real-name-verify/status`
- **æ¥å£è¯´æ˜**ï¼šæŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å·²å®Œæˆå®åè®¤è¯
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET http://localhost:8080/api/user/real-name-verify/status \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "success",
  "data": true
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| data | Boolean | true-å·²è®¤è¯ï¼Œfalse-æœªè®¤è¯ |

---

## 12. ä¿å­˜å›¾ç‰‡åˆ°ä¸šåŠ¡æ¨¡å—

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/media/save`
- **æ¥å£è¯´æ˜**ï¼šç»Ÿä¸€çš„å›¾ç‰‡ä¿å­˜æ¥å£ï¼Œæ”¯æŒå¤´åƒã€ç›¸å†Œã€èƒŒæ™¯å¢™ã€åŠ¨æ€ã€æ´»åŠ¨ç­‰å¤šç§ä¸šåŠ¡ç±»å‹ã€‚**å¤´åƒå’ŒèƒŒæ™¯å¢™æ”¯æŒæ™ºèƒ½æ›¿æ¢ï¼ˆè‡ªåŠ¨è¦†ç›–æ—§å›¾ç‰‡ï¼‰**
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| imageUrl | String | æ˜¯ | å›¾ç‰‡URLï¼ˆé€šè¿‡OSSä¸Šä¼ æ¥å£è·å–ï¼Œæœ€å¤š500å­—ï¼‰ |
| mediaType | String | æ˜¯ | å›¾ç‰‡ç±»å‹ï¼šavatar-å¤´åƒã€album-ç›¸å†Œã€background-èƒŒæ™¯å¢™ã€moment-åŠ¨æ€ã€activity-æ´»åŠ¨ |
| isPrimary | Boolean | å¦ | æ˜¯å¦è®¾ä¸ºä¸»å›¾ç‰‡ï¼ˆå¤´åƒ/å°é¢/èƒŒæ™¯ï¼‰ï¼Œé»˜è®¤false |
| width | Integer | å¦ | å›¾ç‰‡å®½åº¦ï¼ˆåƒç´ ï¼‰ |
| height | Integer | å¦ | å›¾ç‰‡é«˜åº¦ï¼ˆåƒç´ ï¼‰ |
| fileSize | Long | å¦ | æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**ç¤ºä¾‹1ï¼šä¿å­˜ç›¸å†Œç…§ç‰‡**
```bash
curl -X POST http://localhost:8080/api/media/save \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "imageUrl": "https://your-bucket.oss-cn-hangzhou.aliyuncs.com/uploads/album/U1234.../20251106/abc123.jpg",
    "mediaType": "album",
    "isPrimary": false,
    "width": 1080,
    "height": 1920,
    "fileSize": 2048576
  }'
```

**ç¤ºä¾‹2ï¼šæ›´æ¢å¤´åƒï¼ˆæ™ºèƒ½æ›¿æ¢ï¼‰**
```bash
# åœºæ™¯ï¼šç”¨æˆ·é¦–æ¬¡ä¸Šä¼ å¤´åƒ æˆ– æ›´æ¢å¤´åƒ
# æ— è®ºæ˜¯ç¬¬1æ¬¡è¿˜æ˜¯ç¬¬Næ¬¡ä¸Šä¼ ï¼Œè°ƒç”¨æ–¹å¼å®Œå…¨ç›¸åŒ
curl -X POST http://localhost:8080/api/media/save \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "imageUrl": "https://your-bucket.oss-cn-hangzhou.aliyuncs.com/uploads/avatar/U1234.../new-avatar.jpg",
    "mediaType": "avatar",
    "isPrimary": true
  }'

# æ™ºèƒ½åˆ¤æ–­é€»è¾‘ï¼š
# - å¦‚æœç”¨æˆ·æ²¡æœ‰å¤´åƒ â†’ åˆ›å»ºæ–°è®°å½•ï¼ˆmediaId: 101ï¼‰
# - å¦‚æœç”¨æˆ·å·²æœ‰å¤´åƒ â†’ æ›´æ–°ç°æœ‰è®°å½•ï¼ˆmediaIdä»ä¸º101ï¼Œåªæ˜¯imageUrlæ”¹å˜ï¼‰
```

**ç¤ºä¾‹3ï¼šè®¾ç½®èƒŒæ™¯å¢™ï¼ˆæ™ºèƒ½æ›¿æ¢ï¼‰**
```bash
# ä¸å¤´åƒç›¸åŒï¼ŒèƒŒæ™¯å¢™ä¹Ÿæ”¯æŒæ™ºèƒ½æ›¿æ¢
curl -X POST http://localhost:8080/api/media/save \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "imageUrl": "https://your-bucket.oss-cn-hangzhou.aliyuncs.com/uploads/background/U1234.../new-bg.jpg",
    "mediaType": "background",
    "isPrimary": true
  }'
```

**ç¤ºä¾‹4ï¼šä¸Šä¼ ç›¸å†Œç…§ç‰‡ï¼ˆæ•°é‡é™åˆ¶ï¼‰**
```bash
# ç›¸å†Œç…§ç‰‡ä¼šæ£€æŸ¥æ•°é‡é™åˆ¶
curl -X POST http://localhost:8080/api/media/save \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "imageUrl": "https://your-bucket.oss-cn-hangzhou.aliyuncs.com/uploads/album/U1234.../photo1.jpg",
    "mediaType": "album",
    "isPrimary": false
  }'

# å¦‚æœè¶…è¿‡é™åˆ¶ä¼šè¿”å›ï¼š
# {"code": 40002, "message": "ç›¸å†Œæœ€å¤šä¸Šä¼ 9å¼ ï¼Œå½“å‰å·²æœ‰9å¼ ï¼Œå‡çº§VIPå¯ä¸Šä¼ 15å¼ "}
```

### å“åº”ç¤ºä¾‹

**ç¤ºä¾‹1ï¼šé¦–æ¬¡ä¸Šä¼ å¤´åƒï¼ˆåˆ›å»ºï¼‰**
```json
{
  "code": 200,
  "message": "å›¾ç‰‡ä¿å­˜æˆåŠŸ",
  "data": {
    "mediaId": 101,
    "imageUrl": "https://your-bucket.oss.../avatar.jpg",
    "mediaType": "avatar",
    "isPrimary": true,
    "currentCount": 1,
    "maxCount": 1
  },
  "traceId": "a1b2c3d4..."
}
```

**ç¤ºä¾‹2ï¼šå†æ¬¡ä¸Šä¼ å¤´åƒï¼ˆæ›´æ–°ï¼‰**
```json
{
  "code": 200,
  "message": "å›¾ç‰‡ä¿å­˜æˆåŠŸ",
  "data": {
    "mediaId": 101,  // âš ï¸ æ³¨æ„ï¼šmediaIdä¸å˜
    "imageUrl": "https://your-bucket.oss.../new-avatar.jpg",  // URLå·²æ›´æ–°
    "mediaType": "avatar",
    "isPrimary": true,
    "currentCount": 1,
    "maxCount": 1
  },
  "traceId": "a1b2c3d4..."
}
```

**ç¤ºä¾‹3ï¼šä¸Šä¼ ç›¸å†Œç…§ç‰‡ï¼ˆæ–°å¢ï¼‰**
```json
{
  "code": 200,
  "message": "å›¾ç‰‡ä¿å­˜æˆåŠŸ",
  "data": {
    "mediaId": 12345,  // æ¯æ¬¡ä¸Šä¼ éƒ½æ˜¯æ–°çš„ID
    "imageUrl": "https://your-bucket.oss.../album/photo3.jpg",
    "mediaType": "album",
    "isPrimary": false,
    "currentCount": 3,  // å½“å‰æœ‰3å¼ 
    "maxCount": 9       // æœ€å¤š9å¼ 
  },
  "traceId": "a1b2c3d4..."
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| mediaId | Long | å›¾ç‰‡ID |
| imageUrl | String | å›¾ç‰‡URL |
| mediaType | String | å›¾ç‰‡ç±»å‹ |
| isPrimary | Boolean | æ˜¯å¦ä¸ºä¸»å›¾ç‰‡ |
| currentCount | Integer | å½“å‰è¯¥ç±»å‹å›¾ç‰‡æ•°é‡ |
| maxCount | Integer | è¯¥ç±»å‹æœ€å¤§å…è®¸æ•°é‡ |

### ä¸šåŠ¡è¯´æ˜

#### å›¾ç‰‡ç±»å‹å’Œæ•°é‡é™åˆ¶

| ç±»å‹ | ä»£ç  | æ™®é€šç”¨æˆ· | VIPç”¨æˆ· | ä¸»å›¾ç‰‡ | å®¡æ ¸ |
|------|------|---------|---------|--------|------|
| å¤´åƒ | `avatar` | 1å¼  | 1å¼  | âœ… å§‹ç»ˆä¸ºä¸» | âœ… |
| ç›¸å†Œ | `album` | 9å¼  | 15å¼  | âœ… å¯è®¾å°é¢ | âœ… |
| èƒŒæ™¯å¢™ | `background` | 1å¼  | 1å¼  | âœ… å§‹ç»ˆä¸ºä¸» | âœ… |
| åŠ¨æ€ | `moment` | 9å¼ /æ¡ | 9å¼ /æ¡ | âŒ | âœ… |
| æ´»åŠ¨ | `activity` | 20å¼  | 20å¼  | âŒ | âœ… |

#### ç‰¹æ®Šè§„åˆ™

1. **æ™ºèƒ½æ›¿æ¢ï¼ˆå¤´åƒ/èƒŒæ™¯å¢™ï¼‰**ï¼š
   - é¦–æ¬¡ä¸Šä¼ ï¼šåˆ›å»ºæ–°è®°å½•
   - å†æ¬¡ä¸Šä¼ ï¼šè‡ªåŠ¨æ›´æ–°ç°æœ‰è®°å½•ï¼ˆ**æ— éœ€å…ˆåˆ é™¤**ï¼‰
   - mediaId ä¿æŒä¸å˜
   - ç”¨æˆ·æ— æ„ŸçŸ¥è‡ªåŠ¨æ›¿æ¢
   
2. **ç›¸å†Œ/åŠ¨æ€/æ´»åŠ¨**ï¼š
   - æ£€æŸ¥æ•°é‡é™åˆ¶ï¼ˆè¶…è¿‡é™åˆ¶ä¼šæŠ¥é”™ï¼‰
   - æ¯æ¬¡ä¸Šä¼ éƒ½æ˜¯æ–°å¢è®°å½•
   - å¦‚éœ€æ›¿æ¢è¯·ä½¿ç”¨æ›´æ–°æ¥å£

3. **ç›¸å†Œå°é¢**ï¼šè®¾ç½® `isPrimary=true` ä¼šè‡ªåŠ¨å–æ¶ˆå…¶ä»–ç…§ç‰‡çš„å°é¢çŠ¶æ€

4. **å®¡æ ¸çŠ¶æ€**ï¼šä¸Šä¼ åé»˜è®¤ä¸ºå¾…å®¡æ ¸ï¼ˆ`auditStatus=0`ï¼‰ï¼Œå®¡æ ¸é€šè¿‡åæ‰ä¼šæ˜¾ç¤º

5. **å®Œæ•´æµç¨‹**ï¼š
   ```
   ç”¨æˆ·é€‰æ‹©å›¾ç‰‡ â†’ OSSä¸Šä¼ æ¥å£ â†’ è·å¾—imageUrl â†’ æœ¬æ¥å£ä¿å­˜ â†’ å®Œæˆ
   è¯¦è§æ–‡æ¡£é¡¶éƒ¨"å›¾ç‰‡ä¸Šä¼ å®Œæ•´æµç¨‹è¯´æ˜"
   ```

---

## 13. è·å–å›¾ç‰‡åˆ—è¡¨

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/media/list`
- **æ¥å£è¯´æ˜**ï¼šè·å–æŒ‡å®šç±»å‹çš„å›¾ç‰‡åˆ—è¡¨
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### æŸ¥è¯¢å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| mediaType | String | æ˜¯ | å›¾ç‰‡ç±»å‹ï¼šavatarã€albumã€backgroundã€momentã€activity |

### è¯·æ±‚ç¤ºä¾‹

**ç¤ºä¾‹1ï¼šè·å–ç›¸å†Œç…§ç‰‡**
```bash
curl -X GET "http://localhost:8080/api/media/list?mediaType=album" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**ç¤ºä¾‹2ï¼šè·å–å¤´åƒ**
```bash
curl -X GET "http://localhost:8080/api/media/list?mediaType=avatar" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": 12345,
      "userId": "U1699123456789AB12CD",
      "imageUrl": "https://your-bucket.oss-cn-hangzhou.aliyuncs.com/uploads/album/U1234.../photo1.jpg",
      "mediaType": "album",
      "isPrimary": true,
      "sortOrder": 0,
      "auditStatus": 1,
      "width": 1080,
      "height": 1920,
      "fileSize": 2048576,
      "createdAt": "2025-11-06T10:30:00",
      "updatedAt": "2025-11-06T10:30:00"
    }
  ],
  "traceId": "a1b2c3d4..."
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | Long | å›¾ç‰‡ID |
| userId | String | ä¸šåŠ¡ç”¨æˆ·ID |
| imageUrl | String | å›¾ç‰‡URL |
| mediaType | String | å›¾ç‰‡ç±»å‹ |
| isPrimary | Boolean | æ˜¯å¦ä¸ºä¸»å›¾ç‰‡ï¼ˆå°é¢/å¤´åƒ/èƒŒæ™¯ï¼‰ |
| sortOrder | Integer | æ’åºï¼ˆç›¸å†Œä½¿ç”¨ï¼‰ |
| auditStatus | Integer | å®¡æ ¸çŠ¶æ€ï¼š0-å¾…å®¡æ ¸ 1-é€šè¿‡ 2-æ‹’ç» |
| width | Integer | å›¾ç‰‡å®½åº¦ï¼ˆåƒç´ ï¼‰ |
| height | Integer | å›¾ç‰‡é«˜åº¦ï¼ˆåƒç´ ï¼‰ |
| fileSize | Long | æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ |

### ä¸šåŠ¡è¯´æ˜

1. **æ’åºè§„åˆ™**ï¼šä¸»å›¾ç‰‡ï¼ˆ`isPrimary=true`ï¼‰ä¼˜å…ˆï¼Œç„¶åæŒ‰ `sortOrder` å‡åº
2. **å®¡æ ¸è¿‡æ»¤**ï¼šåªè¿”å›å®¡æ ¸é€šè¿‡ï¼ˆ`auditStatus=1`ï¼‰çš„å›¾ç‰‡
3. **ç©ºåˆ—è¡¨**ï¼šå¦‚æœæ²¡æœ‰å›¾ç‰‡ï¼Œè¿”å›ç©ºæ•°ç»„ `[]`

---

## 14. åˆ é™¤å›¾ç‰‡

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`DELETE /api/media/{mediaId}`
- **æ¥å£è¯´æ˜**ï¼šåˆ é™¤æŒ‡å®šçš„å›¾ç‰‡
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| mediaId | Long | æ˜¯ | å›¾ç‰‡ID |

### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X DELETE http://localhost:8080/api/media/12345 \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "å›¾ç‰‡åˆ é™¤æˆåŠŸ",
  "data": true,
  "traceId": "a1b2c3d4..."
}
```

### ä¸šåŠ¡è¯´æ˜

1. **æƒé™æ£€æŸ¥**ï¼šåªèƒ½åˆ é™¤è‡ªå·±çš„å›¾ç‰‡
2. **å¤´åƒå’ŒèƒŒæ™¯å¢™**ï¼šä¸èƒ½åˆ é™¤ï¼Œåªèƒ½ä¸Šä¼ æ–°çš„æ›¿æ¢
3. **é€»è¾‘åˆ é™¤**ï¼šæ•°æ®ä¸ä¼šçœŸæ­£åˆ é™¤ï¼Œåªæ˜¯æ ‡è®°ä¸ºå·²åˆ é™¤

---

## 15. è®¾ç½®ä¸»å›¾ç‰‡

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/media/{mediaId}/set-primary`
- **æ¥å£è¯´æ˜**ï¼šè®¾ç½®æŒ‡å®šå›¾ç‰‡ä¸ºä¸»å›¾ç‰‡ï¼ˆå¤´åƒ/å°é¢/èƒŒæ™¯ï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| mediaId | Long | æ˜¯ | å›¾ç‰‡ID |

### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X POST http://localhost:8080/api/media/12345/set-primary \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "ä¸»å›¾ç‰‡è®¾ç½®æˆåŠŸ",
  "data": true,
  "traceId": "a1b2c3d4..."
}
```

### ä¸šåŠ¡è¯´æ˜

1. **å”¯ä¸€ä¸»å›¾ç‰‡**ï¼šåŒä¸€ç±»å‹åªèƒ½æœ‰ä¸€ä¸ªä¸»å›¾ç‰‡ï¼Œè®¾ç½®æ–°çš„ä¼šè‡ªåŠ¨å–æ¶ˆæ—§çš„
2. **é€‚ç”¨ç±»å‹**ï¼šä¸»è¦ç”¨äºç›¸å†Œè®¾ç½®å°é¢ï¼Œå¤´åƒå’ŒèƒŒæ™¯å¢™é»˜è®¤å°±æ˜¯ä¸»å›¾ç‰‡
3. **æƒé™æ£€æŸ¥**ï¼šåªèƒ½è®¾ç½®è‡ªå·±çš„å›¾ç‰‡

---

## 16. æ›´æ–°å›¾ç‰‡

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/media/{mediaId}/update`
- **æ¥å£è¯´æ˜**ï¼šæ›´æ–°æŒ‡å®šå›¾ç‰‡çš„URLå’Œå…ƒæ•°æ®ï¼ˆç”¨äºç›¸å†Œã€åŠ¨æ€ã€æ´»åŠ¨ç­‰å›¾ç‰‡çš„æ›¿æ¢ï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
Content-Type: application/json
```

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| mediaId | Long | æ˜¯ | å›¾ç‰‡ID |

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| imageUrl | String | æ˜¯ | æ–°çš„å›¾ç‰‡URL |
| width | Integer | å¦ | å›¾ç‰‡å®½åº¦ï¼ˆåƒç´ ï¼‰ |
| height | Integer | å¦ | å›¾ç‰‡é«˜åº¦ï¼ˆåƒç´ ï¼‰ |
| fileSize | Long | å¦ | æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**ç¤ºä¾‹1ï¼šæ›´æ–°ç›¸å†Œç…§ç‰‡**
```bash
curl -X POST http://localhost:8080/api/media/12345/update \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "imageUrl": "https://your-bucket.oss.../new-photo.jpg",
    "width": 1080,
    "height": 1920,
    "fileSize": 2048576
  }'
```

**ç¤ºä¾‹2ï¼šç¼–è¾‘åŠ¨æ€å›¾ç‰‡**
```bash
# åœºæ™¯ï¼šç”¨æˆ·æƒ³æ›¿æ¢åŠ¨æ€ä¸­çš„ç¬¬2å¼ å›¾ç‰‡
# æ­¥éª¤1ï¼šå…ˆè·å–åŠ¨æ€å›¾ç‰‡åˆ—è¡¨ï¼Œæ‰¾åˆ°mediaId
curl -X GET "http://localhost:8080/api/media/list?mediaType=moment" \
  -H "Authorization: Bearer YOUR_TOKEN"

# æ­¥éª¤2ï¼šæ›´æ–°æŒ‡å®šå›¾ç‰‡
curl -X POST http://localhost:8080/api/media/78901/update \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "imageUrl": "https://your-bucket.oss.../new-moment-pic.jpg"
  }'
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "å›¾ç‰‡æ›´æ–°æˆåŠŸ",
  "data": {
    "mediaId": 12345,
    "imageUrl": "https://your-bucket.oss.../new-photo.jpg",
    "mediaType": "album",
    "isPrimary": false,
    "currentCount": null,
    "maxCount": null
  },
  "traceId": "a1b2c3d4..."
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| mediaId | Long | å›¾ç‰‡ID |
| imageUrl | String | æ–°çš„å›¾ç‰‡URL |
| mediaType | String | å›¾ç‰‡ç±»å‹ |
| isPrimary | Boolean | æ˜¯å¦ä¸ºä¸»å›¾ç‰‡ |
| currentCount | Integer | nullï¼ˆæ›´æ–°æ“ä½œä¸è¿”å›è®¡æ•°ï¼‰ |
| maxCount | Integer | nullï¼ˆæ›´æ–°æ“ä½œä¸è¿”å›è®¡æ•°ï¼‰ |

### ä¸šåŠ¡è¯´æ˜

1. **æƒé™æ£€æŸ¥**ï¼šåªèƒ½æ›´æ–°è‡ªå·±çš„å›¾ç‰‡
2. **é‡æ–°å®¡æ ¸**ï¼šæ›´æ–°åå›¾ç‰‡éœ€è¦é‡æ–°å®¡æ ¸ï¼ˆ`auditStatus=0`ï¼‰
3. **ä¿ç•™å±æ€§**ï¼š`mediaType`ã€`isPrimary`ã€`sortOrder` ç­‰å±æ€§ä¸ä¼šæ”¹å˜
4. **å®Œæ•´æµç¨‹**ï¼šå…ˆè°ƒç”¨OSSä¸Šä¼ æ¥å£è·å–æ–°URLï¼Œå†è°ƒç”¨æ­¤æ¥å£æ›´æ–°
5. **é€‚ç”¨åœºæ™¯**ï¼š
   - ç›¸å†Œç…§ç‰‡æ›¿æ¢
   - åŠ¨æ€å›¾ç‰‡ç¼–è¾‘
   - æ´»åŠ¨å›¾ç‰‡æ›´æ–°
6. **æ³¨æ„**ï¼š
   - å¤´åƒå’ŒèƒŒæ™¯å¢™æ— éœ€è°ƒç”¨æ­¤æ¥å£ï¼Œç›´æ¥è°ƒç”¨ `POST /api/media/save` å³å¯è‡ªåŠ¨æ›¿æ¢
   - è¯·æ±‚æ–¹æ³•ä¸º POSTï¼ˆä¾¿äºå‰ç«¯ç»Ÿä¸€å¤„ç†ï¼‰

---

## 17. æ ¹æ®ä¸šåŠ¡ç±»å‹è·å–å›¾ç‰‡

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/media/by-type`
- **æ¥å£è¯´æ˜**ï¼šæ ¹æ®ä¸šåŠ¡ç±»å‹è·å–å›¾ç‰‡ï¼Œæ”¯æŒå¤šç±»å‹æŸ¥è¯¢å’Œçµæ´»çš„ç­›é€‰æ¡ä»¶
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### æŸ¥è¯¢å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| mediaTypes | String | æ˜¯ | ä¸šåŠ¡ç±»å‹ï¼šavatar-å¤´åƒã€album-ç›¸å†Œã€background-èƒŒæ™¯å¢™ã€moment-åŠ¨æ€ã€activity-æ´»åŠ¨ã€‚æ”¯æŒå¤šä¸ªç±»å‹ï¼Œç”¨é€—å·åˆ†éš”ï¼Œå¦‚ï¼šalbum,moment |
| userId | String | å¦ | ç”¨æˆ·IDï¼ˆå¯é€‰ï¼Œä¸ä¼ åˆ™æŸ¥è¯¢å½“å‰ç”¨æˆ·ï¼‰ |
| auditStatus | Integer | å¦ | å®¡æ ¸çŠ¶æ€ï¼š0-å¾…å®¡æ ¸ã€1-é€šè¿‡ã€2-æ‹’ç»ã€‚ä¸ä¼ åˆ™åªè¿”å›å®¡æ ¸é€šè¿‡çš„ |
| isPrimary | Boolean | å¦ | æ˜¯å¦ä¸»å›¾ç‰‡ï¼štrue-åªè¿”å›ä¸»å›¾ã€false-åªè¿”å›éä¸»å›¾ã€‚ä¸ä¼ åˆ™è¿”å›å…¨éƒ¨ |

### è¯·æ±‚ç¤ºä¾‹

**ç¤ºä¾‹1ï¼šè·å–ç›¸å†Œå’ŒåŠ¨æ€å›¾ç‰‡**
```bash
curl -X GET "http://localhost:8080/api/media/by-type?mediaTypes=album,moment" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**ç¤ºä¾‹2ï¼šè·å–æ‰€æœ‰å¾…å®¡æ ¸çš„å›¾ç‰‡**
```bash
curl -X GET "http://localhost:8080/api/media/by-type?mediaTypes=album&auditStatus=0" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**ç¤ºä¾‹3ï¼šåªè·å–ä¸»å›¾ç‰‡ï¼ˆå°é¢ï¼‰**
```bash
curl -X GET "http://localhost:8080/api/media/by-type?mediaTypes=album&isPrimary=true" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**ç¤ºä¾‹4ï¼šæŸ¥è¯¢æŒ‡å®šç”¨æˆ·çš„ç›¸å†Œ**
```bash
curl -X GET "http://localhost:8080/api/media/by-type?mediaTypes=album&userId=U17623500638845TAWQ0" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**ç¤ºä¾‹5ï¼šç»„åˆæŸ¥è¯¢ï¼ˆç›¸å†Œ+åŠ¨æ€ï¼Œåªè¦ä¸»å›¾ï¼‰**
```bash
curl -X GET "http://localhost:8080/api/media/by-type?mediaTypes=album,moment&isPrimary=true" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": 12345,
      "userId": "U17623500638845TAWQ0",
      "imageUrl": "https://your-bucket.oss-cn-hangzhou.aliyuncs.com/uploads/album/U1234.../photo1.jpg",
      "mediaType": "album",
      "isPrimary": true,
      "sortOrder": 0,
      "auditStatus": 1,
      "width": 1080,
      "height": 1920,
      "fileSize": 2048576,
      "createdAt": "2025-11-08T10:30:00",
      "updatedAt": "2025-11-08T10:30:00"
    },
    {
      "id": 12346,
      "userId": "U17623500638845TAWQ0",
      "imageUrl": "https://your-bucket.oss-cn-hangzhou.aliyuncs.com/uploads/moment/U1234.../moment1.jpg",
      "mediaType": "moment",
      "isPrimary": false,
      "sortOrder": 0,
      "auditStatus": 1,
      "width": 1080,
      "height": 1920,
      "fileSize": 2048576,
      "createdAt": "2025-11-08T11:00:00",
      "updatedAt": "2025-11-08T11:00:00"
    }
  ],
  "traceId": "a1b2c3d4..."
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | Long | å›¾ç‰‡ID |
| userId | String | ä¸šåŠ¡ç”¨æˆ·ID |
| imageUrl | String | å›¾ç‰‡URL |
| mediaType | String | å›¾ç‰‡ç±»å‹ |
| isPrimary | Boolean | æ˜¯å¦ä¸ºä¸»å›¾ç‰‡ï¼ˆå°é¢/å¤´åƒ/èƒŒæ™¯ï¼‰ |
| sortOrder | Integer | æ’åºï¼ˆç›¸å†Œä½¿ç”¨ï¼‰ |
| auditStatus | Integer | å®¡æ ¸çŠ¶æ€ï¼š0-å¾…å®¡æ ¸ 1-é€šè¿‡ 2-æ‹’ç» |
| width | Integer | å›¾ç‰‡å®½åº¦ï¼ˆåƒç´ ï¼‰ |
| height | Integer | å›¾ç‰‡é«˜åº¦ï¼ˆåƒç´ ï¼‰ |
| fileSize | Long | æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ |
| createdAt | DateTime | åˆ›å»ºæ—¶é—´ |
| updatedAt | DateTime | æ›´æ–°æ—¶é—´ |

### ä¸šåŠ¡è¯´æ˜

1. **å¤šç±»å‹æ”¯æŒ**ï¼šæ”¯æŒåŒæ—¶æŸ¥è¯¢å¤šä¸ªä¸šåŠ¡ç±»å‹ï¼Œç”¨é€—å·åˆ†éš”ï¼Œå¦‚ `album,moment,activity`
2. **é»˜è®¤ç­›é€‰**ï¼šé»˜è®¤åªè¿”å›å®¡æ ¸é€šè¿‡çš„å›¾ç‰‡ï¼ˆ`auditStatus=1`ï¼‰
3. **æ’åºè§„åˆ™**ï¼šä¸»å›¾ç‰‡ï¼ˆ`isPrimary=true`ï¼‰ä¼˜å…ˆï¼Œç„¶åæŒ‰ `sortOrder` å‡åºï¼Œæœ€åæŒ‰åˆ›å»ºæ—¶é—´å€’åº
4. **ç”¨æˆ·æŸ¥è¯¢**ï¼šä¸ä¼  `userId` æ—¶æŸ¥è¯¢å½“å‰ç”¨æˆ·ï¼Œä¼ å…¥ `userId` å¯æŸ¥è¯¢æŒ‡å®šç”¨æˆ·ï¼ˆéœ€æ³¨æ„æƒé™ï¼‰
5. **çµæ´»ç­›é€‰**ï¼šæ”¯æŒæŒ‰å®¡æ ¸çŠ¶æ€å’Œæ˜¯å¦ä¸»å›¾è¿›è¡Œç­›é€‰

### ä¸æ¥å£13çš„åŒºåˆ«

| ç‰¹æ€§ | æ¥å£13ï¼ˆ/api/media/listï¼‰ | æ¥å£17ï¼ˆ/api/media/by-typeï¼‰ |
|------|---------------------------|------------------------------|
| ä¸šåŠ¡ç±»å‹ | å•ä¸ªç±»å‹ | æ”¯æŒå¤šä¸ªç±»å‹ï¼ˆé€—å·åˆ†éš”ï¼‰ |
| ç­›é€‰æ¡ä»¶ | å›ºå®šï¼ˆåªè¿”å›å®¡æ ¸é€šè¿‡çš„ï¼‰ | çµæ´»ï¼ˆå¯ç­›é€‰å®¡æ ¸çŠ¶æ€ã€ä¸»å›¾ï¼‰ |
| ç”¨æˆ·æŸ¥è¯¢ | åªèƒ½æŸ¥è¯¢å½“å‰ç”¨æˆ· | å¯æŸ¥è¯¢æŒ‡å®šç”¨æˆ· |
| é€‚ç”¨åœºæ™¯ | ç®€å•æŸ¥è¯¢å•ä¸ªç±»å‹ | å¤æ‚æŸ¥è¯¢å’Œç­›é€‰ |

---

## 18. æ‰¹é‡åˆ é™¤å›¾ç‰‡

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`DELETE /api/media/batch`
- **æ¥å£è¯´æ˜**ï¼šæ‰¹é‡åˆ é™¤å¤šå¼ å›¾ç‰‡ï¼Œæ”¯æŒä¸€æ¬¡æ€§åˆ é™¤å¤šä¸ªå›¾ç‰‡ID
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| mediaIds | Array<Long> | æ˜¯ | å›¾ç‰‡IDåˆ—è¡¨ï¼ˆæ•°ç»„ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**ç¤ºä¾‹1ï¼šæ‰¹é‡åˆ é™¤ç›¸å†Œç…§ç‰‡**
```bash
curl -X DELETE http://localhost:8080/api/media/batch \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '[12345, 12346, 12347]'
```

**è¯·æ±‚Body**ï¼š
```json
[12345, 12346, 12347]
```

**ç¤ºä¾‹2ï¼šæ‰¹é‡åˆ é™¤åŠ¨æ€å›¾ç‰‡**
```bash
# åœºæ™¯ï¼šç”¨æˆ·æƒ³åˆ é™¤3å¼ åŠ¨æ€å›¾ç‰‡
# æ­¥éª¤1ï¼šè·å–åŠ¨æ€å›¾ç‰‡åˆ—è¡¨
curl -X GET "http://localhost:8080/api/media/list?mediaType=moment" \
  -H "Authorization: Bearer YOUR_TOKEN"

# æ­¥éª¤2ï¼šæ‰¹é‡åˆ é™¤æŒ‡å®šçš„å›¾ç‰‡
curl -X DELETE http://localhost:8080/api/media/batch \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '[78901, 78902, 78903]'
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "æ‰¹é‡åˆ é™¤å®Œæˆï¼ŒæˆåŠŸåˆ é™¤3å¼ å›¾ç‰‡",
  "data": 3,
  "traceId": "a1b2c3d4..."
}
```

**éƒ¨åˆ†æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "æ‰¹é‡åˆ é™¤å®Œæˆï¼ŒæˆåŠŸåˆ é™¤2å¼ å›¾ç‰‡",
  "data": 2,
  "traceId": "a1b2c3d4..."
}
```

**å¤±è´¥å“åº”ï¼ˆç©ºåˆ—è¡¨ï¼‰**ï¼š
```json
{
  "code": 40006,
  "message": "å›¾ç‰‡IDåˆ—è¡¨ä¸èƒ½ä¸ºç©º",
  "data": null
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| data | Integer | æˆåŠŸåˆ é™¤çš„å›¾ç‰‡æ•°é‡ |

### ä¸šåŠ¡è¯´æ˜

1. **æ™ºèƒ½è·³è¿‡**ï¼š
   - è‡ªåŠ¨è·³è¿‡å¤´åƒå’ŒèƒŒæ™¯å¢™ï¼ˆè¿™äº›åªèƒ½æ›¿æ¢ä¸èƒ½åˆ é™¤ï¼‰
   - è‡ªåŠ¨è·³è¿‡ä¸å­˜åœ¨æˆ–å·²åˆ é™¤çš„å›¾ç‰‡
   - è‡ªåŠ¨è·³è¿‡æ— æƒé™çš„å›¾ç‰‡ï¼ˆåªèƒ½åˆ é™¤è‡ªå·±çš„å›¾ç‰‡ï¼‰

2. **å®¹é”™å¤„ç†**ï¼š
   - éƒ¨åˆ†å›¾ç‰‡åˆ é™¤å¤±è´¥ä¸å½±å“å…¶ä»–å›¾ç‰‡çš„åˆ é™¤
   - è¿”å›å®é™…æˆåŠŸåˆ é™¤çš„æ•°é‡
   - è¯¦ç»†çš„æ—¥å¿—è®°å½•ä¾¿äºé—®é¢˜è¿½è¸ª

3. **æƒé™æ£€æŸ¥**ï¼š
   - åªèƒ½åˆ é™¤è‡ªå·±çš„å›¾ç‰‡
   - ä¼šéªŒè¯æ¯å¼ å›¾ç‰‡çš„å½’å±æƒ

4. **é€»è¾‘åˆ é™¤**ï¼š
   - æ•°æ®ä¸ä¼šçœŸæ­£åˆ é™¤ï¼Œåªæ˜¯æ ‡è®°ä¸ºå·²åˆ é™¤ï¼ˆ`deleted=1`ï¼‰
   - å¯é€šè¿‡æ¢å¤æ¥å£æ¢å¤ï¼ˆå¤´åƒå’ŒèƒŒæ™¯å¢™é™¤å¤–ï¼‰

5. **äº‹åŠ¡æ”¯æŒ**ï¼š
   - æ•´ä¸ªæ‰¹é‡æ“ä½œåœ¨äº‹åŠ¡ä¸­æ‰§è¡Œ
   - å¦‚æœæŸå¼ å›¾ç‰‡åˆ é™¤å‡ºç°å¼‚å¸¸ä¼šè·³è¿‡ç»§ç»­å¤„ç†

6. **ä½¿ç”¨åœºæ™¯**ï¼š
   - ç›¸å†Œç®¡ç†ï¼šæ‰¹é‡åˆ é™¤å¤šå¼ ç›¸å†Œç…§ç‰‡
   - åŠ¨æ€ç¼–è¾‘ï¼šæ‰¹é‡åˆ é™¤åŠ¨æ€ä¸­çš„å¤šå¼ å›¾ç‰‡
   - æ´»åŠ¨ç®¡ç†ï¼šæ‰¹é‡åˆ é™¤æ´»åŠ¨å›¾ç‰‡
   - æ¸…ç†æ“ä½œï¼šä¸€æ¬¡æ€§æ¸…ç©ºæŸç±»å‹çš„æ‰€æœ‰å›¾ç‰‡

### ä¸æ¥å£14çš„åŒºåˆ«

| ç‰¹æ€§ | æ¥å£14ï¼ˆ/api/media/{id}ï¼‰ | æ¥å£18ï¼ˆ/api/media/batchï¼‰ |
|------|---------------------------|----------------------------|
| åˆ é™¤æ•°é‡ | å•å¼  | å¤šå¼ ï¼ˆæ‰¹é‡ï¼‰ |
| è¯·æ±‚æ–¹å¼ | è·¯å¾„å‚æ•° | è¯·æ±‚Bodyï¼ˆæ•°ç»„ï¼‰ |
| è¿”å›å€¼ | Boolean | Integerï¼ˆæˆåŠŸæ•°é‡ï¼‰ |
| é€‚ç”¨åœºæ™¯ | åˆ é™¤å•å¼ å›¾ç‰‡ | æ‰¹é‡åˆ é™¤å¤šå¼ å›¾ç‰‡ |

---

## 19. æ¢å¤å›¾ç‰‡

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/media/{mediaId}/restore`
- **æ¥å£è¯´æ˜**ï¼šæ¢å¤å·²è¢«é€»è¾‘åˆ é™¤çš„å›¾ç‰‡ï¼ˆä»å›æ”¶ç«™æ¢å¤ï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| mediaId | Long | æ˜¯ | å›¾ç‰‡ID |

### è¯·æ±‚ç¤ºä¾‹

**ç¤ºä¾‹1ï¼šæ¢å¤å•å¼ ç›¸å†Œç…§ç‰‡**
```bash
curl -X POST http://localhost:8080/api/media/12345/restore \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**ç¤ºä¾‹2ï¼šæ¢å¤æ“ä½œæµç¨‹**
```bash
# åœºæ™¯ï¼šç”¨æˆ·è¯¯åˆ äº†ä¸€å¼ ç›¸å†Œç…§ç‰‡ï¼Œæƒ³è¦æ¢å¤

# æ­¥éª¤1ï¼šæŸ¥çœ‹å·²åˆ é™¤çš„å›¾ç‰‡åˆ—è¡¨ï¼ˆéœ€è¦åç«¯æä¾›å·²åˆ é™¤å›¾ç‰‡æŸ¥è¯¢æ¥å£ï¼‰
# æˆ–è€…è®°å½•ä¹‹å‰åˆ é™¤çš„å›¾ç‰‡ID

# æ­¥éª¤2ï¼šæ¢å¤æŒ‡å®šçš„å›¾ç‰‡
curl -X POST http://localhost:8080/api/media/12345/restore \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å›¾ç‰‡æ¢å¤æˆåŠŸ",
  "data": true,
  "traceId": "a1b2c3d4..."
}
```

**å¤±è´¥å“åº”ï¼ˆå›¾ç‰‡ä¸å­˜åœ¨æˆ–æœªåˆ é™¤ï¼‰**ï¼š
```json
{
  "code": 40003,
  "message": "å›¾ç‰‡ä¸å­˜åœ¨æˆ–æœªåˆ é™¤",
  "data": null
}
```

**å¤±è´¥å“åº”ï¼ˆå¤´åƒ/èƒŒæ™¯å¢™ä¸æ”¯æŒæ¢å¤ï¼‰**ï¼š
```json
{
  "code": 40005,
  "message": "å¤´åƒå’ŒèƒŒæ™¯å¢™ä¸æ”¯æŒæ¢å¤ï¼Œè¯·ç›´æ¥ä¸Šä¼ æ–°çš„è¿›è¡Œæ›¿æ¢",
  "data": null
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| data | Boolean | æ¢å¤æ˜¯å¦æˆåŠŸ |

### ä¸šåŠ¡è¯´æ˜

1. **é€‚ç”¨èŒƒå›´**ï¼š
   - âœ… ç›¸å†Œç…§ç‰‡å¯ä»¥æ¢å¤
   - âœ… åŠ¨æ€å›¾ç‰‡å¯ä»¥æ¢å¤
   - âœ… æ´»åŠ¨å›¾ç‰‡å¯ä»¥æ¢å¤
   - âŒ å¤´åƒä¸æ”¯æŒæ¢å¤ï¼ˆåªèƒ½ä¸Šä¼ æ–°çš„æ›¿æ¢ï¼‰
   - âŒ èƒŒæ™¯å¢™ä¸æ”¯æŒæ¢å¤ï¼ˆåªèƒ½ä¸Šä¼ æ–°çš„æ›¿æ¢ï¼‰

2. **æ¢å¤æ¡ä»¶**ï¼š
   - å›¾ç‰‡å¿…é¡»æ˜¯å·²è¢«é€»è¾‘åˆ é™¤çš„çŠ¶æ€ï¼ˆ`deleted=1`ï¼‰
   - åªèƒ½æ¢å¤è‡ªå·±çš„å›¾ç‰‡
   - å›¾ç‰‡IDå¿…é¡»æœ‰æ•ˆä¸”å­˜åœ¨

3. **æ¢å¤æ•ˆæœ**ï¼š
   - å°†å›¾ç‰‡çš„ `deleted` æ ‡è®°ä» 1 æ”¹ä¸º 0
   - æ¢å¤åå›¾ç‰‡ç«‹å³å¯è§
   - åŸæœ‰çš„æ’åºã€ä¸»å›¾çŠ¶æ€ç­‰å±æ€§ä¿æŒä¸å˜

4. **å¤´åƒå’ŒèƒŒæ™¯å¢™çš„ç‰¹æ®Šå¤„ç†**ï¼š
   - è¿™ä¸¤ç±»å›¾ç‰‡é‡‡ç”¨æ›¿æ¢æœºåˆ¶ï¼Œä¸æ”¯æŒåˆ é™¤å’Œæ¢å¤
   - å¦‚éœ€æ›´æ¢ï¼Œç›´æ¥è°ƒç”¨ `POST /api/media/save` ä¸Šä¼ æ–°çš„å³å¯

5. **ä½¿ç”¨åœºæ™¯**ï¼š
   - è¯¯åˆ ç›¸å†Œç…§ç‰‡åçš„æ¢å¤
   - åŠ¨æ€å‘å¸ƒååæ‚”ï¼Œæ¢å¤åˆ é™¤çš„å›¾ç‰‡
   - æ´»åŠ¨å›¾ç‰‡è¯¯åˆ åçš„æ‰¾å›

6. **æ³¨æ„äº‹é¡¹**ï¼š
   - åªèƒ½æ¢å¤é€»è¾‘åˆ é™¤çš„å›¾ç‰‡ï¼Œç‰©ç†åˆ é™¤çš„å›¾ç‰‡æ— æ³•æ¢å¤
   - é‡å¤æ¢å¤åŒä¸€å›¾ç‰‡ä¸ä¼šæŠ¥é”™ï¼ˆå¹‚ç­‰æ“ä½œï¼‰
   - éœ€è¦è®°å½•å›¾ç‰‡IDæ‰èƒ½æ¢å¤ï¼Œå»ºè®®æä¾›å·²åˆ é™¤å›¾ç‰‡åˆ—è¡¨æŸ¥è¯¢æ¥å£

### é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | é”™è¯¯ä¿¡æ¯ |
|--------|---------|
| 40003 | å›¾ç‰‡ä¸å­˜åœ¨æˆ–æœªåˆ é™¤ |
| 40005 | å¤´åƒå’ŒèƒŒæ™¯å¢™ä¸æ”¯æŒæ¢å¤ï¼Œè¯·ç›´æ¥ä¸Šä¼ æ–°çš„è¿›è¡Œæ›¿æ¢ |

---

## 20. è·å–æ ‡ç­¾åº“

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/user/tags`
- **æ¥å£è¯´æ˜**ï¼šè·å–ç³»ç»Ÿæ ‡ç­¾åº“ï¼ˆæ‰€æœ‰å¯é€‰æ ‡ç­¾ï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šå¦

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET http://localhost:8080/api/user/tags
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": 1,
      "tagName": "æ—…è¡Œ",
      "category": "å…´è¶£çˆ±å¥½",
      "icon": "icon-travel"
    },
    {
      "id": 2,
      "tagName": "å¥èº«",
      "category": "è¿åŠ¨",
      "icon": "icon-fitness"
    },
    {
      "id": 3,
      "tagName": "ç¾é£Ÿ",
      "category": "ç”Ÿæ´»",
      "icon": "icon-food"
    },
    {
      "id": 4,
      "tagName": "éŸ³ä¹",
      "category": "è‰ºæœ¯",
      "icon": "icon-music"
    },
    {
      "id": 5,
      "tagName": "ç”µå½±",
      "category": "å¨±ä¹",
      "icon": "icon-movie"
    }
  ]
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | Long | æ ‡ç­¾ID |
| tagName | String | æ ‡ç­¾åç§° |
| category | String | æ ‡ç­¾åˆ†ç±» |
| icon | String | æ ‡ç­¾å›¾æ ‡ |

---

## 21. è®¾ç½®æˆ‘çš„æ ‡ç­¾

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/user/tags`
- **æ¥å£è¯´æ˜**ï¼šè®¾ç½®/æ›´æ–°å½“å‰ç”¨æˆ·çš„å…´è¶£æ ‡ç­¾
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| tagIds | Array | æ˜¯ | æ ‡ç­¾IDåˆ—è¡¨ï¼ˆæœ€å¤š10ä¸ªï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/user/tags \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "tagIds": [1, 2, 3, 5, 8]
  }'
```

**è¯·æ±‚Body**ï¼š
```json
{
  "tagIds": [1, 2, 3, 5, 8]
}
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æ ‡ç­¾è®¾ç½®æˆåŠŸ",
  "data": true
}
```

### ä¸šåŠ¡è¯´æ˜

1. **è¦†ç›–å¼æ›´æ–°**ï¼šæ–°æ ‡ç­¾ä¼šè¦†ç›–æ—§æ ‡ç­¾
2. **æ•°é‡é™åˆ¶**ï¼šæœ€å¤šé€‰æ‹©10ä¸ªæ ‡ç­¾
3. **å¿…å¡«é¡¹æ£€æŸ¥**ï¼šè‡³å°‘éœ€è¦1ä¸ªæ ‡ç­¾
4. **è‡ªåŠ¨æ›´æ–°å®Œå–„åº¦**ï¼šè®¾ç½®æ ‡ç­¾åä¼šå½±å“èµ„æ–™å®Œå–„çŠ¶æ€

---

## 22. æ›´æ–°éšç§è®¾ç½®

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/user/privacy`
- **æ¥å£è¯´æ˜**ï¼šæ›´æ–°ç”¨æˆ·çš„éšç§è®¾ç½®
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| whoCanSeeMe | Integer | å¦ | è°å¯ä»¥çœ‹æˆ‘ï¼ˆ1-æ‰€æœ‰äººï¼Œ2-ä»…åŒ¹é…çš„äººï¼Œ3-å…³é—­ï¼‰ |
| showDistance | Integer | å¦ | æ˜¾ç¤ºè·ç¦»ï¼ˆ0-å¦ï¼Œ1-æ˜¯ï¼‰ |
| showOnlineStatus | Integer | å¦ | æ˜¾ç¤ºåœ¨çº¿çŠ¶æ€ï¼ˆ0-å¦ï¼Œ1-æ˜¯ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/user/privacy \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "whoCanSeeMe": 2,
    "showDistance": 1,
    "showOnlineStatus": 0
  }'
```

**è¯·æ±‚Body**ï¼š
```json
{
  "whoCanSeeMe": 2,
  "showDistance": 1,
  "showOnlineStatus": 0
}
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "éšç§è®¾ç½®æˆåŠŸ",
  "data": true
}
```

### ä¸šåŠ¡è¯´æ˜

1. **éƒ¨åˆ†æ›´æ–°**ï¼šåªæ›´æ–°æä¾›çš„å­—æ®µ
2. **é»˜è®¤å€¼**ï¼šé¦–æ¬¡è®¾ç½®æ—¶ï¼Œæœªæä¾›çš„å­—æ®µä½¿ç”¨é»˜è®¤å€¼ï¼ˆwhoCanSeeMe=1, showDistance=1, showOnlineStatus=1ï¼‰
3. **ç«‹å³ç”Ÿæ•ˆ**ï¼šè®¾ç½®åç«‹å³å½±å“å…¶ä»–ç”¨æˆ·æŸ¥çœ‹ä½ çš„èµ„æ–™

---

## 23. è·å–éšç§è®¾ç½®

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/user/privacy`
- **æ¥å£è¯´æ˜**ï¼šè·å–å½“å‰ç”¨æˆ·çš„éšç§è®¾ç½®
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET http://localhost:8080/api/user/privacy \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "whoCanSeeMe": 2,
    "showDistance": 1,
    "showOnlineStatus": 0
  }
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| whoCanSeeMe | Integer | è°å¯ä»¥çœ‹æˆ‘ï¼ˆ1-æ‰€æœ‰äººï¼Œ2-ä»…åŒ¹é…çš„äººï¼Œ3-å…³é—­ï¼‰ |
| showDistance | Integer | æ˜¾ç¤ºè·ç¦»ï¼ˆ0-å¦ï¼Œ1-æ˜¯ï¼‰ |
| showOnlineStatus | Integer | æ˜¾ç¤ºåœ¨çº¿çŠ¶æ€ï¼ˆ0-å¦ï¼Œ1-æ˜¯ï¼‰ |

---

## 24. æ‹‰é»‘ç”¨æˆ·

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/user/blacklist/{blockedUserId}`
- **æ¥å£è¯´æ˜**ï¼šå°†æŒ‡å®šç”¨æˆ·åŠ å…¥é»‘åå•
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| blockedUserId | String | æ˜¯ | è¦æ‹‰é»‘çš„ç”¨æˆ·IDï¼ˆä¸šåŠ¡ç”¨æˆ·IDï¼Œå¦‚ï¼šU1699123456789AB12CDï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/user/blacklist/U1699234567890CD34EF \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æ‹‰é»‘æˆåŠŸ",
  "data": true
}
```

### ä¸šåŠ¡è¯´æ˜

1. **åŒå‘éš”ç¦»**ï¼šæ‹‰é»‘åï¼ŒåŒæ–¹éƒ½æ— æ³•çœ‹åˆ°å¯¹æ–¹çš„åŠ¨æ€å’Œèµ„æ–™
2. **è‡ªåŠ¨å–æ¶ˆå…³æ³¨**ï¼šæ‹‰é»‘åè‡ªåŠ¨å–æ¶ˆå…³æ³¨å’Œç²‰ä¸å…³ç³»
3. **èŠå¤©é™åˆ¶**ï¼šæ‹‰é»‘åæ— æ³•äº’ç›¸å‘é€æ¶ˆæ¯
4. **é‡å¤æ‹‰é»‘**ï¼šé‡å¤æ‹‰é»‘åŒä¸€ç”¨æˆ·ä¼šè¿”å›æˆåŠŸï¼ˆå¹‚ç­‰æ“ä½œï¼‰

---

## 25. ç§»é™¤é»‘åå•

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`DELETE /api/user/blacklist/{blockedUserId}`
- **æ¥å£è¯´æ˜**ï¼šå°†æŒ‡å®šç”¨æˆ·ä»é»‘åå•ç§»é™¤
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| blockedUserId | String | æ˜¯ | è¦ç§»é™¤çš„ç”¨æˆ·IDï¼ˆä¸šåŠ¡ç”¨æˆ·IDï¼Œå¦‚ï¼šU1699123456789AB12CDï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X DELETE http://localhost:8080/api/user/blacklist/U1699234567890CD34EF \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "ç§»é™¤æˆåŠŸ",
  "data": true
}
```

### ä¸šåŠ¡è¯´æ˜

1. **æ¢å¤å¯è§**ï¼šç§»é™¤åï¼ŒåŒæ–¹å¯ä»¥é‡æ–°çœ‹åˆ°å¯¹æ–¹çš„èµ„æ–™
2. **ä¸æ¢å¤å…³æ³¨**ï¼šç§»é™¤é»‘åå•ä¸ä¼šè‡ªåŠ¨æ¢å¤ä¹‹å‰çš„å…³æ³¨å…³ç³»
3. **é‡å¤ç§»é™¤**ï¼šé‡å¤ç§»é™¤åŒä¸€ç”¨æˆ·ä¼šè¿”å›æˆåŠŸï¼ˆå¹‚ç­‰æ“ä½œï¼‰

---

## 26. è®¾ç½®åŒ¹é…åå¥½

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/matching/preference`
- **æ¥å£è¯´æ˜**ï¼šè®¾ç½®ç”¨æˆ·çš„åŒ¹é…åå¥½æ¡ä»¶
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| minAge | Integer | å¦ | æœŸæœ›æœ€å°å¹´é¾„ï¼ˆèŒƒå›´18-100ï¼‰ |
| maxAge | Integer | å¦ | æœŸæœ›æœ€å¤§å¹´é¾„ï¼ˆèŒƒå›´18-100ï¼‰ |
| minHeight | Integer | å¦ | æœŸæœ›æœ€å°èº«é«˜ï¼ˆèŒƒå›´100-250ï¼‰ |
| maxHeight | Integer | å¦ | æœŸæœ›æœ€å¤§èº«é«˜ï¼ˆèŒƒå›´100-250ï¼‰ |
| education | String | å¦ | æœŸæœ›å­¦å†ï¼ˆå¤šä¸ªç”¨é€—å·åˆ†éš”ï¼‰ |
| incomeRange | String | å¦ | æœŸæœ›æ”¶å…¥èŒƒå›´ |
| maxDistance | Integer | å¦ | æœ€å¤§è·ç¦»ï¼ˆkmï¼ŒèŒƒå›´1-1000ï¼‰ |
| locationLatitude | BigDecimal | å¦ | ç”¨æˆ·çº¬åº¦ |
| locationLongitude | BigDecimal | å¦ | ç”¨æˆ·ç»åº¦ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/matching/preference \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "minAge": 20,
    "maxAge": 35,
    "minHeight": 160,
    "maxHeight": 180,
    "education": "æœ¬ç§‘,ç¡•å£«",
    "incomeRange": "10-20ä¸‡",
    "maxDistance": 10,
    "locationLatitude": 39.908823,
    "locationLongitude": 116.397470
  }'
```

**è¯·æ±‚Body**ï¼š
```json
{
  "minAge": 20,
  "maxAge": 35,
  "minHeight": 160,
  "maxHeight": 180,
  "education": "æœ¬ç§‘,ç¡•å£«",
  "incomeRange": "10-20ä¸‡",
  "maxDistance": 10,
  "locationLatitude": 39.908823,
  "locationLongitude": 116.397470
}
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "åŒ¹é…åå¥½è®¾ç½®æˆåŠŸ",
  "data": true
}
```

### ä¸šåŠ¡è¯´æ˜

1. **è‡ªåŠ¨æ›´æ–°æ ‡å¿—ä½**ï¼šè®¾ç½®æˆåŠŸåï¼Œè‡ªåŠ¨å°†`match_preference_set=1`
2. **æ”¯æŒéƒ¨åˆ†æ›´æ–°**ï¼šæ‰€æœ‰å‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œåªæ›´æ–°æä¾›çš„å­—æ®µ
3. **è¦†ç›–å¼æ›´æ–°**ï¼šæ–°çš„è®¾ç½®ä¼šè¦†ç›–æ—§çš„è®¾ç½®

---

## 27. è·å–åŒ¹é…åå¥½

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/matching/preference`
- **æ¥å£è¯´æ˜**ï¼šè·å–å½“å‰ç”¨æˆ·çš„åŒ¹é…åå¥½è®¾ç½®
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET http://localhost:8080/api/matching/preference \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**å·²è®¾ç½®åå¥½æ—¶**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "userId": "U1699123456789AB12CD",
    "minAge": 20,
    "maxAge": 35,
    "minHeight": 160,
    "maxHeight": 180,
    "education": "æœ¬ç§‘,ç¡•å£«",
    "incomeRange": "10-20ä¸‡",
    "maxDistance": 10,
    "locationLatitude": 39.908823,
    "locationLongitude": 116.397470
  }
}
```

**æœªè®¾ç½®åå¥½æ—¶**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "userId": "U1699123456789AB12CD",
    "minAge": null,
    "maxAge": null,
    "minHeight": null,
    "maxHeight": null,
    "education": null,
    "incomeRange": null,
    "maxDistance": null,
    "locationLatitude": null,
    "locationLongitude": null
  }
}
```

---

## 28. è·å–æ¨èç”¨æˆ·åˆ—è¡¨

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/matching/recommend`
- **æ¥å£è¯´æ˜**ï¼šåŸºäºæ™ºèƒ½ç®—æ³•è·å–åŒ¹é…æ¨èåˆ—è¡¨
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | Integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| size | Integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10 |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/api/matching/recommend?page=1&size=10" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "æ¨èåˆ—è¡¨è·å–æˆåŠŸ",
  "data": {
    "records": [
      {
        "userId": "U1699123456789AB12CD",
        "nickname": "å°çº¢",
        "avatar": "https://example.com/avatar.jpg",
        "age": 25,
        "gender": 2,
        "height": 165,
        "occupation": "äº§å“ç»ç†",
        "education": "æœ¬ç§‘",
        "incomeRange": "10-20ä¸‡",
        "city": "åŒ—äº¬",
        "distance": 1500,
        "distanceText": "1.5km",
        "bio": "çƒ­çˆ±ç”Ÿæ´»ï¼Œå–œæ¬¢æ—…è¡Œå’Œç¾é£Ÿ",
        "interestTags": ["æ—…è¡Œ", "ç¾é£Ÿ", "å¥èº«"],
        "photos": [
          "https://example.com/photo1.jpg",
          "https://example.com/photo2.jpg"
        ],
        "matchScore": 85.5,
        "onlineStatus": 1,
        "isRealNameVerified": 1,
        "isLiked": 0,
        "likedMe": 0
      }
    ],
    "total": 100,
    "size": 10,
    "current": 1,
    "pages": 10
  }
}
```

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 40404,
  "message": "ç”¨æˆ·èµ„æ–™æœªå®Œå–„",
  "data": null
}
```

### åŒ¹é…ç®—æ³•è¯´æ˜

ç³»ç»Ÿé‡‡ç”¨å¤šç»´åº¦è¯„åˆ†ç®—æ³•è®¡ç®—åŒ¹é…åˆ†æ•°ï¼š

| ç»´åº¦ | æƒé‡ | è¯´æ˜ |
|------|------|------|
| åœ°ç†ä½ç½® | 30% | è·ç¦»è¶Šè¿‘åˆ†æ•°è¶Šé«˜ |
| å…´è¶£æ ‡ç­¾ | 25% | Jaccardç›¸ä¼¼åº¦ç®—æ³• |
| å¹´é¾„åŒ¹é… | 20% | ç¬¦åˆåå¥½èŒƒå›´ä¸”å¹´é¾„å·®è·å° |
| åŸºæœ¬ä¿¡æ¯ | 15% | èº«é«˜ã€å­¦å†ã€æ”¶å…¥ç­‰ |
| æ´»è·ƒåº¦ | 10% | åœ¨çº¿çŠ¶æ€å’Œæœ€åç™»å½•æ—¶é—´ |

---

## 29. å–œæ¬¢æ“ä½œ

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/matching/like`
- **æ¥å£è¯´æ˜**ï¼šå¯¹æ¨èç”¨æˆ·è¿›è¡Œå–œæ¬¢æ“ä½œï¼Œå¦‚æœå¯¹æ–¹ä¹Ÿå–œæ¬¢åˆ™åŒ¹é…æˆåŠŸ
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚ä½“

```json
{
  "toUserId": "U1699123456789AB12CD"
}
```

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| toUserId | String | æ˜¯ | ç›®æ ‡ç”¨æˆ·IDï¼ˆä¸šåŠ¡ç”¨æˆ·IDï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/matching/like \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"toUserId": "U1699123456789AB12CD"}'
```

### å“åº”ç¤ºä¾‹

**åŒå‘åŒ¹é…æˆåŠŸ**ï¼š
```json
{
  "code": 200,
  "message": "åŒ¹é…æˆåŠŸï¼ä½ ä»¬å¯ä»¥å¼€å§‹èŠå¤©äº†",
  "data": {
    "matched": true,
    "matchType": 1,
    "toUserId": "U1699123456789AB12CD",
    "toUserNickname": "å°çº¢",
    "toUserAvatar": "https://example.com/avatar.jpg",
    "message": "åŒ¹é…æˆåŠŸï¼ä½ ä»¬å¯ä»¥å¼€å§‹èŠå¤©äº†",
    "remainingLikes": 4,
    "remainingSuperLikes": 1
  }
}
```

**å•å‘å–œæ¬¢ï¼ˆæœªåŒ¹é…ï¼‰**ï¼š
```json
{
  "code": 200,
  "message": "å·²å‘é€å–œæ¬¢",
  "data": {
    "matched": false,
    "matchType": 1,
    "toUserId": "U1699123456789AB12CD",
    "toUserNickname": "å°çº¢",
    "toUserAvatar": "https://example.com/avatar.jpg",
    "message": "å·²å‘é€å–œæ¬¢",
    "remainingLikes": 4,
    "remainingSuperLikes": 1
  }
}
```

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 40501,
  "message": "ä»Šæ—¥å…è´¹å–œæ¬¢æ¬¡æ•°å·²ç”¨å®Œï¼Œå‡çº§VIPäº«å—æ— é™æ¬¡æ•°",
  "data": null
}
```

---

## 30. è¶…çº§å–œæ¬¢æ“ä½œ

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/matching/super-like`
- **æ¥å£è¯´æ˜**ï¼šå¯¹æ¨èç”¨æˆ·è¿›è¡Œè¶…çº§å–œæ¬¢æ“ä½œï¼Œè®©å¯¹æ–¹ä¼˜å…ˆçœ‹åˆ°ä½ 
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚ä½“

```json
{
  "toUserId": "U1699123456789AB12CD"
}
```

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| toUserId | String | æ˜¯ | ç›®æ ‡ç”¨æˆ·IDï¼ˆä¸šåŠ¡ç”¨æˆ·IDï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/matching/super-like \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"toUserId": "U1699123456789AB12CD"}'
```

### å“åº”ç¤ºä¾‹

**åŒ¹é…æˆåŠŸ**ï¼š
```json
{
  "code": 200,
  "message": "è¶…çº§åŒ¹é…æˆåŠŸï¼ä½ ä»¬å¯ä»¥å¼€å§‹èŠå¤©äº†",
  "data": {
    "matched": true,
    "matchType": 2,
    "toUserId": "U1699123456789AB12CD",
    "toUserNickname": "å°çº¢",
    "toUserAvatar": "https://example.com/avatar.jpg",
    "message": "è¶…çº§åŒ¹é…æˆåŠŸï¼ä½ ä»¬å¯ä»¥å¼€å§‹èŠå¤©äº†",
    "remainingLikes": 5,
    "remainingSuperLikes": 0
  }
}
```

**æœªåŒ¹é…**ï¼š
```json
{
  "code": 200,
  "message": "å·²å‘é€è¶…çº§å–œæ¬¢ï¼Œå¯¹æ–¹ä¼šä¼˜å…ˆçœ‹åˆ°ä½ ",
  "data": {
    "matched": false,
    "matchType": 2,
    "toUserId": "U1699123456789AB12CD",
    "toUserNickname": "å°çº¢",
    "toUserAvatar": "https://example.com/avatar.jpg",
    "message": "å·²å‘é€è¶…çº§å–œæ¬¢ï¼Œå¯¹æ–¹ä¼šä¼˜å…ˆçœ‹åˆ°ä½ ",
    "remainingLikes": 5,
    "remainingSuperLikes": 0
  }
}
```

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 40502,
  "message": "ä»Šæ—¥è¶…çº§å–œæ¬¢æ¬¡æ•°å·²ç”¨å®Œï¼Œå‡çº§VIPè·å–æ›´å¤šæ¬¡æ•°",
  "data": null
}
```

---

## 31. è·³è¿‡æ“ä½œ

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/matching/pass`
- **æ¥å£è¯´æ˜**ï¼šè·³è¿‡å½“å‰æ¨èç”¨æˆ·
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚ä½“

```json
{
  "toUserId": "U1699123456789AB12CD"
}
```

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| toUserId | String | æ˜¯ | ç›®æ ‡ç”¨æˆ·IDï¼ˆä¸šåŠ¡ç”¨æˆ·IDï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/matching/pass \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"toUserId": "U1699123456789AB12CD"}'
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": "æ“ä½œæˆåŠŸ"
}
```

---

## 32. æŸ¥çœ‹è°å–œæ¬¢æˆ‘

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/matching/liked-me`
- **æ¥å£è¯´æ˜**ï¼šæŸ¥çœ‹å–œæ¬¢æˆ‘çš„ç”¨æˆ·åˆ—è¡¨
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | Integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| size | Integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10 |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/api/matching/liked-me?page=1&size=10" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "records": [
      {
        "userId": "U1699123456789AB12CD",
        "nickname": "å°æ˜",
        "avatar": "https://example.com/avatar.jpg",
        "age": 28,
        "gender": 1,
        "height": 178,
        "occupation": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
        "education": "æœ¬ç§‘",
        "incomeRange": "20-30ä¸‡",
        "city": "åŒ—äº¬",
        "distance": 2500,
        "distanceText": "2.5km",
        "bio": "çƒ­çˆ±ç¼–ç¨‹å’Œè¿åŠ¨",
        "interestTags": ["ç¼–ç¨‹", "è¿åŠ¨", "æ—…è¡Œ"],
        "photos": ["https://example.com/photo1.jpg"],
        "matchScore": 88.0,
        "onlineStatus": 1,
        "isRealNameVerified": 1,
        "isLiked": 0,
        "likedMe": 1
      }
    ],
    "total": 15,
    "size": 10,
    "current": 1,
    "pages": 2
  }
}
```

---

## 33. è·å–åŒ¹é…é™åˆ¶ä¿¡æ¯

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/matching/limit-info`
- **æ¥å£è¯´æ˜**ï¼šè·å–å½“å‰ç”¨æˆ·çš„åŒ¹é…é™åˆ¶ä¿¡æ¯
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET http://localhost:8080/api/matching/limit-info \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**éVIPç”¨æˆ·**ï¼š
```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "isVip": false,
    "remainingLikes": 3,
    "remainingSuperLikes": 1,
    "dailyFreeLikesLimit": 5,
    "dailySuperLikesLimit": 1,
    "reachedLimit": false
  }
}
```

**VIPç”¨æˆ·**ï¼š
```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "isVip": true,
    "remainingLikes": 999,
    "remainingSuperLikes": 1,
    "dailyFreeLikesLimit": 999,
    "dailySuperLikesLimit": 1,
    "reachedLimit": false
  }
}
```

---

## 91. å–æ¶ˆå–œæ¬¢

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`DELETE /api/matching/like`
- **æ¥å£è¯´æ˜**ï¼šå–æ¶ˆä¹‹å‰å¯¹ç”¨æˆ·çš„å–œæ¬¢æ“ä½œ
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚ä½“

```json
{
  "toUserId": "U1699123456789AB12CD"
}
```

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| toUserId | String | æ˜¯ | è¦å–æ¶ˆå–œæ¬¢çš„ç”¨æˆ·ä¸šåŠ¡ID |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X DELETE "http://localhost:8080/api/matching/like" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"toUserId": "U1699123456789AB12CD"}'
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å–æ¶ˆå–œæ¬¢æˆåŠŸ",
  "data": "å–æ¶ˆå–œæ¬¢æˆåŠŸ"
}
```

**é”™è¯¯å“åº”ï¼ˆè®°å½•ä¸å­˜åœ¨ï¼‰**ï¼š
```json
{
  "code": 40004,
  "message": "æœªæ‰¾åˆ°å–œæ¬¢è®°å½•",
  "data": null
}
```

### ä¸šåŠ¡è¯´æ˜

1. **å–æ¶ˆå•å‘å–œæ¬¢**
   - å¦‚æœåªæ˜¯å•å‘å–œæ¬¢ï¼ˆå¯¹æ–¹æœªå›åº”ï¼‰ï¼Œç›´æ¥åˆ é™¤å–œæ¬¢è®°å½•
   - å¯¹æ–¹åœ¨"è°å–œæ¬¢æˆ‘"åˆ—è¡¨ä¸­ä¸å†çœ‹åˆ°ä½ 

2. **å–æ¶ˆåŒå‘åŒ¹é…**
   - å¦‚æœå·²ç»åŒ¹é…æˆåŠŸï¼ˆåŒå‘å–œæ¬¢ï¼‰ï¼Œå–æ¶ˆåï¼š
     - åˆ é™¤ä½ çš„å–œæ¬¢è®°å½•
     - å°†å¯¹æ–¹çš„è®°å½•æ”¹ä¸ºå•å‘å–œæ¬¢ï¼ˆ`matchResult = 1`ï¼‰
     - å¯¹æ–¹ä»èƒ½çœ‹åˆ°ä½ ï¼Œä½†åŒ¹é…çŠ¶æ€é™çº§ä¸ºå•å‘

3. **é™åˆ¶è¯´æ˜**
   - åªèƒ½å–æ¶ˆ"å–œæ¬¢"å’Œ"è¶…çº§å–œæ¬¢"ç±»å‹çš„è®°å½•
   - ä¸èƒ½å–æ¶ˆ"è·³è¿‡"è®°å½•

### æ³¨æ„äº‹é¡¹
- å–æ¶ˆå–œæ¬¢åï¼ŒåŒ¹é…è®°å½•ä¼šè¢«è½¯åˆ é™¤
- å¦‚æœå·²åŒ¹é…ï¼Œå¯¹æ–¹çš„åŒ¹é…çŠ¶æ€ä¼šé™çº§ä¸ºå•å‘å–œæ¬¢
- å–æ¶ˆåæ— æ³•æ¢å¤ï¼Œéœ€è¦é‡æ–°å–œæ¬¢

---

## 92. ç§»é™¤ç²‰ä¸

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`DELETE /api/user/followers/{followerId}`
- **æ¥å£è¯´æ˜**ï¼šç§»é™¤ç²‰ä¸ï¼ˆåˆ é™¤å¯¹æ–¹å…³æ³¨æˆ‘çš„è®°å½•ï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| followerId | String | æ˜¯ | è¦ç§»é™¤çš„ç²‰ä¸ç”¨æˆ·ä¸šåŠ¡ID |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X DELETE "http://localhost:8080/api/user/followers/U1699123456789AB12CD" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "ç§»é™¤ç²‰ä¸æˆåŠŸ",
  "data": "ç§»é™¤ç²‰ä¸æˆåŠŸ"
}
```

**é”™è¯¯å“åº”ï¼ˆä¸æ˜¯ç²‰ä¸ï¼‰**ï¼š
```json
{
  "code": 40004,
  "message": "è¯¥ç”¨æˆ·ä¸æ˜¯ä½ çš„ç²‰ä¸",
  "data": null
}
```

### ä¸šåŠ¡è¯´æ˜

1. **ç§»é™¤æ“ä½œ**
   - åˆ é™¤å¯¹æ–¹å…³æ³¨æˆ‘çš„è®°å½•ï¼ˆ`followerId` å…³æ³¨ `userId`ï¼‰
   - ä½¿ç”¨è½¯åˆ é™¤ï¼Œè®°å½•ä¿ç•™ä½†ä¸å†æ˜¾ç¤º

2. **éªŒè¯é€»è¾‘**
   - éªŒè¯è¯¥ç”¨æˆ·ç¡®å®æ˜¯ä½ çš„ç²‰ä¸
   - ä¸èƒ½ç§»é™¤è‡ªå·±
   - ç”¨æˆ·ä¸å­˜åœ¨æ—¶è¿”å›é”™è¯¯

3. **å½±å“èŒƒå›´**
   - å¯¹æ–¹ä¸å†å‡ºç°åœ¨ä½ çš„ç²‰ä¸åˆ—è¡¨ä¸­
   - å¯¹æ–¹æ— æ³•å†çœ‹åˆ°ä½ çš„åŠ¨æ€ï¼ˆå¦‚æœè®¾ç½®äº†éšç§ï¼‰
   - å¯¹æ–¹æ— æ³•å†ç»™ä½ å‘æ¶ˆæ¯ï¼ˆå¦‚æœè®¾ç½®äº†éšç§ï¼‰

### æ³¨æ„äº‹é¡¹
- ç§»é™¤ç²‰ä¸åï¼Œå¯¹æ–¹ä¸å†å…³æ³¨ä½ 
- æ“ä½œä¸å¯é€†ï¼Œå¯¹æ–¹éœ€è¦é‡æ–°å…³æ³¨
- å»ºè®®æ·»åŠ ç¡®è®¤å¯¹è¯æ¡†ï¼Œé¿å…è¯¯æ“ä½œ

---

## æ¥å£é€ŸæŸ¥è¡¨

| åºå· | æ¥å£è·¯å¾„ | æ–¹æ³• | è¯´æ˜ | è®¤è¯ |
|------|---------|------|------|------|
| 1 | `/api/auth/wx/login` | POST | å¾®ä¿¡ç™»å½• | âŒ |
| 2 | `/api/auth/test/token` | POST | ç”Ÿæˆæµ‹è¯•Token | âŒ |
| 3 | `/api/auth/token/validate` | GET | æ ¡éªŒToken | âœ… |
| 4 | `/api/user/profile` | POST | å®Œå–„èµ„æ–™ | âœ… |
| 5 | `/api/user/profile/update` | POST | æ›´æ–°èµ„æ–™ | âœ… |
| 6 | `/api/user/profile` | GET | æŸ¥çœ‹æˆ‘çš„èµ„æ–™ | âœ… |
| 7 | `/api/user/profile/{userId}` | GET | æŸ¥çœ‹ä»–äººèµ„æ–™ | âœ… |
| 8 | `/api/user/profile/status` | GET | æŸ¥çœ‹èµ„æ–™å®Œå–„çŠ¶æ€ | âœ… |
| 9 | `/api/user/stats` | GET | è·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ® | âœ… |
| 10 | `/api/verification/submit` | POST | æäº¤å®åè®¤è¯ | âœ… |
| 11 | `/api/verification/status` | GET | æŸ¥è¯¢å®åè®¤è¯çŠ¶æ€ | âœ… |
| 12 | `/api/user/album/upload` | POST | ä¸Šä¼ ç…§ç‰‡ | âœ… |
| 13 | `/api/user/album/{photoId}` | DELETE | åˆ é™¤ç…§ç‰‡ | âœ… |
| 14 | `/api/user/album/cover/{photoId}` | POST | è®¾ç½®å°é¢ç…§ç‰‡ | âœ… |
| 15 | `/api/user/tags` | GET | è·å–æ ‡ç­¾åº“ | âŒ |
| 16 | `/api/user/tags` | POST | è®¾ç½®æˆ‘çš„æ ‡ç­¾ | âœ… |
| 17 | `/api/user/privacy` | POST | æ›´æ–°éšç§è®¾ç½® | âœ… |
| 18 | `/api/user/privacy` | GET | è·å–éšç§è®¾ç½® | âœ… |
| 19 | `/api/user/blacklist/{blockedUserId}` | POST | æ‹‰é»‘ç”¨æˆ· | âœ… |
| 20 | `/api/user/blacklist/{blockedUserId}` | DELETE | ç§»é™¤é»‘åå• | âœ… |
| 21 | `/api/matching/preference` | POST | è®¾ç½®åŒ¹é…åå¥½ | âœ… |
| 22 | `/api/matching/preference` | GET | è·å–åŒ¹é…åå¥½ | âœ… |
| 23 | `/api/matching/recommend` | GET | è·å–æ¨èç”¨æˆ·åˆ—è¡¨ | âœ… |
| 24 | `/api/matching/like` | POST | å–œæ¬¢æ“ä½œ | âœ… |
| 25 | `/api/matching/super-like` | POST | è¶…çº§å–œæ¬¢æ“ä½œ | âœ… |
| 26 | `/api/matching/pass` | POST | è·³è¿‡æ“ä½œ | âœ… |
| 27 | `/api/matching/liked-me` | GET | æŸ¥çœ‹è°å–œæ¬¢æˆ‘ | âœ… |
| 28 | `/api/matching/limit-info` | GET | è·å–åŒ¹é…é™åˆ¶ä¿¡æ¯ | âœ… |
| 29 | `/api/oss/upload` | POST | ä¸Šä¼ å›¾ç‰‡ï¼ˆæ–‡ä»¶ï¼‰ | âœ… |
| 30 | `/api/oss/upload/base64` | POST | ä¸Šä¼ å›¾ç‰‡ï¼ˆBase64ï¼‰ | âœ… |
| 31 | `/api/oss/batch-upload` | POST | æ‰¹é‡ä¸Šä¼ å›¾ç‰‡ | âœ… |
| 32 | `/api/oss/delete` | DELETE | åˆ é™¤OSSå›¾ç‰‡ | âœ… |
| 33 | `/api/oss/sign-url` | GET | è·å–å›¾ç‰‡ç­¾åURL | âœ… |

---

## å®Œæ•´æµ‹è¯•æµç¨‹

### Step 1: å¾®ä¿¡ç™»å½•
```bash
curl -X POST http://localhost:8080/api/auth/wx/login \
  -H "Content-Type: application/json" \
  -d '{"code": "test_code_12345"}'
```

**è·å–token**ï¼šä»å“åº”ä¸­æå–`data.token`

### Step 2: å®Œå–„èµ„æ–™
```bash
TOKEN="ä»ä¸Šä¸€æ­¥è·å–çš„token"

curl -X POST http://localhost:8080/api/user/profile \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{
    "nickname": "æµ‹è¯•ç”¨æˆ·",
    "avatar": "https://example.com/avatar.jpg",
    "gender": 2,
    "birthday": "1998-05-20",
    "tagIds": [1, 5, 8]
  }'
```

### Step 3: æ£€æŸ¥èµ„æ–™çŠ¶æ€
```bash
curl -X GET http://localhost:8080/api/user/profile/status \
  -H "Authorization: Bearer $TOKEN"
```

### Step 4: è®¾ç½®åŒ¹é…åå¥½
```bash
curl -X POST http://localhost:8080/api/matching/preference \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{
    "minAge": 20,
    "maxAge": 35,
    "maxDistance": 10
  }'
```

### Step 5: ä¸Šä¼ ç…§ç‰‡
```bash
curl -X POST http://localhost:8080/api/user/album/upload \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{
    "photoUrl": "https://example.com/photo1.jpg",
    "isCover": true
  }'
```

### Step 6: è·å–æ ‡ç­¾åº“å¹¶è®¾ç½®æ ‡ç­¾
```bash
# è·å–æ ‡ç­¾åº“
curl -X GET http://localhost:8080/api/user/tags

# è®¾ç½®æˆ‘çš„æ ‡ç­¾
curl -X POST http://localhost:8080/api/user/tags \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{
    "tagIds": [1, 2, 3, 5]
  }'
```

### Step 7: è®¾ç½®éšç§
```bash
curl -X POST http://localhost:8080/api/user/privacy \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{
    "whoCanSeeMe": 2,
    "showDistance": 1,
    "showOnlineStatus": 0
  }'
```

### Step 8: æŸ¥çœ‹ä»–äººèµ„æ–™
```bash
curl -X GET http://localhost:8080/api/user/profile/1002 \
  -H "Authorization: Bearer $TOKEN"
```

### Step 9: éªŒè¯çŠ¶æ€
```bash
# å†æ¬¡ç™»å½•ï¼ŒæŸ¥çœ‹æ ‡å¿—ä½
curl -X POST http://localhost:8080/api/auth/wx/login \
  -H "Content-Type: application/json" \
  -d '{"code": "test_code_12345"}'
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "profileComplete": 1,
  "matchPreferenceSet": 1
}
```

---

## é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 200 | æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªç™»å½•æˆ–tokenæ— æ•ˆ |
| 404 | ç”¨æˆ·ä¸å­˜åœ¨ |
| 40001 | ç…§ç‰‡æ•°é‡è¶…é™ |
| 40002 | æ ‡ç­¾æ•°é‡è¶…é™ï¼ˆæœ€å¤š10ä¸ªï¼‰ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

---

## å¸¸è§é—®é¢˜

### 1. ä¸ºä»€ä¹ˆæˆ‘è®¾ç½®äº†èµ„æ–™ï¼ŒprofileCompleteè¿˜æ˜¯0ï¼Ÿ

**å¯èƒ½åŸå› **ï¼š
- æ€§åˆ«ä¸º0ï¼ˆæœªçŸ¥ï¼‰
- ç¼ºå°‘å…´è¶£æ ‡ç­¾
- æ˜µç§°ã€å¤´åƒã€ç”Ÿæ—¥æœªå¡«å†™

**è§£å†³æ–¹æ¡ˆ**ï¼šè°ƒç”¨`/api/user/profile/status`æŸ¥çœ‹ç¼ºå¤±å­—æ®µ

### 2. å¯ä»¥åªæ›´æ–°éƒ¨åˆ†å­—æ®µå—ï¼Ÿ

**å¯ä»¥ï¼** æ‰€æœ‰å­—æ®µéƒ½æ˜¯å¯é€‰çš„ï¼Œåªæ›´æ–°æä¾›çš„å­—æ®µã€‚

### 3. æ ‡ç­¾æœ€å¤šå¯ä»¥é€‰å‡ ä¸ªï¼Ÿ

**æœ€å¤š10ä¸ª**ã€‚å®Œå–„èµ„æ–™æ—¶è‡³å°‘é€‰1ä¸ªï¼Œå¦åˆ™profileCompleteä¸ä¼šå˜ä¸º1ã€‚

### 4. æ€§åˆ«å¯ä»¥è®¾ç½®ä¸º0ï¼ˆæœªçŸ¥ï¼‰å—ï¼Ÿ

**å¯ä»¥è®¾ç½®ï¼Œä½†ä¸ç®—å®Œå–„ã€‚** èµ„æ–™å®Œå–„åˆ¤æ–­æ—¶ï¼Œæ€§åˆ«å¿…é¡»æ˜¯1æˆ–2ã€‚

### 5. å®Œå–„èµ„æ–™å’Œæ›´æ–°èµ„æ–™æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

**æ²¡æœ‰æœ¬è´¨åŒºåˆ«**ã€‚ä¸¤ä¸ªæ¥å£éƒ½è°ƒç”¨åŒä¸€ä¸ªserviceæ–¹æ³•ï¼Œåªæ˜¯è·¯å¾„å’Œè¿”å›æ¶ˆæ¯ä¸åŒï¼š
- `/api/user/profile` - è¿”å›"èµ„æ–™ä¿å­˜æˆåŠŸ"
- `/api/user/profile/update` - è¿”å›"èµ„æ–™æ›´æ–°æˆåŠŸ"

### 6. ç…§ç‰‡æœ€å¤šå¯ä»¥ä¸Šä¼ å‡ å¼ ï¼Ÿ

**æœ€å¤š9å¼ **ã€‚è¶…è¿‡é™åˆ¶ä¼šè¿”å›é”™è¯¯ç 40001ã€‚

### 7. å¦‚ä½•æŸ¥çœ‹ä»–äººèµ„æ–™ï¼Ÿ

ä½¿ç”¨ `GET /api/user/profile/{userId}`ï¼Œä¼šæ ¹æ®å¯¹æ–¹çš„éšç§è®¾ç½®è¿”å›ç›¸åº”ä¿¡æ¯ã€‚

### 8. æ‹‰é»‘ç”¨æˆ·åä¼šæœ‰ä»€ä¹ˆå½±å“ï¼Ÿ

- åŒæ–¹æ— æ³•çœ‹åˆ°å¯¹æ–¹çš„åŠ¨æ€å’Œèµ„æ–™
- è‡ªåŠ¨å–æ¶ˆå…³æ³¨å’Œç²‰ä¸å…³ç³»
- æ— æ³•äº’ç›¸å‘é€æ¶ˆæ¯

### 9. éšç§è®¾ç½®ä¸­"è°å¯ä»¥çœ‹æˆ‘"çš„é€‰é¡¹è¯´æ˜ï¼Ÿ

- **1-æ‰€æœ‰äºº**ï¼šä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥æŸ¥çœ‹ä½ çš„èµ„æ–™
- **2-ä»…åŒ¹é…çš„äºº**ï¼šåªæœ‰åŒ¹é…æˆåŠŸçš„ç”¨æˆ·å¯ä»¥æŸ¥çœ‹
- **3-å…³é—­**ï¼šå…³é—­èµ„æ–™å±•ç¤ºï¼Œå…¶ä»–äººæ— æ³•æŸ¥çœ‹

---

## é™„å½•ï¼šå‰ç«¯é›†æˆç¤ºä¾‹

### å°ç¨‹åºç™»å½•å¼•å¯¼é€»è¾‘

```javascript
// ç™»å½•
wx.request({
  url: 'http://localhost:8080/api/auth/wx/login',
  method: 'POST',
  data: { code: wxCode },
  success: (res) => {
    const { profileComplete, matchPreferenceSet, token } = res.data.data;
    
    // ä¿å­˜token
    wx.setStorageSync('token', token);
    
    // æ ¹æ®çŠ¶æ€å¼•å¯¼
    if (profileComplete === 0) {
      // å¼•å¯¼å®Œå–„èµ„æ–™
      wx.navigateTo({ url: '/pages/profile-setup/index' });
    } else if (matchPreferenceSet === 0) {
      // å¼•å¯¼è®¾ç½®åŒ¹é…åå¥½
      wx.navigateTo({ url: '/pages/matching-preference/index' });
    } else {
      // è¿›å…¥ä¸»é¡µ
      wx.switchTab({ url: '/pages/home/index' });
    }
  }
});
```

### æäº¤å®Œå–„èµ„æ–™

```javascript
wx.request({
  url: 'http://localhost:8080/api/user/profile',
  method: 'POST',
  header: {
    'Authorization': `Bearer ${wx.getStorageSync('token')}`
  },
  data: {
    nickname: 'å°é›¨',
    avatar: 'https://...',
    gender: 2,
    birthday: '1998-05-20',
    tagIds: [1, 5, 8]
  },
  success: (res) => {
    wx.showToast({ title: 'èµ„æ–™ä¿å­˜æˆåŠŸ' });
    // å¼•å¯¼è®¾ç½®åŒ¹é…åå¥½
    wx.navigateTo({ url: '/pages/matching-preference/index' });
  }
});
```

### ä¸Šä¼ ç…§ç‰‡

```javascript
// 1. é€‰æ‹©å›¾ç‰‡
wx.chooseImage({
  count: 1,
  success: (res) => {
    const tempFilePath = res.tempFilePaths[0];
    
    // 2. ä¸Šä¼ åˆ°äº‘å­˜å‚¨ï¼ˆæˆ–è‡ªå·±çš„æœåŠ¡å™¨ï¼‰
    wx.cloud.uploadFile({
      cloudPath: `photos/${Date.now()}.jpg`,
      filePath: tempFilePath,
      success: (uploadRes) => {
        const photoUrl = uploadRes.fileID;
        
        // 3. è°ƒç”¨æ¥å£ä¿å­˜ç…§ç‰‡è®°å½•
        wx.request({
          url: 'http://localhost:8080/api/user/album/upload',
          method: 'POST',
          header: {
            'Authorization': `Bearer ${wx.getStorageSync('token')}`
          },
          data: {
            photoUrl: photoUrl,
            isCover: false
          },
          success: (res) => {
            wx.showToast({ title: 'ä¸Šä¼ æˆåŠŸ' });
          }
        });
      }
    });
  }
});
```

### æŸ¥çœ‹ä»–äººèµ„æ–™

```javascript
// ç‚¹å‡»ç”¨æˆ·å¤´åƒæ—¶
onUserClick(userId) {
  wx.request({
    url: `http://localhost:8080/api/user/profile/${userId}`,
    method: 'GET',
    header: {
      'Authorization': `Bearer ${wx.getStorageSync('token')}`
    },
    success: (res) => {
      const userProfile = res.data.data;
      // è·³è½¬åˆ°ç”¨æˆ·è¯¦æƒ…é¡µ
      wx.navigateTo({
        url: `/pages/user-detail/index?userId=${userId}`,
        success: (res) => {
          // é€šè¿‡eventChannelä¼ é€’æ•°æ®
          res.eventChannel.emit('userProfile', userProfile);
        }
      });
    }
  });
}
```

### è®¾ç½®éšç§

```javascript
wx.request({
  url: 'http://localhost:8080/api/user/privacy',
  method: 'POST',
  header: {
    'Authorization': `Bearer ${wx.getStorageSync('token')}`
  },
  data: {
    whoCanSeeMe: 2,        // ä»…åŒ¹é…çš„äºº
    showDistance: 1,       // æ˜¾ç¤ºè·ç¦»
    showOnlineStatus: 0    // ä¸æ˜¾ç¤ºåœ¨çº¿çŠ¶æ€
  },
  success: (res) => {
    wx.showToast({ title: 'è®¾ç½®æˆåŠŸ' });
  }
});
```

### æ‹‰é»‘ç”¨æˆ·

```javascript
onBlockUser(userId) {
  wx.showModal({
    title: 'ç¡®è®¤æ‹‰é»‘',
    content: 'æ‹‰é»‘åå°†æ— æ³•çœ‹åˆ°å¯¹æ–¹çš„åŠ¨æ€',
    success: (res) => {
      if (res.confirm) {
        wx.request({
          url: `http://localhost:8080/api/user/blacklist/${userId}`,
          method: 'POST',
          header: {
            'Authorization': `Bearer ${wx.getStorageSync('token')}`
          },
          success: (res) => {
            wx.showToast({ title: 'æ‹‰é»‘æˆåŠŸ' });
            // è¿”å›ä¸Šä¸€é¡µæˆ–åˆ·æ–°åˆ—è¡¨
            wx.navigateBack();
          }
        });
      }
    }
  });
}
```

### è·å–å¹¶è®¾ç½®æ ‡ç­¾

```javascript
// 1. è·å–æ ‡ç­¾åº“
wx.request({
  url: 'http://localhost:8080/api/user/tags',
  method: 'GET',
  success: (res) => {
    const tagLibrary = res.data.data;
    this.setData({ tagLibrary });
  }
});

// 2. ç”¨æˆ·é€‰æ‹©æ ‡ç­¾åä¿å­˜
onTagsConfirm(selectedTagIds) {
  wx.request({
    url: 'http://localhost:8080/api/user/tags',
    method: 'POST',
    header: {
      'Authorization': `Bearer ${wx.getStorageSync('token')}`
    },
    data: {
      tagIds: selectedTagIds
    },
    success: (res) => {
      wx.showToast({ title: 'æ ‡ç­¾è®¾ç½®æˆåŠŸ' });
    }
  });
}
```

---

## 34. ä¸Šä¼ å›¾ç‰‡ï¼ˆæ–‡ä»¶æ–¹å¼ï¼‰

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/oss/upload`
- **æ¥å£è¯´æ˜**ï¼š**[ç¬¬1æ­¥]** ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶åˆ°é˜¿é‡Œäº‘OSSï¼Œè·å¾—å›¾ç‰‡URLåï¼Œéœ€è°ƒç”¨ `/api/media/save` ä¿å­˜åˆ°ä¸šåŠ¡ç³»ç»Ÿ
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
Content-Type: multipart/form-data
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| file | File | æ˜¯ | å›¾ç‰‡æ–‡ä»¶ |
| category | String | æ˜¯ | å›¾ç‰‡åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š<br/>â€¢ `avatar` - ç”¨æˆ·å¤´åƒ<br/>â€¢ `album` - ç›¸å†Œç…§ç‰‡<br/>â€¢ `moment` - åŠ¨æ€å›¾ç‰‡<br/>â€¢ `activity` - æ´»åŠ¨å›¾ç‰‡<br/>â€¢ `background` - ä¸ªäººä¸»é¡µèƒŒæ™¯å¢™ |

### categoryå‚æ•°è¯´æ˜

| å€¼ | è¯´æ˜ | ç”¨é€” |
|-------|------|------|
| avatar | ç”¨æˆ·å¤´åƒ | ä¸ªäººèµ„æ–™é¡µçš„å¤´åƒå›¾ç‰‡ |
| album | ç›¸å†Œç…§ç‰‡ | ç”¨æˆ·ç›¸å†Œä¸­çš„ç…§ç‰‡ |
| moment | åŠ¨æ€å›¾ç‰‡ | å‘å¸ƒåŠ¨æ€/æœ‹å‹åœˆæ—¶çš„é…å›¾ |
| activity | æ´»åŠ¨å›¾ç‰‡ | æ­å­æ´»åŠ¨çš„å°é¢æˆ–è¯¦æƒ…å›¾ |
| background | èƒŒæ™¯å¢™å›¾ç‰‡ | ä¸ªäººä¸»é¡µçš„èƒŒæ™¯å¢™å›¾ç‰‡ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/oss/upload \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "file=@/path/to/image.jpg" \
  -F "category=avatar"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "å›¾ç‰‡ä¸Šä¼ æˆåŠŸ",
  "data": {
    "imageUrl": "https://friend-mini.oss-cn-beijing.aliyuncs.com/uploads/avatar/7/20251102/xxx.jpg",
    "category": "avatar",
    "uploadTime": 1699000000000
  }
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| imageUrl | String | å›¾ç‰‡è®¿é—®URLï¼ˆæ°¸ä¹…æœ‰æ•ˆï¼‰ï¼Œå¯ç›´æ¥åœ¨æµè§ˆå™¨é¢„è§ˆ |
| category | String | å›¾ç‰‡åˆ†ç±» |
| uploadTime | Long | ä¸Šä¼ æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ |

### ä¸šåŠ¡è¯´æ˜

1. **æ”¯æŒæ ¼å¼**ï¼šjpgã€pngã€gifã€webp
2. **æ–‡ä»¶å¤§å°é™åˆ¶**ï¼š10MB
3. **å­˜å‚¨è·¯å¾„**ï¼šuploads/{category}/{userId}/{yyyyMMdd}/{uuid}.{ext}
4. **è‡ªåŠ¨è®¾ç½®å…ƒæ•°æ®**ï¼šContent-Typeå’ŒContent-Dispositionï¼Œæµè§ˆå™¨å¯ç›´æ¥é¢„è§ˆ
5. **URLæ°¸ä¹…æœ‰æ•ˆ**ï¼šè¿”å›çš„URLæ— è¿‡æœŸæ—¶é—´ï¼Œå¯æ°¸ä¹…è®¿é—®ï¼ˆéœ€ç¡®ä¿OSS bucketè®¾ç½®ä¸ºå…¬å…±è¯»ï¼‰
6. **âš ï¸ é‡è¦**ï¼šæ­¤æ¥å£ä»…ä¸Šä¼ åˆ°OSSï¼Œ**å¿…é¡»**å†è°ƒç”¨ `POST /api/media/save` æ‰èƒ½å…³è”åˆ°ä¸šåŠ¡ï¼ˆå¤´åƒã€ç›¸å†Œç­‰ï¼‰

### å®Œæ•´ç¤ºä¾‹ï¼ˆä¸¤æ­¥ä¸Šä¼ ï¼‰

```bash
# æ­¥éª¤1ï¼šä¸Šä¼ åˆ°OSS
curl -X POST http://localhost:8080/api/oss/upload \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "file=@/path/to/avatar.jpg" \
  -F "category=avatar"

# è¿”å›ï¼š
# {
#   "code": 200,
#   "data": {
#     "imageUrl": "https://your-bucket.oss.../avatar.jpg"
#   }
# }

# æ­¥éª¤2ï¼šä¿å­˜åˆ°ä¸šåŠ¡ç³»ç»Ÿï¼ˆå¤´åƒï¼‰
curl -X POST http://localhost:8080/api/media/save \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "imageUrl": "https://your-bucket.oss.../avatar.jpg",
    "mediaType": "avatar",
    "isPrimary": true
  }'

# å®Œæˆï¼å¤´åƒå·²ä¿å­˜
```

---

## 35. ä¸Šä¼ å›¾ç‰‡ï¼ˆBase64æ–¹å¼ï¼‰

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/oss/upload/base64`
- **æ¥å£è¯´æ˜**ï¼š**[ç¬¬1æ­¥]** ä¸Šä¼ Base64ç¼–ç çš„å›¾ç‰‡åˆ°OSSï¼Œè·å¾—URLåéœ€è°ƒç”¨ `/api/media/save`
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| imageData | String | æ˜¯ | Base64ç¼–ç çš„å›¾ç‰‡æ•°æ® |
| category | String | æ˜¯ | å›¾ç‰‡åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š<br/>â€¢ `avatar` - ç”¨æˆ·å¤´åƒ<br/>â€¢ `album` - ç›¸å†Œç…§ç‰‡<br/>â€¢ `moment` - åŠ¨æ€å›¾ç‰‡<br/>â€¢ `activity` - æ´»åŠ¨å›¾ç‰‡<br/>â€¢ `background` - ä¸ªäººä¸»é¡µèƒŒæ™¯å¢™ |
| fileExtension | String | å¦ | æ–‡ä»¶æ‰©å±•åï¼ˆé»˜è®¤jpgï¼‰ |

### categoryå‚æ•°è¯´æ˜

| å€¼ | è¯´æ˜ | ç”¨é€” |
|-------|------|------|
| avatar | ç”¨æˆ·å¤´åƒ | ä¸ªäººèµ„æ–™é¡µçš„å¤´åƒå›¾ç‰‡ |
| album | ç›¸å†Œç…§ç‰‡ | ç”¨æˆ·ç›¸å†Œä¸­çš„ç…§ç‰‡ |
| moment | åŠ¨æ€å›¾ç‰‡ | å‘å¸ƒåŠ¨æ€/æœ‹å‹åœˆæ—¶çš„é…å›¾ |
| activity | æ´»åŠ¨å›¾ç‰‡ | æ­å­æ´»åŠ¨çš„å°é¢æˆ–è¯¦æƒ…å›¾ |
| background | èƒŒæ™¯å¢™å›¾ç‰‡ | ä¸ªäººä¸»é¡µçš„èƒŒæ™¯å¢™å›¾ç‰‡ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/oss/upload/base64 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "imageData": "data:image/png;base64,iVBORw0KGgo...",
    "category": "album",
    "fileExtension": "png"
  }'
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "å›¾ç‰‡ä¸Šä¼ æˆåŠŸ",
  "data": {
    "imageUrl": "https://friend-mini.oss-cn-beijing.aliyuncs.com/uploads/album/7/20251102/xxx.png",
    "category": "album",
    "uploadTime": 1699000000000
  }
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| imageUrl | String | å›¾ç‰‡è®¿é—®URLï¼ˆæ°¸ä¹…æœ‰æ•ˆï¼‰ï¼Œå¯ç›´æ¥åœ¨æµè§ˆå™¨é¢„è§ˆ |
| category | String | å›¾ç‰‡åˆ†ç±» |
| uploadTime | Long | ä¸Šä¼ æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ |

### ä¸šåŠ¡è¯´æ˜

1. **æ”¯æŒBase64æ ¼å¼**ï¼šæ”¯æŒ `data:image/png;base64,xxx` æˆ–çº¯Base64æ•°æ®
2. **æ–‡ä»¶å¤§å°é™åˆ¶**ï¼š10MB
3. **å­˜å‚¨è·¯å¾„**ï¼šuploads/{category}/{userId}/{yyyyMMdd}/{uuid}.{ext}
4. **URLæ°¸ä¹…æœ‰æ•ˆ**ï¼šè¿”å›çš„URLæ— è¿‡æœŸæ—¶é—´ï¼Œå¯æ°¸ä¹…è®¿é—®ï¼ˆéœ€ç¡®ä¿OSS bucketè®¾ç½®ä¸ºå…¬å…±è¯»ï¼‰
5. **âš ï¸ é‡è¦**ï¼šæ­¤æ¥å£ä»…ä¸Šä¼ åˆ°OSSï¼Œ**å¿…é¡»**å†è°ƒç”¨ `POST /api/media/save` æ‰èƒ½å…³è”åˆ°ä¸šåŠ¡

### å®Œæ•´ç¤ºä¾‹ï¼ˆBase64ä¸¤æ­¥ä¸Šä¼ ï¼‰

```bash
# æ­¥éª¤1ï¼šBase64ä¸Šä¼ åˆ°OSS
curl -X POST http://localhost:8080/api/oss/upload/base64 \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "imageData": "data:image/jpeg;base64,/9j/4AAQSkZJRg...",
    "category": "avatar"
  }'

# è¿”å›å›¾ç‰‡URL

# æ­¥éª¤2ï¼šä¿å­˜åˆ°ä¸šåŠ¡ç³»ç»Ÿ
curl -X POST http://localhost:8080/api/media/save \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "imageUrl": "è¿”å›çš„URL",
    "mediaType": "avatar",
    "isPrimary": true
  }'
```

---

## 36. æ‰¹é‡ä¸Šä¼ å›¾ç‰‡

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/oss/upload/batch`
- **æ¥å£è¯´æ˜**ï¼š**[ç¬¬1æ­¥]** æ‰¹é‡ä¸Šä¼ å¤šå¼ å›¾ç‰‡åˆ°OSSï¼Œè·å¾—URLsåéœ€é€ä¸ªè°ƒç”¨ `/api/media/save`
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
Content-Type: multipart/form-data
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| files | File[] | æ˜¯ | å›¾ç‰‡æ–‡ä»¶æ•°ç»„ |
| category | String | æ˜¯ | å›¾ç‰‡åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š<br/>â€¢ `avatar` - ç”¨æˆ·å¤´åƒ<br/>â€¢ `album` - ç›¸å†Œç…§ç‰‡<br/>â€¢ `moment` - åŠ¨æ€å›¾ç‰‡<br/>â€¢ `activity` - æ´»åŠ¨å›¾ç‰‡<br/>â€¢ `background` - ä¸ªäººä¸»é¡µèƒŒæ™¯å¢™ |

### categoryå‚æ•°è¯´æ˜

| å€¼ | è¯´æ˜ | ç”¨é€” |
|-------|------|------|
| avatar | ç”¨æˆ·å¤´åƒ | ä¸ªäººèµ„æ–™é¡µçš„å¤´åƒå›¾ç‰‡ |
| album | ç›¸å†Œç…§ç‰‡ | ç”¨æˆ·ç›¸å†Œä¸­çš„ç…§ç‰‡ |
| moment | åŠ¨æ€å›¾ç‰‡ | å‘å¸ƒåŠ¨æ€/æœ‹å‹åœˆæ—¶çš„é…å›¾ |
| activity | æ´»åŠ¨å›¾ç‰‡ | æ­å­æ´»åŠ¨çš„å°é¢æˆ–è¯¦æƒ…å›¾ |
| background | èƒŒæ™¯å¢™å›¾ç‰‡ | ä¸ªäººä¸»é¡µçš„èƒŒæ™¯å¢™å›¾ç‰‡ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/oss/upload/batch \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "files=@image1.jpg" \
  -F "files=@image2.jpg" \
  -F "category=moment"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æ‰¹é‡ä¸Šä¼ æˆåŠŸ",
  "data": [
    {
      "imageUrl": "https://friend-mini.oss-cn-beijing.aliyuncs.com/uploads/moment/7/20251102/xxx1.jpg",
      "category": "moment",
      "uploadTime": 1699000000000
    },
    {
      "imageUrl": "https://friend-mini.oss-cn-beijing.aliyuncs.com/uploads/moment/7/20251102/xxx2.jpg",
      "category": "moment",
      "uploadTime": 1699000000001
    }
  ]
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| data | Array | ä¸Šä¼ ç»“æœæ•°ç»„ |
| imageUrl | String | å›¾ç‰‡è®¿é—®URLï¼ˆæ°¸ä¹…æœ‰æ•ˆï¼‰ï¼Œå¯ç›´æ¥åœ¨æµè§ˆå™¨é¢„è§ˆ |
| category | String | å›¾ç‰‡åˆ†ç±» |
| uploadTime | Long | ä¸Šä¼ æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ |

### ä¸šåŠ¡è¯´æ˜

1. **æ‰¹é‡é™åˆ¶**ï¼šä¸€æ¬¡æœ€å¤šä¸Šä¼ 10å¼ å›¾ç‰‡
2. **åŸå­æ€§**ï¼šå¦‚æœæŸå¼ å›¾ç‰‡ä¸Šä¼ å¤±è´¥ï¼Œä¸å½±å“å…¶ä»–å›¾ç‰‡
3. **URLæ°¸ä¹…æœ‰æ•ˆ**ï¼šè¿”å›çš„URLæ— è¿‡æœŸæ—¶é—´ï¼Œå¯æ°¸ä¹…è®¿é—®ï¼ˆéœ€ç¡®ä¿OSS bucketè®¾ç½®ä¸ºå…¬å…±è¯»ï¼‰
4. **âš ï¸ é‡è¦**ï¼šæ­¤æ¥å£ä»…æ‰¹é‡ä¸Šä¼ åˆ°OSSï¼Œ**å¿…é¡»**é€ä¸ªè°ƒç”¨ `POST /api/media/save` æ‰èƒ½ä¿å­˜åˆ°ä¸šåŠ¡

### å®Œæ•´ç¤ºä¾‹ï¼ˆæ‰¹é‡ä¸¤æ­¥ä¸Šä¼ ï¼‰

```bash
# æ­¥éª¤1ï¼šæ‰¹é‡ä¸Šä¼ åˆ°OSS
curl -X POST http://localhost:8080/api/oss/upload/batch \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "files=@photo1.jpg" \
  -F "files=@photo2.jpg" \
  -F "files=@photo3.jpg" \
  -F "category=album"

# è¿”å›ï¼š
# {
#   "code": 200,
#   "data": [
#     {"imageUrl": "https://your-bucket.oss.../photo1.jpg", ...},
#     {"imageUrl": "https://your-bucket.oss.../photo2.jpg", ...},
#     {"imageUrl": "https://your-bucket.oss.../photo3.jpg", ...}
#   ]
# }

# æ­¥éª¤2ï¼šé€ä¸ªä¿å­˜åˆ°ä¸šåŠ¡ç³»ç»Ÿï¼ˆå¯ä»¥ä½¿ç”¨å¾ªç¯æˆ–å¹¶å‘è¯·æ±‚ï¼‰
# å¯¹äºæ¯ä¸ª imageUrlï¼š
curl -X POST http://localhost:8080/api/media/save \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "imageUrl": "https://your-bucket.oss.../photo1.jpg",
    "mediaType": "album",
    "isPrimary": false
  }'

# é‡å¤è°ƒç”¨ï¼Œç›´åˆ°æ‰€æœ‰å›¾ç‰‡éƒ½ä¿å­˜å®Œæˆ
```

---

## 37. åˆ é™¤OSSå›¾ç‰‡

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`DELETE /api/oss/delete`
- **æ¥å£è¯´æ˜**ï¼šåˆ é™¤OSSä¸Šçš„å›¾ç‰‡æ–‡ä»¶
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| imageUrl | String | æ˜¯ | å›¾ç‰‡å®Œæ•´URL |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X DELETE "http://localhost:8080/api/oss/delete?imageUrl=https://friend-mini.oss-cn-beijing.aliyuncs.com/uploads/avatar/7/20251102/xxx.jpg" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "å›¾ç‰‡åˆ é™¤æˆåŠŸ",
  "data": true
}
```

---

## 38. è·å–å›¾ç‰‡ç­¾åURL

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/oss/signed-url`
- **æ¥å£è¯´æ˜**ï¼šè·å–OSSå›¾ç‰‡çš„ä¸´æ—¶è®¿é—®ç­¾åURLï¼ˆâš ï¸ å¦‚æœbucketè®¾ç½®ä¸ºå…¬å…±è¯»ï¼Œæ— éœ€è°ƒç”¨æ­¤æ¥å£ï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´

```
Authorization: Bearer {token}
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| objectKey | String | æ˜¯ | å¯¹è±¡é”®ï¼ˆæ–‡ä»¶è·¯å¾„ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/api/oss/signed-url?objectKey=uploads/avatar/7/20251102/xxx.jpg" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "è·å–ç­¾åURLæˆåŠŸ",
  "data": "http://friend-mini.oss-cn-beijing.aliyuncs.com/uploads/avatar/7/20251102/xxx.jpg?Expires=1762090270&OSSAccessKeyId=xxx&Signature=xxx"
}
```

### ä¸šåŠ¡è¯´æ˜

1. **é€‚ç”¨åœºæ™¯**ï¼š
   - âš ï¸ **å½“å‰é…ç½®**ï¼šå¦‚æœbucketè®¾ç½®ä¸ºå…¬å…±è¯»ï¼Œä¸Šä¼ æ¥å£è¿”å›çš„URLæ°¸ä¹…æœ‰æ•ˆï¼Œ**æ— éœ€è°ƒç”¨æ­¤æ¥å£**
   - ğŸ“Œ **ç§æœ‰bucket**ï¼šå¦‚æœbucketæ˜¯ç§æœ‰çš„ï¼Œéœ€è¦ä½¿ç”¨æ­¤æ¥å£ç”Ÿæˆä¸´æ—¶ç­¾åURL
2. **URLæœ‰æ•ˆæœŸ**ï¼šç­¾åURLæœ‰æ•ˆæœŸ3600ç§’ï¼ˆ1å°æ—¶ï¼‰
3. **objectKeyæ ¼å¼**ï¼šuploads/{category}/{userId}/{yyyyMMdd}/{filename}
4. **æå–objectKey**ï¼šä»ä¸Šä¼ æ¥å£è¿”å›çš„URLä¸­æå–è·¯å¾„éƒ¨åˆ†
   - ä¾‹å¦‚ï¼š`https://friend-mini.oss-cn-beijing.aliyuncs.com/uploads/avatar/7/20251102/xxx.jpg`
   - å¯¹åº”çš„objectKeyä¸ºï¼š`uploads/avatar/7/20251102/xxx.jpg`

### æ¨èåšæ³•

| Bucketæƒé™ | ä¸Šä¼ æ¥å£è¿”å› | æ˜¯å¦éœ€è¦ç­¾åæ¥å£ |
|-----------|------------|----------------|
| å…¬å…±è¯» âœ…ï¼ˆæ¨èï¼‰ | æ°¸ä¹…URL | âŒ ä¸éœ€è¦ |
| ç§æœ‰ | æ™®é€šURL | âœ… éœ€è¦å®šæœŸåˆ·æ–°ç­¾å |

---

## 39. å‘å¸ƒåŠ¨æ€

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/moments/publish`
- **æ¥å£è¯´æ˜**ï¼šå‘å¸ƒåŠ¨æ€ï¼Œæ”¯æŒæ™®é€šåŠ¨æ€ï¼ˆæ­å­ã€æ‹çˆ±ï¼‰å’Œæ´»åŠ¨ç±»å‹ï¼ˆæ­å­æ´»åŠ¨ã€å®˜æ–¹æ´»åŠ¨ï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
Content-Type: application/json
```

### åŠ¨æ€ç±»å‹è¯´æ˜
- **Type 1 - æ­å­åŠ¨æ€**ï¼šæ™®é€šæ­å­åˆ†äº«ï¼Œå¯»æ‰¾æ­å­
- **Type 2 - æ‹çˆ±åŠ¨æ€**ï¼šæ‹çˆ±äº¤å‹ç›¸å…³çš„åŠ¨æ€
- **Type 3 - æ­å­æ´»åŠ¨**ï¼šç”¨æˆ·å‘èµ·çš„æ­å­æ´»åŠ¨ï¼ˆéœ€å¡«å†™æ´»åŠ¨æ—¶é—´ã€åœ°ç‚¹ï¼‰
- **Type 4 - å®˜æ–¹æ´»åŠ¨**ï¼šå¹³å°å®˜æ–¹å‘èµ·çš„çº¿ä¸‹æ´»åŠ¨

### æ´»åŠ¨ç±»å‹
- `sport` - è¿åŠ¨ï¼ˆç¾½æ¯›çƒã€ç¯®çƒã€è·‘æ­¥ç­‰ï¼‰
- `study` - å­¦ä¹ ï¼ˆå›¾ä¹¦é¦†ã€è‡ªä¹ å®¤ç­‰ï¼‰
- `travel` - æ—…æ¸¸ï¼ˆå‘¨æœ«æ¸¸ã€é•¿é€”æ¸¸ç­‰ï¼‰
- `workout` - å¥èº«ï¼ˆå¥èº«æˆ¿ã€ç‘œä¼½ç­‰ï¼‰
- `hobby` - çˆ±å¥½ï¼ˆæ‘„å½±ã€éŸ³ä¹ã€æ‰‹å·¥ç­‰ï¼‰
- `food` - ç¾é£Ÿï¼ˆæ¢åº—ã€èšé¤ç­‰ï¼‰
- `other` - å…¶ä»–

### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| momentType | Integer | æ˜¯ | åŠ¨æ€ç±»å‹ï¼š1-æ­å­åŠ¨æ€ 2-æ‹çˆ±åŠ¨æ€ 3-æ­å­æ´»åŠ¨ 4-å®˜æ–¹æ´»åŠ¨ |
| content | String | å¦ | åŠ¨æ€å†…å®¹ï¼Œæœ€å¤š1000å­— |
| title | String | æ´»åŠ¨å¿…å¡« | æ ‡é¢˜ï¼Œæœ€å¤š100å­— |
| city | String | å¦ | åŸå¸‚ |
| location | String | å¦ | ä½ç½®ä¿¡æ¯ |
| latitude | Decimal | å¦ | çº¬åº¦ |
| longitude | Decimal | å¦ | ç»åº¦ |
| photoUrls | Array | å¦ | å›¾ç‰‡URLsæ•°ç»„ï¼Œæœ€å¤š9å¼  |
| activityTime | DateTime | æ´»åŠ¨å¿…å¡« | æ´»åŠ¨æ—¶é—´ |
| activityType | String | å¦ | æ´»åŠ¨ç±»å‹ |
| maxParticipants | Integer | å¦ | æœ€å¤§å‚ä¸äººæ•°ï¼Œ0è¡¨ç¤ºä¸é™åˆ¶ |
| activityFee | Decimal | å¦ | æ´»åŠ¨è´¹ç”¨ï¼Œ0è¡¨ç¤ºå…è´¹ |
| contactMethod | String | å¦ | è”ç³»æ–¹å¼ |

### è¯·æ±‚ç¤ºä¾‹

**å‘å¸ƒæ™®é€šæ­å­åŠ¨æ€**ï¼š
```json
{
  "momentType": 1,
  "content": "å‘¨æœ«æƒ³æ‰¾äººä¸€èµ·å»çˆ¬å±±ï¼Œæœ‰æ²¡æœ‰å°ä¼™ä¼´ä¸€èµ·ï¼Ÿ",
  "city": "åŒ—äº¬",
  "latitude": 39.9042,
  "longitude": 116.4074,
  "photoUrls": ["https://oss.example.com/photo1.jpg"]
}
```

**å‘å¸ƒæ­å­æ´»åŠ¨**ï¼š
```json
{
  "momentType": 3,
  "title": "å‘¨æœ«ç¾½æ¯›çƒæ´»åŠ¨",
  "content": "æ‰¾3ä¸ªå°ä¼™ä¼´ä¸€èµ·æ‰“ç¾½æ¯›çƒ",
  "activityTime": "2025-11-10 14:00:00",
  "activityType": "sport",
  "maxParticipants": 4,
  "activityFee": 20.00,
  "location": "æœé˜³ä½“è‚²é¦†",
  "city": "åŒ—äº¬",
  "contactMethod": "å¾®ä¿¡ï¼šxxx"
}
```

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/moments/publish \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "momentType": 3,
    "title": "å‘¨æœ«ç¾½æ¯›çƒæ´»åŠ¨",
    "content": "æ‰¾3ä¸ªå°ä¼™ä¼´ä¸€èµ·æ‰“ç¾½æ¯›çƒ",
    "activityTime": "2025-11-10 14:00:00",
    "activityType": "sport",
    "maxParticipants": 4,
    "activityFee": 20.00,
    "location": "æœé˜³ä½“è‚²é¦†",
    "city": "åŒ—äº¬"
  }'
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "å‘å¸ƒæˆåŠŸ",
  "data": {
    "id": 1,
    "publisher": {
      "userId": "U17623500638845TAWQ0",
      "nickname": "å¼ ä¸‰",
      "avatar": "https://...",
      "gender": 1,
      "age": 25,
      "isVerified": true,
      "isVip": false
    },
    "momentType": 3,
    "momentTypeName": "æ­å­æ´»åŠ¨",
    "title": "å‘¨æœ«ç¾½æ¯›çƒæ´»åŠ¨",
    "content": "æ‰¾3ä¸ªå°ä¼™ä¼´ä¸€èµ·æ‰“ç¾½æ¯›çƒ",
    "location": "æœé˜³ä½“è‚²é¦†",
    "city": "åŒ—äº¬",
    "photos": [],
    "activityTime": "2025-11-10T14:00:00",
    "activityType": "sport",
    "activityTypeName": "è¿åŠ¨",
    "maxParticipants": 4,
    "currentParticipants": 0,
    "activityFee": 20.00,
    "activityStatus": 1,
    "activityStatusName": "æ‹›å‹Ÿä¸­",
    "likeCount": 0,
    "commentCount": 0,
    "viewCount": 0,
    "isLiked": false,
    "isRegistered": false,
    "isTop": false,
    "isFeatured": false,
    "createdAt": "2025-11-07T15:00:00",
    "timeDesc": "åˆšåˆš"
  },
  "traceId": "abc123"
}
```

### ä¸šåŠ¡è§„åˆ™
1. æ™®é€šç”¨æˆ·æ¯æ—¥é™åˆ¶å‘å¸ƒ3æ¡ï¼ŒVIPç”¨æˆ·10æ¡
2. æ´»åŠ¨ç±»å‹åŠ¨æ€å¿…é¡»å¡«å†™`title`å’Œ`activityTime`
3. æ‰€æœ‰åŠ¨æ€é»˜è®¤å®¡æ ¸é€šè¿‡ï¼ˆå¯é…ç½®å®¡æ ¸ç­–ç•¥ï¼‰
4. å›¾ç‰‡éœ€å…ˆé€šè¿‡OSSä¸Šä¼ æ¥å£è·å–URL

---

## 40. è·å–åŠ¨æ€åˆ—è¡¨

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/moments/list`
- **æ¥å£è¯´æ˜**ï¼šåˆ†é¡µè·å–åŠ¨æ€åˆ—è¡¨ï¼Œæ”¯æŒç±»å‹ç­›é€‰ã€åŸå¸‚ç­›é€‰ã€æŒ‡å®šç”¨æˆ·ç­›é€‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| momentType | Integer | å¦ | åŠ¨æ€ç±»å‹ç­›é€‰ï¼š1-æ­å­åŠ¨æ€ 2-æ‹çˆ±åŠ¨æ€ 3-æ­å­æ´»åŠ¨ 4-å®˜æ–¹æ´»åŠ¨ |
| userId | String | å¦ | ç”¨æˆ·IDï¼ˆæŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„åŠ¨æ€ï¼‰ |
| city | String | å¦ | åŸå¸‚ç­›é€‰ |
| latitude | Decimal | å¦ | çº¬åº¦ï¼ˆç”¨äºè·ç¦»è®¡ç®—ï¼‰ |
| longitude | Decimal | å¦ | ç»åº¦ï¼ˆç”¨äºè·ç¦»è®¡ç®—ï¼‰ |
| page | Integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| size | Integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10 |

### è¯·æ±‚ç¤ºä¾‹

```bash
# è·å–æ‰€æœ‰åŠ¨æ€
curl -X GET "http://localhost:8080/api/moments/list?page=1&size=10" \
  -H "Authorization: Bearer YOUR_TOKEN"

# è·å–åŒ—äº¬çš„æ­å­æ´»åŠ¨
curl -X GET "http://localhost:8080/api/moments/list?momentType=3&city=åŒ—äº¬&page=1&size=10" \
  -H "Authorization: Bearer YOUR_TOKEN"

# è·å–æŒ‡å®šç”¨æˆ·çš„åŠ¨æ€
curl -X GET "http://localhost:8080/api/moments/list?userId=U1699123456789AB12CD&page=1&size=10" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### æ³¨æ„äº‹é¡¹
- åªè¿”å›å®¡æ ¸é€šè¿‡çš„åŠ¨æ€
- è¿”å›åˆ—è¡¨æŒ‰ç½®é¡¶ä¼˜å…ˆã€æ—¶é—´å€’åºæ’åˆ—
- å¦‚æœæŒ‡å®šäº†`userId`å‚æ•°ï¼Œåªè¿”å›è¯¥ç”¨æˆ·å‘å¸ƒçš„åŠ¨æ€
- `userId`å‚æ•°ä¸ºä¸šåŠ¡ç”¨æˆ·IDï¼ˆæ ¼å¼ï¼šU1699123456789AB12CDï¼‰

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [
      {
        "id": 1,
        "publisher": {
          "userId": "U17623500638845TAWQ0",
          "nickname": "å¼ ä¸‰",
          "avatar": "https://...",
          "gender": 1,
          "age": 25,
          "isVerified": true,
          "isVip": false
        },
        "momentType": 3,
        "momentTypeName": "æ­å­æ´»åŠ¨",
        "title": "å‘¨æœ«ç¾½æ¯›çƒæ´»åŠ¨",
        "activityTime": "2025-11-10T14:00:00",
        "currentParticipants": 2,
        "maxParticipants": 4,
        "activityStatus": 1,
        "activityStatusName": "æ‹›å‹Ÿä¸­",
        "likeCount": 5,
        "commentCount": 2,
        "isLiked": false,
        "isRegistered": false,
        "timeDesc": "2å°æ—¶å‰"
      }
    ],
    "total": 50,
    "current": 1,
    "size": 10,
    "pages": 5
  },
  "traceId": "abc123"
}
```

---

## 41. è·å–åŠ¨æ€è¯¦æƒ…

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/moments/{momentId}`
- **æ¥å£è¯´æ˜**ï¼šè·å–åŠ¨æ€è¯¦æƒ…ï¼Œè‡ªåŠ¨å¢åŠ æµè§ˆæ•°
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°
- `momentId`ï¼šåŠ¨æ€ID

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "publisher": {
      "userId": "U17623500638845TAWQ0",
      "nickname": "å¼ ä¸‰",
      "avatar": "https://...",
      "gender": 1,
      "age": 25,
      "isVerified": true,
      "isVip": false
    },
    "momentType": 3,
    "momentTypeName": "æ­å­æ´»åŠ¨",
    "title": "å‘¨æœ«ç¾½æ¯›çƒæ´»åŠ¨",
    "content": "æ‰¾3ä¸ªå°ä¼™ä¼´ä¸€èµ·æ‰“ç¾½æ¯›çƒ",
    "location": "æœé˜³ä½“è‚²é¦†",
    "city": "åŒ—äº¬",
    "photos": ["https://..."],
    "activityTime": "2025-11-10T14:00:00",
    "activityType": "sport",
    "activityTypeName": "è¿åŠ¨",
    "maxParticipants": 4,
    "currentParticipants": 2,
    "activityFee": 20.00,
    "activityStatus": 1,
    "activityStatusName": "æ‹›å‹Ÿä¸­",
    "likeCount": 5,
    "commentCount": 2,
    "viewCount": 100,
    "isLiked": false,
    "isRegistered": false,
    "createdAt": "2025-11-07T15:00:00",
    "timeDesc": "2å°æ—¶å‰"
  },
  "traceId": "abc123"
}
```

---

## 42. ç‚¹èµåŠ¨æ€

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/moments/{momentId}/like`
- **æ¥å£è¯´æ˜**ï¼šç‚¹èµåŠ¨æ€ï¼Œé‡å¤ç‚¹èµæ— æ•ˆ
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°
- `momentId`ï¼šåŠ¨æ€ID

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "ç‚¹èµæˆåŠŸ",
  "data": null,
  "traceId": "abc123"
}
```

---

## 43. å–æ¶ˆç‚¹èµ

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`DELETE /api/moments/{momentId}/like`
- **æ¥å£è¯´æ˜**ï¼šå–æ¶ˆç‚¹èµåŠ¨æ€
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°
- `momentId`ï¼šåŠ¨æ€ID

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "å–æ¶ˆç‚¹èµæˆåŠŸ",
  "data": null,
  "traceId": "abc123"
}
```

---

## 44. ç¼–è¾‘åŠ¨æ€

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`PUT /api/moments/{momentId}`
- **æ¥å£è¯´æ˜**ï¼šç¼–è¾‘è‡ªå·±å·²å‘å¸ƒçš„åŠ¨æ€
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
Content-Type: application/json
```

### è·¯å¾„å‚æ•°
- `momentId`ï¼šåŠ¨æ€ID

### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| content | String | å¦ | åŠ¨æ€å†…å®¹ï¼Œæœ€å¤š1000å­— |
| title | String | å¦ | æ ‡é¢˜ï¼ˆæ´»åŠ¨ç±»å‹ï¼‰ï¼Œæœ€å¤š100å­— |
| city | String | å¦ | åŸå¸‚ |
| location | String | å¦ | ä½ç½®ä¿¡æ¯ |
| latitude | Decimal | å¦ | çº¬åº¦ |
| longitude | Decimal | å¦ | ç»åº¦ |
| photoUrls | Array | å¦ | å›¾ç‰‡URLsæ•°ç»„ï¼Œæœ€å¤š9å¼ ï¼ˆä¼ å…¥æ–°æ•°ç»„ä¼šæ›¿æ¢æ‰€æœ‰æ—§å›¾ç‰‡ï¼‰ |
| activityTime | DateTime | å¦ | æ´»åŠ¨æ—¶é—´ï¼ˆæ´»åŠ¨ç±»å‹ï¼Œä¸”æ— äººæŠ¥åæ—¶å¯ä¿®æ”¹ï¼‰ |
| activityType | String | å¦ | æ´»åŠ¨ç±»å‹ |
| maxParticipants | Integer | å¦ | æœ€å¤§å‚ä¸äººæ•°ï¼Œ0è¡¨ç¤ºä¸é™åˆ¶ï¼ˆä¸èƒ½å°äºå½“å‰æŠ¥åäººæ•°ï¼‰ |
| activityFee | Decimal | å¦ | æ´»åŠ¨è´¹ç”¨ï¼Œ0è¡¨ç¤ºå…è´¹ |
| contactMethod | String | å¦ | è”ç³»æ–¹å¼ |

### è¯·æ±‚ç¤ºä¾‹

**ç¼–è¾‘æ™®é€šåŠ¨æ€**ï¼š
```json
{
  "content": "æ›´æ–°åçš„åŠ¨æ€å†…å®¹",
  "location": "æ–°ä½ç½®",
  "latitude": 39.9042,
  "longitude": 116.4074,
  "city": "åŒ—äº¬",
  "photoUrls": ["https://oss.example.com/new1.jpg", "https://oss.example.com/new2.jpg"]
}
```

**ç¼–è¾‘æ´»åŠ¨åŠ¨æ€**ï¼š
```json
{
  "title": "æ›´æ–°åçš„æ´»åŠ¨æ ‡é¢˜",
  "content": "æ›´æ–°åçš„æ´»åŠ¨æè¿°",
  "activityTime": "2025-12-10 14:00:00",
  "maxParticipants": 10,
  "activityFee": 30.00,
  "contactMethod": "å¾®ä¿¡ï¼šnew_contact"
}
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "ç¼–è¾‘æˆåŠŸ",
  "data": {
    "momentId": 123,
    "userId": "U1699123456789AB12CD",
    "momentType": 1,
    "content": "æ›´æ–°åçš„åŠ¨æ€å†…å®¹",
    "title": null,
    "location": "æ–°ä½ç½®",
    "latitude": 39.9042,
    "longitude": 116.4074,
    "city": "åŒ—äº¬",
    "photoUrls": ["https://oss.example.com/new1.jpg", "https://oss.example.com/new2.jpg"],
    "likeCount": 5,
    "commentCount": 2,
    "isLiked": false,
    "createdAt": "2025-12-08 10:00:00",
    "updatedAt": "2025-12-08 15:30:00"
  },
  "traceId": "abc123"
}
```

### ä¸šåŠ¡è§„åˆ™

1. **æƒé™é™åˆ¶**
   - åªèƒ½ç¼–è¾‘è‡ªå·±å‘å¸ƒçš„åŠ¨æ€
   - åŠ¨æ€ä¸å­˜åœ¨æˆ–å·²åˆ é™¤æ—¶æ— æ³•ç¼–è¾‘

2. **æ´»åŠ¨ç±»å‹ç‰¹æ®Šé™åˆ¶**
   - å¦‚æœæ´»åŠ¨å·²æœ‰äººæŠ¥åï¼š
     - âŒ **ä¸èƒ½ä¿®æ”¹æ´»åŠ¨æ—¶é—´**ï¼ˆé¿å…å½±å“å·²æŠ¥åç”¨æˆ·ï¼‰
     - âœ… å¯ä»¥ä¿®æ”¹å…¶ä»–å­—æ®µï¼ˆæ ‡é¢˜ã€å†…å®¹ã€è´¹ç”¨ã€è”ç³»æ–¹å¼ç­‰ï¼‰
     - âš ï¸ æœ€å¤§å‚ä¸äººæ•°åªèƒ½å¢åŠ æˆ–ä¿æŒä¸å˜ï¼Œä¸èƒ½å‡å°‘åˆ°å°äºå½“å‰æŠ¥åäººæ•°
   - å¦‚æœæ´»åŠ¨æ— äººæŠ¥åï¼š
     - âœ… å¯ä»¥ä¿®æ”¹æ‰€æœ‰å­—æ®µï¼ŒåŒ…æ‹¬æ´»åŠ¨æ—¶é—´

3. **å›¾ç‰‡æ›´æ–°**
   - å¦‚æœä¼ å…¥ `photoUrls` æ•°ç»„ï¼Œä¼š**å®Œå…¨æ›¿æ¢**æ‰€æœ‰æ—§å›¾ç‰‡
   - ä¼ å…¥ç©ºæ•°ç»„ä¼šåˆ é™¤æ‰€æœ‰å›¾ç‰‡
   - ä¸ä¼  `photoUrls` å­—æ®µåˆ™ä¿æŒåŸæœ‰å›¾ç‰‡ä¸å˜

4. **å­—æ®µæ›´æ–°è§„åˆ™**
   - åªæ›´æ–°ä¼ å…¥çš„å­—æ®µï¼Œæœªä¼ å…¥çš„å­—æ®µä¿æŒåŸå€¼ä¸å˜
   - æ‰€æœ‰å­—æ®µéƒ½æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥åªæ›´æ–°éƒ¨åˆ†å­—æ®µ

5. **æ´»åŠ¨çŠ¶æ€è‡ªåŠ¨æ›´æ–°**
   - å¦‚æœä¿®æ”¹æœ€å¤§å‚ä¸äººæ•°åï¼Œå½“å‰æŠ¥åäººæ•°ç­‰äºæœ€å¤§äººæ•°ï¼Œæ´»åŠ¨çŠ¶æ€è‡ªåŠ¨å˜ä¸º"å·²æ»¡å‘˜"
   - å¦‚æœä¿®æ”¹æœ€å¤§å‚ä¸äººæ•°åï¼Œå½“å‰æŠ¥åäººæ•°å°äºæœ€å¤§äººæ•°ï¼Œä¸”åŸçŠ¶æ€ä¸º"å·²æ»¡å‘˜"ï¼Œæ´»åŠ¨çŠ¶æ€æ¢å¤ä¸º"æ‹›å‹Ÿä¸­"

### é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 40005 | åŠ¨æ€ä¸å­˜åœ¨æˆ–å·²åˆ é™¤ |
| 40006 | åªèƒ½ç¼–è¾‘è‡ªå·±çš„åŠ¨æ€ |
| 40012 | æ´»åŠ¨å·²æœ‰äººæŠ¥åï¼Œä¸èƒ½ä¿®æ”¹æ´»åŠ¨æ—¶é—´ |
| 40013 | æœ€å¤§äººæ•°ä¸èƒ½å°äºå½“å‰æŠ¥åäººæ•° |

---

## 45. åˆ é™¤åŠ¨æ€

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`DELETE /api/moments/{momentId}`
- **æ¥å£è¯´æ˜**ï¼šåˆ é™¤è‡ªå·±å‘å¸ƒçš„åŠ¨æ€ï¼ˆè½¯åˆ é™¤ï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°
- `momentId`ï¼šåŠ¨æ€ID

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": null,
  "traceId": "abc123"
}
```

### ä¸šåŠ¡è§„åˆ™
- åªèƒ½åˆ é™¤è‡ªå·±å‘å¸ƒçš„åŠ¨æ€
- åˆ é™¤ä¸ºè½¯åˆ é™¤ï¼Œæ•°æ®ä¸ä¼šçœŸæ­£åˆ é™¤

---

## 46. æŠ¥åæ´»åŠ¨

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/moments/{momentId}/register`
- **æ¥å£è¯´æ˜**ï¼šæŠ¥åå‚åŠ æ­å­æ´»åŠ¨æˆ–å®˜æ–¹æ´»åŠ¨
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°
- `momentId`ï¼šåŠ¨æ€IDï¼ˆæ´»åŠ¨ç±»å‹ï¼‰

### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| contactInfo | String | å¦ | è”ç³»æ–¹å¼ |
| remark | String | å¦ | å¤‡æ³¨ä¿¡æ¯ |

### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X POST "http://localhost:8080/api/moments/1/register?contactInfo=å¾®ä¿¡:xxx&remark=æœŸå¾…å‚åŠ " \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æŠ¥åæˆåŠŸ",
  "data": null,
  "traceId": "abc123"
}
```

### ä¸šåŠ¡è§„åˆ™
1. åªèƒ½æŠ¥åæ´»åŠ¨ç±»å‹çš„åŠ¨æ€ï¼ˆmomentType=3æˆ–4ï¼‰
2. ä¸èƒ½é‡å¤æŠ¥å
3. æ´»åŠ¨æ»¡å‘˜åä¸èƒ½æŠ¥å
4. æŠ¥åæˆåŠŸåå½“å‰å‚ä¸äººæ•°+1
5. è¾¾åˆ°æœ€å¤§äººæ•°æ—¶æ´»åŠ¨çŠ¶æ€å˜ä¸º"å·²æ»¡å‘˜"

---

## 47. å–æ¶ˆæŠ¥å

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/moments/{momentId}/cancel-registration`
- **æ¥å£è¯´æ˜**ï¼šå–æ¶ˆå·²æŠ¥åçš„æ´»åŠ¨
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°
- `momentId`ï¼šåŠ¨æ€IDï¼ˆæ´»åŠ¨ç±»å‹ï¼‰

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "å–æ¶ˆæŠ¥åæˆåŠŸ",
  "data": null,
  "traceId": "abc123"
}
```

### ä¸šåŠ¡è§„åˆ™
1. åªèƒ½å–æ¶ˆè‡ªå·±çš„æŠ¥å
2. å–æ¶ˆåå½“å‰å‚ä¸äººæ•°-1
3. å¦‚æœä¹‹å‰æ˜¯æ»¡å‘˜çŠ¶æ€ï¼Œå–æ¶ˆåæ¢å¤ä¸º"æ‹›å‹Ÿä¸­"

---

## 48. æ£€æŸ¥å‘å¸ƒé™åˆ¶

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/moments/publish-limit`
- **æ¥å£è¯´æ˜**ï¼šæŸ¥è¯¢å½“å‰ç”¨æˆ·ä»Šæ—¥å‰©ä½™å‘å¸ƒæ¬¡æ•°
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": 2,
  "traceId": "abc123"
}
```

**è¯´æ˜**ï¼š
- è¿”å›å€¼ä¸ºä»Šæ—¥å‰©ä½™å‘å¸ƒæ¬¡æ•°
- æ™®é€šç”¨æˆ·æ¯æ—¥3æ¡
- VIPç”¨æˆ·æ¯æ—¥10æ¡ï¼ˆå¯é…ç½®ï¼‰

---

## 49. è·å–VIPä¿¡æ¯

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/vip/info`
- **æ¥å£è¯´æ˜**ï¼šè·å–å½“å‰ç”¨æˆ·çš„VIPä¼šå‘˜ä¿¡æ¯
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### å“åº”ç¤ºä¾‹ï¼ˆVIPç”¨æˆ·ï¼‰

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "isVip": true,
    "vipLevel": 2,
    "vipLevelName": "å­£åº¦ä¼šå‘˜",
    "startTime": "2025-11-01T10:00:00",
    "expireTime": "2026-01-30T10:00:00",
    "remainingDays": 84,
    "autoRenew": false
  },
  "traceId": "abc123"
}
```

### å“åº”ç¤ºä¾‹ï¼ˆéVIPç”¨æˆ·ï¼‰

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "isVip": false
  },
  "traceId": "abc123"
}
```

### å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| isVip | Boolean | æ˜¯å¦æ˜¯VIP |
| vipLevel | Integer | ä¼šå‘˜ç­‰çº§ï¼š1-æœˆåº¦ 2-å­£åº¦ 3-å¹´åº¦ |
| vipLevelName | String | ä¼šå‘˜ç­‰çº§åç§° |
| startTime | DateTime | ä¼šå‘˜å¼€å§‹æ—¶é—´ |
| expireTime | DateTime | ä¼šå‘˜åˆ°æœŸæ—¶é—´ |
| remainingDays | Long | å‰©ä½™å¤©æ•° |
| autoRenew | Boolean | æ˜¯å¦è‡ªåŠ¨ç»­è´¹ |

---

## 50. æ£€æŸ¥VIPçŠ¶æ€

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/vip/check`
- **æ¥å£è¯´æ˜**ï¼šå¿«é€Ÿæ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æ˜¯VIP
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": true,
  "traceId": "abc123"
}
```

**è¯´æ˜**ï¼š
- è¿”å›`true`è¡¨ç¤ºæ˜¯VIPä¸”æœªè¿‡æœŸ
- è¿”å›`false`è¡¨ç¤ºä¸æ˜¯VIPæˆ–å·²è¿‡æœŸ

---

## 51. æ£€æŸ¥VIPåŠŸèƒ½æƒé™

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/vip/check-feature`
- **æ¥å£è¯´æ˜**ï¼šæ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™ä½¿ç”¨æŸä¸ªVIPåŠŸèƒ½
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| feature | String | æ˜¯ | åŠŸèƒ½åç§° |

### åŠŸèƒ½åç§°åˆ—è¡¨
- `unlimited_match` - æ— é™åˆ¶åŒ¹é…
- `advanced_filter` - é«˜çº§ç­›é€‰
- `see_who_liked_me` - æŸ¥çœ‹è°å–œæ¬¢æˆ‘
- `priority_display` - ä¼˜å…ˆå±•ç¤º
- `moment_top` - åŠ¨æ€ç½®é¡¶
- `super_like` - è¶…çº§å–œæ¬¢

### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X GET "http://localhost:8080/api/vip/check-feature?feature=unlimited_match" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": true,
  "traceId": "abc123"
}
```

**è¯´æ˜**ï¼š
- å½“å‰é˜¶æ®µä¼šå‘˜åŠŸèƒ½å¼€å…³é»˜è®¤å…³é—­ï¼Œæ‰€æœ‰åŠŸèƒ½è¿”å›`true`
- åæœŸå¯é€šè¿‡é…ç½®è¡¨`t_system_config`å¼€å¯ä¼šå‘˜åŠŸèƒ½

---

## 52. åˆ›å»ºè®¢å•

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/payment/create-order`
- **æ¥å£è¯´æ˜**ï¼šåˆ›å»ºVIPä¼šå‘˜è®¢å•ï¼Œè°ƒç”¨å¾®ä¿¡æ”¯ä»˜ç»Ÿä¸€ä¸‹å•æ¥å£
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| productType | Integer | æ˜¯ | å•†å“ç±»å‹ï¼š1-VIPä¼šå‘˜ |
| vipLevel | Integer | æ˜¯ | VIPç­‰çº§ï¼š1-æœˆåº¦ 2-å­£åº¦ 3-å¹´åº¦ |

### VIPå¥—é¤è¯´æ˜

| VIPç­‰çº§ | å¥—é¤åç§° | ä»·æ ¼ | æœ‰æ•ˆæœŸ |
|---------|---------|------|--------|
| 1 | æœˆåº¦ä¼šå‘˜ | Â¥29.9 | 30å¤© |
| 2 | å­£åº¦ä¼šå‘˜ | Â¥79.9 | 90å¤© |
| 3 | å¹´åº¦ä¼šå‘˜ | Â¥299.9 | 365å¤© |

### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X POST http://localhost:8080/api/payment/create-order \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "productType": 1,
    "vipLevel": 1
  }'
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "orderNo": "PO1699876543210ABC",
    "userId": "U17623500638845TAWQ0",
    "productType": 1,
    "vipLevel": 1,
    "vipLevelName": "æœˆåº¦ä¼šå‘˜",
    "amount": 29.90,
    "paymentStatus": 0,
    "paymentStatusName": "å¾…æ”¯ä»˜",
    "paymentMethod": 1,
    "wxPayParams": {
      "timeStamp": "1699876543",
      "nonceStr": "a1b2c3d4e5f6",
      "packageValue": "prepay_id=wx201699876543abcd",
      "signType": "MD5",
      "paySign": "9A5B7C3D1E2F4A6B8C0D1E2F3A4B5C6D"
    },
    "createdAt": "2025-11-07T16:00:00"
  },
  "traceId": "abc123"
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| orderNo | String | è®¢å•å·ï¼ˆå…¨å±€å”¯ä¸€ï¼‰ |
| wxPayParams | Object | å¾®ä¿¡æ”¯ä»˜å‚æ•°ï¼ˆç”¨äºè°ƒèµ·æ”¯ä»˜ï¼‰ |
| timeStamp | String | æ—¶é—´æˆ³ |
| nonceStr | String | éšæœºå­—ç¬¦ä¸² |
| packageValue | String | é¢„æ”¯ä»˜äº¤æ˜“ä¼šè¯æ ‡è¯† |
| signType | String | ç­¾åç±»å‹ï¼ˆå›ºå®šMD5ï¼‰ |
| paySign | String | ç­¾å |

### å‰ç«¯è°ƒèµ·æ”¯ä»˜ç¤ºä¾‹

```javascript
// 1. åˆ›å»ºè®¢å•
const orderRes = await fetch('/api/payment/create-order', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({ productType: 1, vipLevel: 1 })
});

const { data } = await orderRes.json();

// 2. è°ƒèµ·å¾®ä¿¡æ”¯ä»˜
wx.requestPayment({
  timeStamp: data.wxPayParams.timeStamp,
  nonceStr: data.wxPayParams.nonceStr,
  package: data.wxPayParams.packageValue,
  signType: data.wxPayParams.signType,
  paySign: data.wxPayParams.paySign,
  success: function(res) {
    console.log('æ”¯ä»˜æˆåŠŸ');
    // æŸ¥è¯¢è®¢å•çŠ¶æ€æˆ–åˆ·æ–°VIPä¿¡æ¯
  },
  fail: function(err) {
    console.error('æ”¯ä»˜å¤±è´¥', err);
  }
});
```

---

## 53. æŸ¥è¯¢è®¢å•

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/payment/order/{orderNo}`
- **æ¥å£è¯´æ˜**ï¼šæ ¹æ®è®¢å•å·æŸ¥è¯¢è®¢å•è¯¦æƒ…å’Œæ”¯ä»˜çŠ¶æ€
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| orderNo | String | æ˜¯ | è®¢å•å· |

### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X GET http://localhost:8080/api/payment/order/PO1699876543210ABC \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "orderNo": "PO1699876543210ABC",
    "userId": "U17623500638845TAWQ0",
    "productType": 1,
    "vipLevel": 1,
    "vipLevelName": "æœˆåº¦ä¼šå‘˜",
    "amount": 29.90,
    "paymentStatus": 1,
    "paymentStatusName": "å·²æ”¯ä»˜",
    "paymentMethod": 1,
    "transactionId": "4200001234567890",
    "createdAt": "2025-11-07T16:00:00",
    "paidAt": "2025-11-07T16:05:30"
  },
  "traceId": "abc123"
}
```

### æ”¯ä»˜çŠ¶æ€è¯´æ˜

| çŠ¶æ€å€¼ | çŠ¶æ€åç§° | è¯´æ˜ |
|--------|---------|------|
| 0 | å¾…æ”¯ä»˜ | è®¢å•å·²åˆ›å»ºï¼Œç­‰å¾…æ”¯ä»˜ |
| 1 | å·²æ”¯ä»˜ | æ”¯ä»˜æˆåŠŸï¼ŒVIPå·²å¼€é€š |
| 2 | å·²å–æ¶ˆ | ç”¨æˆ·ä¸»åŠ¨å–æ¶ˆè®¢å• |
| 3 | å·²é€€æ¬¾ | å·²é€€æ¬¾ï¼ˆé¢„ç•™ï¼‰ |

---

## 54. å–æ¶ˆè®¢å•

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/payment/order/{orderNo}/cancel`
- **æ¥å£è¯´æ˜**ï¼šå–æ¶ˆå¾…æ”¯ä»˜çŠ¶æ€çš„è®¢å•
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| orderNo | String | æ˜¯ | è®¢å•å· |

### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X POST http://localhost:8080/api/payment/order/PO1699876543210ABC/cancel \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "è®¢å•å–æ¶ˆæˆåŠŸ",
  "traceId": "abc123"
}
```

### ä¸šåŠ¡è§„åˆ™

1. **åªèƒ½å–æ¶ˆå¾…æ”¯ä»˜è®¢å•**
   - å·²æ”¯ä»˜è®¢å•ä¸èƒ½å–æ¶ˆ
   - å·²å–æ¶ˆè®¢å•é‡å¤æ“ä½œä¼šè¿”å›é”™è¯¯

2. **å–æ¶ˆå**
   - è®¢å•çŠ¶æ€å˜ä¸º"å·²å–æ¶ˆ"
   - ä¸ä¼šé€€æ¬¾ï¼ˆå› ä¸ºè¿˜æœªæ”¯ä»˜ï¼‰
   - ç”¨æˆ·å¯ä»¥é‡æ–°åˆ›å»ºæ–°è®¢å•

### é”™è¯¯ç¤ºä¾‹

```json
{
  "code": 400,
  "message": "è®¢å•ä¸å­˜åœ¨æˆ–å·²æ”¯ä»˜ï¼Œæ— æ³•å–æ¶ˆ",
  "traceId": "abc123"
}
```

---

## é™„å½•ï¼šå¹´é¾„ç®¡ç†è§„åˆ™è¯´æ˜

### å¹´é¾„å­—æ®µè§„åˆ™

1. **é¦–æ¬¡è®¾ç½®**
   - ç”¨æˆ·å®Œå–„èµ„æ–™æ—¶å¯ä»¥å¡«å†™`age`å­—æ®µ
   - å¡«å†™å`age_set_by_user`æ ‡è®°ä¸º1
   - ç”¨æˆ·åªèƒ½è®¾ç½®ä¸€æ¬¡

2. **å®åè®¤è¯åæ›´æ–°**
   - æäº¤å®åè®¤è¯æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨ä»èº«ä»½è¯å·æå–ç”Ÿæ—¥
   - æ ¹æ®ç”Ÿæ—¥è®¡ç®—çœŸå®å¹´é¾„å¹¶æ›´æ–°
   - æ ‡è®°ä¸ºå·²å®åè®¤è¯

3. **ä¿®æ”¹é™åˆ¶**
   - `age_set_by_user=1`åï¼Œç”¨æˆ·æ— æ³•å†ä¿®æ”¹å¹´é¾„
   - å°è¯•ä¿®æ”¹ä¼šè¿”å›é”™è¯¯ï¼š"å¹´é¾„åªèƒ½è®¾ç½®ä¸€æ¬¡ï¼Œåç»­éœ€é€šè¿‡å®åè®¤è¯è‡ªåŠ¨æ›´æ–°"

### å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| age | Integer | å¹´é¾„ |
| age_set_by_user | Integer | 0-æœªè®¾ç½®ï¼Œ1-å·²è®¾ç½® |
| is_real_name_verified | Integer | 0-æœªè®¤è¯ï¼Œ1-å·²è®¤è¯ |
| birthday | Date | ç”Ÿæ—¥ |
| real_name | String | çœŸå®å§“å |
| id_card | String | èº«ä»½è¯å· |

---

## æ¥å£æ›´æ–°æ—¥å¿—

### v1.6 (2025-11-08)
- âœ¨ æ–°å¢ï¼šæ ¹æ®ä¸šåŠ¡ç±»å‹è·å–å›¾ç‰‡æ¥å£ (GET /api/media/by-type)
  - æ”¯æŒå¤šä¸ªä¸šåŠ¡ç±»å‹æŸ¥è¯¢ï¼ˆé€—å·åˆ†éš”ï¼‰
  - æ”¯æŒçµæ´»çš„ç­›é€‰æ¡ä»¶ï¼ˆå®¡æ ¸çŠ¶æ€ã€æ˜¯å¦ä¸»å›¾ï¼‰
  - æ”¯æŒæŸ¥è¯¢æŒ‡å®šç”¨æˆ·çš„å›¾ç‰‡
  - ä¸æ¥å£13çš„åŒºåˆ«è¯´æ˜
- ğŸ“ å®Œå–„ï¼šgetUserStatsæ–¹æ³•å®ç°
  - æ­å­åŒ¹é…æ•°é‡ç»Ÿè®¡ï¼ˆåŒå‘åŒ¹é…ï¼‰
  - æ´»åŠ¨å‚ä¸æ•°é‡ç»Ÿè®¡
  - åŠ¨æ€æ•°é‡ç»Ÿè®¡
  - å–œæ¬¢æˆ‘çš„äººæ•°ç»Ÿè®¡
- ğŸ”§ ä¼˜åŒ–ï¼šå¿ƒè·³æ¥å£è‡ªåŠ¨åˆ·æ–°Redis tokenè¿‡æœŸæ—¶é—´
- ğŸ“Š æ¥å£æ€»æ•°ï¼š51ä¸ª

### v1.5 (2025-11-07 18:00)
- ğŸ’° æ–°å¢ï¼šæ”¯ä»˜æ¨¡å—ï¼ˆ3ä¸ªæ¥å£ï¼‰â­
  - åˆ›å»ºè®¢å•ï¼ˆæ”¯æŒ3ç§VIPå¥—é¤ï¼‰
  - æŸ¥è¯¢è®¢å•è¯¦æƒ…
  - å–æ¶ˆè®¢å•
  - å¾®ä¿¡æ”¯ä»˜å›è°ƒå¤„ç†
  - è‡ªåŠ¨å¼€é€šVIPä¼šå‘˜
- ğŸ—ï¸ æ¶æ„ï¼šå®Œæ•´å¾®ä¿¡æ”¯ä»˜æµç¨‹æ¥å…¥
- ğŸ“– æ–‡æ¡£ï¼šæ–°å¢å¾®ä¿¡æ”¯ä»˜é›†æˆæ–‡æ¡£

### v1.4 (2025-11-07 15:30)
- âœ¨ æ–°å¢ï¼šåŠ¨æ€å¹¿åœºæ¨¡å—ï¼ˆ9ä¸ªæ¥å£ï¼‰
  - å‘å¸ƒåŠ¨æ€ï¼ˆæ”¯æŒ4ç§ç±»å‹ï¼šæ­å­ã€æ‹çˆ±ã€æ­å­æ´»åŠ¨ã€å®˜æ–¹æ´»åŠ¨ï¼‰
  - åŠ¨æ€åˆ—è¡¨æŸ¥è¯¢ï¼ˆæ”¯æŒç±»å‹ã€åŸå¸‚ç­›é€‰ï¼‰
  - åŠ¨æ€è¯¦æƒ…æŸ¥çœ‹
  - ç‚¹èµ/å–æ¶ˆç‚¹èµ
  - åˆ é™¤åŠ¨æ€
  - æ´»åŠ¨æŠ¥å/å–æ¶ˆæŠ¥å
  - å‘å¸ƒé™åˆ¶æŸ¥è¯¢
- âœ¨ æ–°å¢ï¼šVIPä¼šå‘˜æ¨¡å—ï¼ˆ3ä¸ªæ¥å£ï¼‰
  - è·å–VIPä¿¡æ¯
  - æ£€æŸ¥VIPçŠ¶æ€
  - æ£€æŸ¥VIPåŠŸèƒ½æƒé™
- ğŸ“ å®Œå–„ï¼šæ­å­å¹³å°å’Œçº¿ä¸‹æ´»åŠ¨å·²æ•´åˆåˆ°åŠ¨æ€å¹¿åœºæ¨¡å—
- ğŸ—ï¸ æ¶æ„ï¼šé‡‡ç”¨ç»Ÿä¸€è¡¨ç»“æ„è®¾è®¡ï¼Œé€šè¿‡momentTypeåŒºåˆ†åŠ¨æ€ç±»å‹
- ğŸ“Š æ•°æ®åº“ï¼šæ–°å¢12å¼ è¡¨ï¼ˆåŠ¨æ€æ¨¡å—7å¼ ï¼Œä¼šå‘˜æ¨¡å—5å¼ ï¼‰

### v1.3 (2025-11-02 21:30)
- âœ¨ æ–°å¢ï¼šTokenæ ¡éªŒæ¥å£ (POST /api/auth/token/validate)
- âœ¨ æ–°å¢ï¼šå›¾ç‰‡åˆ†ç±»æ–°å¢backgroundï¼ˆèƒŒæ™¯å¢™ï¼‰ç±»å‹
- ğŸ“ å®Œå–„ï¼šç”Ÿæ—¥å­—æ®µæ”¹ä¸ºå¯é€‰ï¼Œå¹´é¾„å­—æ®µæ”¹ä¸ºå¿…å¡«
- ğŸ“ å®Œå–„ï¼šOSSå›¾ç‰‡ä¸Šä¼ æ¥å£è¿”å›æ°¸ä¹…æœ‰æ•ˆçš„URLï¼ˆæ— è¿‡æœŸæ—¶é—´ï¼‰
- ğŸ“ å®Œå–„ï¼šMyBatis SQLæ—¥å¿—ç‹¬ç«‹è¾“å‡ºåˆ°å•ç‹¬æ–‡ä»¶ï¼ŒåŒ…å«traceID

### v1.2 (2025-11-02 20:45)
- âœ¨ æ–°å¢ï¼šæµ‹è¯•Tokenç”Ÿæˆæ¥å£ (POST /api/test/generate-token)
- âœ¨ æ–°å¢ï¼šå®åè®¤è¯æ¥å£ï¼ˆæäº¤ã€æŸ¥è¯¢çŠ¶æ€ï¼‰
- âœ¨ æ–°å¢ï¼šOSSå›¾ç‰‡ä¸Šä¼ æ¥å£ï¼ˆæ–‡ä»¶ã€Base64ã€æ‰¹é‡ï¼‰
- âœ¨ æ–°å¢ï¼šOSSå›¾ç‰‡åˆ é™¤å’Œç­¾åURLæ¥å£
- ğŸ“ å®Œå–„ï¼šå®Œå–„èµ„æ–™æ¥å£å¢åŠ ageå­—æ®µ
- ğŸ“ å®Œå–„ï¼šå®ç°å¹´é¾„ç®¡ç†è§„åˆ™ï¼ˆåªèƒ½è®¾ç½®ä¸€æ¬¡ï¼‰

### v1.1 (2025-11-01)
- âœ¨ æ–°å¢ï¼šæ›´æ–°èµ„æ–™æ¥å£ (POST /api/user/profile/update)
- âœ¨ æ–°å¢ï¼šæŸ¥çœ‹ä»–äººèµ„æ–™æ¥å£ (GET /api/user/profile/{userId})
- âœ¨ æ–°å¢ï¼šç›¸å†Œç®¡ç†æ¥å£ï¼ˆä¸Šä¼ ã€åˆ é™¤ã€è®¾ç½®å°é¢ï¼‰
- âœ¨ æ–°å¢ï¼šæ ‡ç­¾ç®¡ç†æ¥å£ï¼ˆè·å–æ ‡ç­¾åº“ã€è®¾ç½®æ ‡ç­¾ï¼‰
- âœ¨ æ–°å¢ï¼šéšç§è®¾ç½®æ¥å£ï¼ˆæ›´æ–°ã€è·å–ï¼‰
- âœ¨ æ–°å¢ï¼šé»‘åå•ç®¡ç†æ¥å£ï¼ˆæ‹‰é»‘ã€ç§»é™¤ï¼‰
- ğŸ“ å®Œå–„ï¼šè¡¥å……äº†11ä¸ªé—æ¼çš„æ¥å£æ–‡æ¡£
- ğŸ“ ä¼˜åŒ–ï¼šæ·»åŠ æ¥å£é€ŸæŸ¥è¡¨å’Œè¯¦ç»†çš„ä¸šåŠ¡è¯´æ˜
- ğŸ“ ä¼˜åŒ–ï¼šå®Œå–„å‰ç«¯é›†æˆç¤ºä¾‹

### v1.0 (2025-11-01)
- ğŸ‰ åˆå§‹ç‰ˆæœ¬
- âœ… å¾®ä¿¡ç™»å½•
- âœ… å®Œå–„èµ„æ–™
- âœ… æŸ¥çœ‹æˆ‘çš„èµ„æ–™
- âœ… æŸ¥çœ‹èµ„æ–™å®Œå–„çŠ¶æ€
- âœ… è·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ®
- âœ… è®¾ç½®/è·å–åŒ¹é…åå¥½

---

## 55. å…³æ³¨ç”¨æˆ·

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/user/follow/{userId}`
- **æ¥å£è¯´æ˜**ï¼šå…³æ³¨æŒ‡å®šç”¨æˆ·
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | String | æ˜¯ | è¢«å…³æ³¨ç”¨æˆ·IDï¼ˆä¸šåŠ¡ç”¨æˆ·IDï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/user/follow/U1699123456789AB12CD \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å…³æ³¨æˆåŠŸ",
  "data": "å…³æ³¨æˆåŠŸ"
}
```

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 40001,
  "message": "ä¸èƒ½å…³æ³¨è‡ªå·±"
}
```

### æ³¨æ„äº‹é¡¹
- ä¸èƒ½å…³æ³¨è‡ªå·±
- ä¸èƒ½é‡å¤å…³æ³¨åŒä¸€ç”¨æˆ·
- å…³æ³¨åä¼šåœ¨å…³æ³¨åˆ—è¡¨å’Œå¯¹æ–¹çš„ç²‰ä¸åˆ—è¡¨ä¸­æ˜¾ç¤º

---

## 56. å–æ¶ˆå…³æ³¨

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`DELETE /api/user/follow/{userId}`
- **æ¥å£è¯´æ˜**ï¼šå–æ¶ˆå…³æ³¨æŒ‡å®šç”¨æˆ·
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | String | æ˜¯ | è¢«å…³æ³¨ç”¨æˆ·IDï¼ˆä¸šåŠ¡ç”¨æˆ·IDï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X DELETE http://localhost:8080/api/user/follow/U1699123456789AB12CD \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å–æ¶ˆå…³æ³¨æˆåŠŸ",
  "data": "å–æ¶ˆå…³æ³¨æˆåŠŸ"
}
```

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 40003,
  "message": "æœªå…³æ³¨è¯¥ç”¨æˆ·"
}
```

### æ³¨æ„äº‹é¡¹
- åªèƒ½å–æ¶ˆå·²å…³æ³¨çš„ç”¨æˆ·
- å–æ¶ˆå…³æ³¨åï¼ŒåŒæ–¹çš„å…³ç³»è®°å½•ä¼šè¢«åˆ é™¤

---

## 57. è·å–å…³æ³¨åˆ—è¡¨

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/user/following`
- **æ¥å£è¯´æ˜**ï¼šè·å–å½“å‰ç”¨æˆ·çš„å…³æ³¨åˆ—è¡¨
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | Integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| size | Integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10 |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/api/user/following?page=1&size=10" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [
      {
        "userId": "U1699123456789AB12CD",
        "nickname": "å°æ˜",
        "avatar": "https://example.com/avatar.jpg",
        "age": 28,
        "gender": 1,
        "height": 178,
        "occupation": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
        "education": "æœ¬ç§‘",
        "incomeRange": "20-30ä¸‡",
        "city": "åŒ—äº¬",
        "bio": "çƒ­çˆ±ç¼–ç¨‹å’Œè¿åŠ¨"
      }
    ],
    "total": 10,
    "size": 10,
    "current": 1,
    "pages": 1
  }
}
```

### æ³¨æ„äº‹é¡¹
- è¿”å›åˆ—è¡¨æŒ‰å…³æ³¨æ—¶é—´å€’åºæ’åˆ—
- å¦‚æœç”¨æˆ·æ²¡æœ‰å…³æ³¨ä»»ä½•äººï¼Œè¿”å›ç©ºåˆ—è¡¨

---

## 58. è·å–ç²‰ä¸åˆ—è¡¨

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/user/followers`
- **æ¥å£è¯´æ˜**ï¼šè·å–å½“å‰ç”¨æˆ·çš„ç²‰ä¸åˆ—è¡¨
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | Integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| size | Integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10 |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/api/user/followers?page=1&size=10" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [
      {
        "userId": "U1699123456789AB12CD",
        "nickname": "å°çº¢",
        "avatar": "https://example.com/avatar.jpg",
        "age": 25,
        "gender": 2,
        "height": 165,
        "occupation": "è®¾è®¡å¸ˆ",
        "education": "æœ¬ç§‘",
        "incomeRange": "15-20ä¸‡",
        "city": "ä¸Šæµ·",
        "bio": "å–œæ¬¢è®¾è®¡å’Œæ—…è¡Œ"
      }
    ],
    "total": 5,
    "size": 10,
    "current": 1,
    "pages": 1
  }
}
```

### æ³¨æ„äº‹é¡¹
- è¿”å›åˆ—è¡¨æŒ‰å…³æ³¨æ—¶é—´å€’åºæ’åˆ—
- å¦‚æœç”¨æˆ·æ²¡æœ‰ç²‰ä¸ï¼Œè¿”å›ç©ºåˆ—è¡¨

---

## 59. æ”¶è—ç”¨æˆ·/æ´»åŠ¨/åŠ¨æ€

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/user/favorites/{type}/{id}`
- **æ¥å£è¯´æ˜**ï¼šæ”¶è—ç”¨æˆ·ã€æ´»åŠ¨æˆ–åŠ¨æ€
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| type | String | æ˜¯ | æ”¶è—ç±»å‹ï¼šuser-ç”¨æˆ· activity-æ´»åŠ¨ moment-åŠ¨æ€ |
| id | String | æ˜¯ | æ”¶è—å¯¹è±¡IDï¼ˆç”¨æˆ·ID/æ´»åŠ¨ID/åŠ¨æ€IDï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼ˆæ”¶è—ç”¨æˆ·ï¼‰ï¼š
```bash
curl -X POST http://localhost:8080/api/user/favorites/user/U1699123456789AB12CD \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**curlå‘½ä»¤**ï¼ˆæ”¶è—æ´»åŠ¨ï¼‰ï¼š
```bash
curl -X POST http://localhost:8080/api/user/favorites/activity/123 \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**curlå‘½ä»¤**ï¼ˆæ”¶è—åŠ¨æ€ï¼‰ï¼š
```bash
curl -X POST http://localhost:8080/api/user/favorites/moment/456 \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "æ”¶è—æˆåŠŸ",
  "data": "æ”¶è—æˆåŠŸ"
}
```

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 40001,
  "message": "æ”¶è—ç±»å‹ä¸æ­£ç¡®"
}
```

```json
{
  "code": 40003,
  "message": "å·²æ”¶è—"
}
```

### æ³¨æ„äº‹é¡¹
- typeå‚æ•°åªèƒ½æ˜¯ï¼š`user`ã€`activity`ã€`moment` ä¹‹ä¸€
- ä¸èƒ½é‡å¤æ”¶è—åŒä¸€å¯¹è±¡
- æ”¶è—ç”¨æˆ·æ—¶ï¼Œidä¸ºä¸šåŠ¡ç”¨æˆ·IDï¼›æ”¶è—æ´»åŠ¨/åŠ¨æ€æ—¶ï¼Œidä¸ºæ•°å­—ID

---

## 60. å–æ¶ˆæ”¶è—

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`DELETE /api/user/favorites/{type}/{id}`
- **æ¥å£è¯´æ˜**ï¼šå–æ¶ˆæ”¶è—
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| type | String | æ˜¯ | æ”¶è—ç±»å‹ï¼šuser-ç”¨æˆ· activity-æ´»åŠ¨ moment-åŠ¨æ€ |
| id | String | æ˜¯ | æ”¶è—å¯¹è±¡ID |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X DELETE http://localhost:8080/api/user/favorites/user/U1699123456789AB12CD \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å–æ¶ˆæ”¶è—æˆåŠŸ",
  "data": "å–æ¶ˆæ”¶è—æˆåŠŸ"
}
```

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 40004,
  "message": "æœªæ”¶è—"
}
```

### æ³¨æ„äº‹é¡¹
- åªèƒ½å–æ¶ˆå·²æ”¶è—çš„å¯¹è±¡
- typeå’Œidå¿…é¡»ä¸æ”¶è—æ—¶ä¸€è‡´

---

## 61. è·å–æ”¶è—ç”¨æˆ·åˆ—è¡¨

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/user/favorites/users`
- **æ¥å£è¯´æ˜**ï¼šè·å–æ”¶è—çš„ç”¨æˆ·åˆ—è¡¨
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | Integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| size | Integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20 |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/api/user/favorites/users?page=1&size=20" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [
      {
        "userId": "U1699123456789AB12CD",
        "nickname": "å°æ˜",
        "avatar": "https://example.com/avatar.jpg",
        "age": 28,
        "gender": 1,
        "height": 178,
        "occupation": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
        "education": "æœ¬ç§‘",
        "incomeRange": "20-30ä¸‡",
        "city": "åŒ—äº¬",
        "bio": "çƒ­çˆ±ç¼–ç¨‹å’Œè¿åŠ¨"
      }
    ],
    "total": 5,
    "size": 20,
    "current": 1,
    "pages": 1
  }
}
```

### æ³¨æ„äº‹é¡¹
- è¿”å›åˆ—è¡¨æŒ‰æ”¶è—æ—¶é—´å€’åºæ’åˆ—
- å¦‚æœç”¨æˆ·æ²¡æœ‰æ”¶è—ä»»ä½•ç”¨æˆ·ï¼Œè¿”å›ç©ºåˆ—è¡¨

---

## 62. è·å–æ”¶è—æ´»åŠ¨åˆ—è¡¨

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/user/favorites/activities`
- **æ¥å£è¯´æ˜**ï¼šè·å–æ”¶è—çš„æ´»åŠ¨åˆ—è¡¨
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | Integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| size | Integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20 |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/api/user/favorites/activities?page=1&size=20" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [
      {
        "id": 123,
        "publisher": {
          "userId": "U1699123456789AB12CD",
          "nickname": "æ´»åŠ¨ç»„ç»‡è€…",
          "avatar": "https://example.com/avatar.jpg"
        },
        "momentType": 3,
        "title": "å‘¨æœ«çˆ¬å±±æ´»åŠ¨",
        "content": "æœ¬å‘¨å…­ç»„ç»‡çˆ¬å±±æ´»åŠ¨ï¼Œæ¬¢è¿æŠ¥å",
        "activityTime": "2025-01-15T09:00:00",
        "currentParticipants": 5,
        "maxParticipants": 20
      }
    ],
    "total": 3,
    "size": 20,
    "current": 1,
    "pages": 1
  }
}
```

### æ³¨æ„äº‹é¡¹
- è¿”å›åˆ—è¡¨æŒ‰æ”¶è—æ—¶é—´å€’åºæ’åˆ—
- å¦‚æœæ´»åŠ¨å·²åˆ é™¤æˆ–ä¸å­˜åœ¨ï¼Œä¸ä¼šå‡ºç°åœ¨åˆ—è¡¨ä¸­

---

## 63. è·å–æ”¶è—åŠ¨æ€åˆ—è¡¨

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/user/favorites/moments`
- **æ¥å£è¯´æ˜**ï¼šè·å–æ”¶è—çš„åŠ¨æ€åˆ—è¡¨
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | Integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| size | Integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20 |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/api/user/favorites/moments?page=1&size=20" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [
      {
        "id": 456,
        "publisher": {
          "userId": "U1699123456789AB12CD",
          "nickname": "å‘å¸ƒè€…",
          "avatar": "https://example.com/avatar.jpg"
        },
        "momentType": 1,
        "content": "ä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œé€‚åˆå‡ºé—¨",
        "likeCount": 10,
        "commentCount": 5
      }
    ],
    "total": 8,
    "size": 20,
    "current": 1,
    "pages": 1
  }
}
```

### æ³¨æ„äº‹é¡¹
- è¿”å›åˆ—è¡¨æŒ‰æ”¶è—æ—¶é—´å€’åºæ’åˆ—
- å¦‚æœåŠ¨æ€å·²åˆ é™¤æˆ–ä¸å­˜åœ¨ï¼Œä¸ä¼šå‡ºç°åœ¨åˆ—è¡¨ä¸­

---

## 64. è·å–åŠ¨æ€è¯„è®ºåˆ—è¡¨

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/moments/{momentId}/comments`
- **æ¥å£è¯´æ˜**ï¼šè·å–åŠ¨æ€çš„è¯„è®ºåˆ—è¡¨
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| momentId | Long | æ˜¯ | åŠ¨æ€ID |

### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | Integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| size | Integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20 |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/api/moments/1/comments?page=1&size=20" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [
      {
        "id": 1,
        "momentId": 1,
        "userId": "U1699123456789AB12CD",
        "nickname": "å°æ˜",
        "avatar": "https://example.com/avatar.jpg",
        "content": "è¿™ä¸ªæ´»åŠ¨å¾ˆæ£’ï¼",
        "replyToUserId": null,
        "replyToNickname": null,
        "replyToCommentId": null,
        "likeCount": 5,
        "isLiked": 0,
        "createdAt": "2025-01-01T10:00:00"
      },
      {
        "id": 2,
        "momentId": 1,
        "userId": "U1699123456789AB12EF",
        "nickname": "å°çº¢",
        "avatar": "https://example.com/avatar2.jpg",
        "content": "æˆ‘ä¹Ÿæƒ³å»ï¼",
        "replyToUserId": "U1699123456789AB12CD",
        "replyToNickname": "å°æ˜",
        "replyToCommentId": 1,
        "likeCount": 2,
        "isLiked": 1,
        "createdAt": "2025-01-01T10:05:00"
      }
    ],
    "total": 10,
    "size": 20,
    "current": 1,
    "pages": 1
  }
}
```

### æ³¨æ„äº‹é¡¹
- è¿”å›åˆ—è¡¨æŒ‰è¯„è®ºæ—¶é—´å€’åºæ’åˆ—
- `isLiked`å­—æ®µè¡¨ç¤ºå½“å‰ç”¨æˆ·æ˜¯å¦å·²ç‚¹èµè¯¥è¯„è®ºï¼ˆ0-å¦ï¼Œ1-æ˜¯ï¼‰
- å›å¤è¯„è®ºä¼šæ˜¾ç¤ºè¢«å›å¤çš„ç”¨æˆ·ä¿¡æ¯å’Œè¯„è®ºID
- å·²åˆ é™¤çš„è¯„è®ºä¸ä¼šè¿”å›

---

## 65. å‘è¡¨è¯„è®º

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/moments/{momentId}/comments`
- **æ¥å£è¯´æ˜**ï¼šåœ¨åŠ¨æ€ä¸‹å‘è¡¨è¯„è®º
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
Content-Type: application/json
```

### è·¯å¾„å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| momentId | Long | æ˜¯ | åŠ¨æ€ID |

### è¯·æ±‚ä½“
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| content | String | æ˜¯ | è¯„è®ºå†…å®¹ï¼ˆæœ€å¤š500å­—ï¼‰ |
| replyToUserId | String | å¦ | å›å¤çš„ç”¨æˆ·IDï¼ˆå›å¤è¯„è®ºæ—¶å¿…å¡«ï¼‰ |
| replyToCommentId | Long | å¦ | å›å¤çš„è¯„è®ºIDï¼ˆå›å¤è¯„è®ºæ—¶å¿…å¡«ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼ˆæ™®é€šè¯„è®ºï¼‰ï¼š
```bash
curl -X POST http://localhost:8080/api/moments/1/comments \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"content": "è¿™ä¸ªæ´»åŠ¨å¾ˆæ£’ï¼"}'
```

**curlå‘½ä»¤**ï¼ˆå›å¤è¯„è®ºï¼‰ï¼š
```bash
curl -X POST http://localhost:8080/api/moments/1/comments \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "content": "æˆ‘ä¹Ÿæƒ³å»ï¼",
    "replyToUserId": "U1699123456789AB12CD",
    "replyToCommentId": 1
  }'
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "è¯„è®ºæˆåŠŸ",
  "data": {
    "id": 3,
    "momentId": 1,
    "userId": "U1699123456789AB12EF",
    "nickname": "å°çº¢",
    "avatar": "https://example.com/avatar.jpg",
    "content": "è¿™ä¸ªæ´»åŠ¨å¾ˆæ£’ï¼",
    "likeCount": 0,
    "isLiked": 0,
    "createdAt": "2025-01-01T10:10:00"
  }
}
```

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 40001,
  "message": "åŠ¨æ€ä¸å­˜åœ¨æˆ–å·²åˆ é™¤"
}
```

### æ³¨æ„äº‹é¡¹
- è¯„è®ºå†…å®¹ä¸èƒ½ä¸ºç©ºï¼Œæœ€å¤š500å­—
- å›å¤è¯„è®ºæ—¶ï¼Œ`replyToUserId`å’Œ`replyToCommentId`å¿…é¡»åŒæ—¶æä¾›
- è¯„è®ºæˆåŠŸåï¼ŒåŠ¨æ€çš„è¯„è®ºæ•°ä¼šè‡ªåŠ¨å¢åŠ 

---

## 66. å›å¤è¯„è®º

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/moments/{momentId}/comments/{commentId}/reply`
- **æ¥å£è¯´æ˜**ï¼šå›å¤æŒ‡å®šè¯„è®º
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
Content-Type: application/json
```

### è·¯å¾„å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| momentId | Long | æ˜¯ | åŠ¨æ€ID |
| commentId | Long | æ˜¯ | è¢«å›å¤çš„è¯„è®ºID |

### è¯·æ±‚ä½“
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| content | String | æ˜¯ | å›å¤å†…å®¹ï¼ˆæœ€å¤š500å­—ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/moments/1/comments/1/reply \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"content": "æˆ‘ä¹Ÿæƒ³å»ï¼"}'
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å›å¤æˆåŠŸ",
  "data": {
    "id": 4,
    "momentId": 1,
    "userId": "U1699123456789AB12EF",
    "nickname": "å°çº¢",
    "avatar": "https://example.com/avatar.jpg",
    "content": "æˆ‘ä¹Ÿæƒ³å»ï¼",
    "replyToUserId": "U1699123456789AB12CD",
    "replyToNickname": "å°æ˜",
    "replyToCommentId": 1,
    "likeCount": 0,
    "isLiked": 0,
    "createdAt": "2025-01-01T10:15:00"
  }
}
```

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 40002,
  "message": "è¯„è®ºä¸å­˜åœ¨æˆ–å·²åˆ é™¤"
}
```

### æ³¨æ„äº‹é¡¹
- å›å¤å†…å®¹ä¸èƒ½ä¸ºç©ºï¼Œæœ€å¤š500å­—
- è¢«å›å¤çš„è¯„è®ºå¿…é¡»å­˜åœ¨ä¸”å±äºè¯¥åŠ¨æ€
- å›å¤æˆåŠŸåï¼ŒåŠ¨æ€çš„è¯„è®ºæ•°ä¼šè‡ªåŠ¨å¢åŠ 

---

## 67. ç‚¹èµè¯„è®º

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/moments/{momentId}/comments/{commentId}/like`
- **æ¥å£è¯´æ˜**ï¼šç‚¹èµè¯„è®º
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| momentId | Long | æ˜¯ | åŠ¨æ€ID |
| commentId | Long | æ˜¯ | è¯„è®ºID |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/moments/1/comments/1/like \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "ç‚¹èµæˆåŠŸ",
  "data": "ç‚¹èµæˆåŠŸ"
}
```

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 40002,
  "message": "è¯„è®ºä¸å­˜åœ¨æˆ–å·²åˆ é™¤"
}
```

### æ³¨æ„äº‹é¡¹
- ä¸èƒ½é‡å¤ç‚¹èµåŒä¸€è¯„è®º
- ç‚¹èµæˆåŠŸåï¼Œè¯„è®ºçš„ç‚¹èµæ•°ä¼šè‡ªåŠ¨å¢åŠ 
- å¦‚éœ€å–æ¶ˆç‚¹èµï¼Œéœ€è¦è°ƒç”¨å–æ¶ˆç‚¹èµæ¥å£ï¼ˆå½“å‰æœªå®ç°ï¼Œå¯é‡å¤è°ƒç”¨è§†ä¸ºå–æ¶ˆï¼‰

---

## 68. è·å–æ´»åŠ¨å†å²è®°å½•

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/activity/history`
- **æ¥å£è¯´æ˜**ï¼šè·å–ç”¨æˆ·å‚ä¸çš„æ´»åŠ¨å†å²è®°å½•
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | Integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| size | Integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20 |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/api/activity/history?page=1&size=20" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [
      {
        "id": 123,
        "publisher": {
          "userId": "U1699123456789AB12CD",
          "nickname": "æ´»åŠ¨ç»„ç»‡è€…",
          "avatar": "https://example.com/avatar.jpg"
        },
        "momentType": 3,
        "title": "å‘¨æœ«çˆ¬å±±æ´»åŠ¨",
        "content": "æœ¬å‘¨å…­ç»„ç»‡çˆ¬å±±æ´»åŠ¨ï¼Œæ¬¢è¿æŠ¥å",
        "activityTime": "2025-01-15T09:00:00",
        "activityType": "sport",
        "currentParticipants": 5,
        "maxParticipants": 20,
        "activityStatus": 1,
        "isRegistered": true
      }
    ],
    "total": 5,
    "size": 20,
    "current": 1,
    "pages": 1
  }
}
```

### æ³¨æ„äº‹é¡¹
- è¿”å›ç”¨æˆ·å·²æŠ¥åçš„æ´»åŠ¨åˆ—è¡¨
- æŒ‰æŠ¥åæ—¶é—´å€’åºæ’åˆ—
- `isRegistered`å­—æ®µè¡¨ç¤ºå½“å‰ç”¨æˆ·æ˜¯å¦å·²æŠ¥åï¼ˆtrue-å·²æŠ¥åï¼‰

---

## 69. æ´»åŠ¨ç­¾åˆ°

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/activity/{activityId}/checkin`
- **æ¥å£è¯´æ˜**ï¼šæ´»åŠ¨ç­¾åˆ°
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| activityId | Long | æ˜¯ | æ´»åŠ¨åŠ¨æ€ID |

### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| location | String | å¦ | ç­¾åˆ°ä½ç½® |
| latitude | BigDecimal | å¦ | çº¬åº¦ |
| longitude | BigDecimal | å¦ | ç»åº¦ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST "http://localhost:8080/api/activity/123/checkin?location=åŒ—äº¬å¸‚æœé˜³åŒº&latitude=39.9042&longitude=116.4074" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "ç­¾åˆ°æˆåŠŸ",
  "data": "ç­¾åˆ°æˆåŠŸ"
}
```

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 40003,
  "message": "æœªæŠ¥åè¯¥æ´»åŠ¨"
}
```

```json
{
  "code": 40004,
  "message": "å·²ç­¾åˆ°"
}
```

### æ³¨æ„äº‹é¡¹
- åªæœ‰å·²æŠ¥åçš„ç”¨æˆ·æ‰èƒ½ç­¾åˆ°
- æ¯ä¸ªæ´»åŠ¨åªèƒ½ç­¾åˆ°ä¸€æ¬¡
- å»ºè®®æä¾›ä½ç½®ä¿¡æ¯ä»¥ä¾¿éªŒè¯ç­¾åˆ°çœŸå®æ€§
- æ´»åŠ¨å¿…é¡»æ˜¯æ´»åŠ¨ç±»å‹ï¼ˆmomentTypeä¸º3æˆ–4ï¼‰

---

## 70. è·å–æ´»åŠ¨è¯¦æƒ…

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/activity/{activityId}`
- **æ¥å£è¯´æ˜**ï¼šè·å–æ´»åŠ¨è¯¦æƒ…
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| activityId | Long | æ˜¯ | æ´»åŠ¨åŠ¨æ€ID |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET http://localhost:8080/api/activity/123 \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 123,
    "publisher": {
      "userId": "U1699123456789AB12CD",
      "nickname": "æ´»åŠ¨ç»„ç»‡è€…",
      "avatar": "https://example.com/avatar.jpg"
    },
    "momentType": 3,
    "title": "å‘¨æœ«çˆ¬å±±æ´»åŠ¨",
    "content": "æœ¬å‘¨å…­ç»„ç»‡çˆ¬å±±æ´»åŠ¨ï¼Œæ¬¢è¿æŠ¥å",
    "activityTime": "2025-01-15T09:00:00",
    "activityType": "sport",
    "currentParticipants": 5,
    "maxParticipants": 20,
    "activityStatus": 1,
    "isRegistered": true
  }
}
```

### æ³¨æ„äº‹é¡¹
- è¿”å›çš„æ´»åŠ¨è¯¦æƒ…ä¸åŠ¨æ€è¯¦æƒ…æ¥å£æ ¼å¼ä¸€è‡´
- `isRegistered`å­—æ®µè¡¨ç¤ºå½“å‰ç”¨æˆ·æ˜¯å¦å·²æŠ¥å
- å¦‚æœæ´»åŠ¨ä¸å­˜åœ¨æˆ–å·²åˆ é™¤ï¼Œè¿”å›é”™è¯¯

---

## 71. è·å–åŒ¹é…å†å²

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/matching/history`
- **æ¥å£è¯´æ˜**ï¼šè·å–åŒå‘åŒ¹é…æˆåŠŸçš„å†å²è®°å½•
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | Integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| size | Integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20 |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/api/matching/history?page=1&size=20" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [
      {
        "userId": "U1699123456789AB12CD",
        "nickname": "å°æ˜",
        "avatar": "https://example.com/avatar.jpg",
        "age": 28,
        "gender": 1,
        "height": 178,
        "occupation": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
        "education": "æœ¬ç§‘",
        "incomeRange": "20-30ä¸‡",
        "city": "åŒ—äº¬",
        "matchScore": 88.5,
        "isRealNameVerified": 1
      }
    ],
    "total": 10,
    "size": 20,
    "current": 1,
    "pages": 1
  }
}
```

### æ³¨æ„äº‹é¡¹
- åªè¿”å›åŒå‘åŒ¹é…æˆåŠŸï¼ˆmatchResult=2ï¼‰çš„è®°å½•
- æŒ‰åŒ¹é…æˆåŠŸæ—¶é—´å€’åºæ’åˆ—
- å¦‚æœç”¨æˆ·æ²¡æœ‰åŒ¹é…å†å²ï¼Œè¿”å›ç©ºåˆ—è¡¨

---

## 72. æäº¤æ„è§åé¦ˆ

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/user/feedback`
- **æ¥å£è¯´æ˜**ï¼šæäº¤æ„è§åé¦ˆ
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚ä½“
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| feedbackType | String | å¦ | åé¦ˆç±»å‹ï¼šbug-é—®é¢˜å»ºè®® suggestion-åŠŸèƒ½å»ºè®® complaint-æŠ•è¯‰ other-å…¶ä»– |
| content | String | æ˜¯ | åé¦ˆå†…å®¹ï¼ˆæœ€å¤š1000å­—ï¼‰ |
| contactInfo | String | å¦ | è”ç³»æ–¹å¼ï¼ˆæœ€å¤š200å­—ï¼‰ |
| images | String | å¦ | å›¾ç‰‡URLsï¼ˆå¤šä¸ªç”¨é€—å·åˆ†éš”ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/user/feedback \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "feedbackType": "suggestion",
    "content": "å¸Œæœ›å¢åŠ XXåŠŸèƒ½",
    "contactInfo": "å¾®ä¿¡ï¼šxxx",
    "images": "url1,url2"
  }'
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "åé¦ˆæäº¤æˆåŠŸ",
  "data": "åé¦ˆæäº¤æˆåŠŸ"
}
```

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 400,
  "message": "åé¦ˆå†…å®¹ä¸èƒ½ä¸ºç©º"
}
```

### æ³¨æ„äº‹é¡¹
- åé¦ˆå†…å®¹ä¸èƒ½ä¸ºç©ºï¼Œæœ€å¤š1000å­—
- è”ç³»æ–¹å¼æœ€å¤š200å­—
- å›¾ç‰‡URLså¤šä¸ªç”¨é€—å·åˆ†éš”
- åé¦ˆæäº¤åçŠ¶æ€ä¸º"å¾…å¤„ç†"ï¼ˆstatus=0ï¼‰

---

## 73. äººè„¸è¯†åˆ«éªŒè¯

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/user/face-verify`
- **æ¥å£è¯´æ˜**ï¼šäººè„¸è¯†åˆ«éªŒè¯ï¼ˆéœ€è¦å¯¹æ¥ç¬¬ä¸‰æ–¹æœåŠ¡ï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
Content-Type: multipart/form-data
```

### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| image | MultipartFile | æ˜¯ | äººè„¸å›¾ç‰‡ |
| idCard | String | å¦ | èº«ä»½è¯å· |
| name | String | å¦ | å§“å |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/user/face-verify \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "image=@/path/to/face.jpg" \
  -F "idCard=110101199001011234" \
  -F "name=å¼ ä¸‰"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼ˆå½“å‰ä¸ºå ä½å®ç°ï¼‰ï¼š
```json
{
  "code": 200,
  "message": "éªŒè¯æˆåŠŸï¼ˆæš‚æœªå¯¹æ¥ç¬¬ä¸‰æ–¹æœåŠ¡ï¼‰",
  "data": true
}
```

### æ³¨æ„äº‹é¡¹
- âš ï¸ **å½“å‰ä¸ºå ä½å®ç°ï¼Œéœ€è¦å¯¹æ¥ç¬¬ä¸‰æ–¹äººè„¸è¯†åˆ«æœåŠ¡**
- å»ºè®®å¯¹æ¥è…¾è®¯äº‘ã€é˜¿é‡Œäº‘ç­‰ç¬¬ä¸‰æ–¹äººè„¸è¯†åˆ«API
- éœ€è¦ä¸Šä¼ äººè„¸å›¾ç‰‡è¿›è¡Œæ¯”å¯¹
- éªŒè¯æˆåŠŸååº”æ›´æ–°ç”¨æˆ·çš„å®åè®¤è¯çŠ¶æ€
- å›¾ç‰‡æ ¼å¼å»ºè®®ï¼šJPGã€PNGï¼Œå¤§å°ä¸è¶…è¿‡5MB

---

## 74. æœç´¢åŠ¨æ€

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/moments/search`
- **æ¥å£è¯´æ˜**ï¼šæœç´¢åŠ¨æ€ï¼ˆæ ¹æ®å…³é”®è¯æœç´¢å†…å®¹ã€æ ‡é¢˜ã€ä½ç½®ï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| keyword | String | æ˜¯ | æœç´¢å…³é”®è¯ |
| page | Integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| size | Integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20 |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/api/moments/search?keyword=çˆ¬å±±&page=1&size=20" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [
      {
        "id": 123,
        "publisher": {
          "userId": "U1699123456789AB12CD",
          "nickname": "å‘å¸ƒè€…",
          "avatar": "https://example.com/avatar.jpg"
        },
        "momentType": 3,
        "title": "å‘¨æœ«çˆ¬å±±æ´»åŠ¨",
        "content": "æœ¬å‘¨å…­ç»„ç»‡çˆ¬å±±æ´»åŠ¨ï¼Œæ¬¢è¿æŠ¥å",
        "location": "é¦™å±±å…¬å›­",
        "likeCount": 10,
        "commentCount": 5
      }
    ],
    "total": 5,
    "size": 20,
    "current": 1,
    "pages": 1
  }
}
```

### æ³¨æ„äº‹é¡¹
- æœç´¢å…³é”®è¯ä¼šåœ¨åŠ¨æ€çš„`content`ã€`title`ã€`location`å­—æ®µä¸­åŒ¹é…
- åªè¿”å›å®¡æ ¸é€šè¿‡çš„åŠ¨æ€
- æœç´¢ç»“æœæŒ‰ç½®é¡¶ä¼˜å…ˆã€æ—¶é—´å€’åºæ’åˆ—
- å…³é”®è¯ä¸ºç©ºæ—¶è¿”å›ç©ºåˆ—è¡¨
- å»ºè®®å‰ç«¯å¯¹å…³é”®è¯è¿›è¡Œtrimå¤„ç†

---

## 75. æ£€æŸ¥æ˜¯å¦å·²å…³æ³¨

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/user/follow/{userId}/status`
- **æ¥å£è¯´æ˜**ï¼šæ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦å·²å…³æ³¨æŒ‡å®šç”¨æˆ·
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | String | æ˜¯ | è¢«å…³æ³¨ç”¨æˆ·IDï¼ˆä¸šåŠ¡ç”¨æˆ·IDï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET http://localhost:8080/api/user/follow/U1699123456789AB12CD/status \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": true
}
```

**æœªå…³æ³¨æ—¶**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": false
}
```

### æ³¨æ„äº‹é¡¹
- è¿”å› `true` è¡¨ç¤ºå·²å…³æ³¨ï¼Œ`false` è¡¨ç¤ºæœªå…³æ³¨
- ç”¨äºå‰ç«¯åˆ¤æ–­æ˜¯å¦æ˜¾ç¤º"å·²å…³æ³¨"çŠ¶æ€
- å¦‚æœç”¨æˆ·ä¸å­˜åœ¨ï¼Œè¿”å› `false`

---

# ä¸ƒã€èŠå¤©ç®¡ç†

## ğŸ”Œ WebSocketå®æ—¶æ¨é€

### è¿æ¥è¯´æ˜

èŠå¤©åŠŸèƒ½å·²é›†æˆWebSocketå®æ—¶æ¨é€ï¼Œæ”¯æŒæ–°æ¶ˆæ¯ã€å·²è¯»å›æ‰§ã€æ¶ˆæ¯æ’¤å›ç­‰å®æ—¶é€šçŸ¥ã€‚

### è¿æ¥åœ°å€

```
ws://localhost:8080/ws/chat?token=YOUR_JWT_TOKEN
```

**ç”Ÿäº§ç¯å¢ƒ**ï¼š
```
wss://friend.uicraft.com.cn/ws/chat?token=YOUR_JWT_TOKEN
```

### è¿æ¥æ­¥éª¤

#### 1. å»ºç«‹WebSocketè¿æ¥

```javascript
// å‰ç«¯ç¤ºä¾‹ä»£ç 
const token = localStorage.getItem('token');
const ws = new WebSocket(`ws://localhost:8080/ws/chat?token=${token}`);

ws.onopen = () => {
  console.log('WebSocketè¿æ¥æˆåŠŸ');
};

ws.onerror = (error) => {
  console.error('WebSocketè¿æ¥å¤±è´¥', error);
};

ws.onclose = () => {
  console.log('WebSocketè¿æ¥å…³é—­');
  // å¯ä»¥å®ç°è‡ªåŠ¨é‡è¿æœºåˆ¶
};
```

#### 2. æ¥æ”¶æœåŠ¡å™¨æ¨é€æ¶ˆæ¯

```javascript
ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  
  switch (data.type) {
    case 'connected':
      // è¿æ¥æˆåŠŸ
      console.log('è¿æ¥æˆåŠŸ', data);
      break;
      
    case 'new_message':
      // æ”¶åˆ°æ–°æ¶ˆæ¯
      handleNewMessage(data.data);
      break;
      
    case 'message_read':
      // æ¶ˆæ¯å·²è¯»é€šçŸ¥
      handleMessageRead(data.conversationId, data.readByUserId);
      break;
      
    case 'message_recall':
      // æ¶ˆæ¯æ’¤å›é€šçŸ¥
      handleMessageRecall(data.messageId, data.conversationId);
      break;
      
    case 'pong':
      // å¿ƒè·³å“åº”
      console.log('å¿ƒè·³å“åº”');
      break;
  }
};
```

#### 3. å‘é€å¿ƒè·³ä¿æŒè¿æ¥

```javascript
// æ¯30ç§’å‘é€ä¸€æ¬¡å¿ƒè·³
setInterval(() => {
  if (ws.readyState === WebSocket.OPEN) {
    ws.send(JSON.stringify({
      type: 'ping',
      timestamp: Date.now()
    }));
  }
}, 30000);
```

### æ¨é€æ¶ˆæ¯æ ¼å¼

#### æ–°æ¶ˆæ¯æ¨é€

```json
{
  "type": "new_message",
  "data": {
    "id": 12345,
    "messageId": "msg_xyz789",
    "conversationId": "conv_abc123",
    "fromUserId": "U1699123456789AB12CD",
    "fromUserNickname": "å¼ ä¸‰",
    "fromUserAvatar": "https://example.com/avatar.jpg",
    "toUserId": "U1699123456789AB12EF",
    "messageType": 1,
    "content": "ä½ å¥½",
    "status": 2,
    "sendTime": "2024-11-29T10:30:00",
    "isSelf": false
  },
  "timestamp": 1732856400000
}
```

#### å·²è¯»å›æ‰§æ¨é€

```json
{
  "type": "message_read",
  "conversationId": "conv_abc123",
  "readByUserId": "U1699123456789AB12CD",
  "timestamp": 1732856400000
}
```

#### æ¶ˆæ¯æ’¤å›æ¨é€

```json
{
  "type": "message_recall",
  "messageId": "msg_xyz789",
  "conversationId": "conv_abc123",
  "timestamp": 1732856400000
}
```

### å‰ç«¯å¤„ç†å»ºè®®

#### 1. æ–°æ¶ˆæ¯å¤„ç†
```javascript
function handleNewMessage(message) {
  // 1. æ·»åŠ åˆ°å½“å‰ä¼šè¯æ¶ˆæ¯åˆ—è¡¨
  if (currentConversationId === message.conversationId) {
    appendMessageToUI(message);
    // å¦‚æœåœ¨èŠå¤©çª—å£ï¼Œè‡ªåŠ¨æ ‡è®°å·²è¯»
    markAsRead(message.conversationId);
  }
  
  // 2. æ›´æ–°ä¼šè¯åˆ—è¡¨
  updateConversationList();
  
  // 3. æ›´æ–°æœªè¯»æ•°
  updateUnreadCount();
  
  // 4. æ’­æ”¾æç¤ºéŸ³æˆ–éœ‡åŠ¨
  playNotificationSound();
}
```

#### 2. å·²è¯»å›æ‰§å¤„ç†
```javascript
function handleMessageRead(conversationId, readByUserId) {
  // æ›´æ–°è¯¥ä¼šè¯ä¸­æ‰€æœ‰æ¶ˆæ¯çš„çŠ¶æ€ä¸º"å·²è¯»"
  if (currentConversationId === conversationId) {
    updateMessageStatus(conversationId, 'read');
  }
}
```

#### 3. æ¶ˆæ¯æ’¤å›å¤„ç†
```javascript
function handleMessageRecall(messageId, conversationId) {
  // åœ¨UIä¸Šå°†è¯¥æ¶ˆæ¯æ ‡è®°ä¸ºå·²æ’¤å›
  if (currentConversationId === conversationId) {
    updateMessageToRecalled(messageId);
  }
}
```

### æ–­çº¿é‡è¿æœºåˆ¶

```javascript
class WebSocketManager {
  constructor(url) {
    this.url = url;
    this.ws = null;
    this.reconnectInterval = 3000; // 3ç§’
    this.maxReconnectAttempts = 5;
    this.reconnectAttempts = 0;
  }
  
  connect() {
    this.ws = new WebSocket(this.url);
    
    this.ws.onopen = () => {
      console.log('WebSocketè¿æ¥æˆåŠŸ');
      this.reconnectAttempts = 0;
      this.startHeartbeat();
    };
    
    this.ws.onclose = () => {
      console.log('WebSocketè¿æ¥å…³é—­');
      this.reconnect();
    };
    
    this.ws.onerror = (error) => {
      console.error('WebSocketé”™è¯¯', error);
    };
  }
  
  reconnect() {
    if (this.reconnectAttempts < this.maxReconnectAttempts) {
      this.reconnectAttempts++;
      console.log(`å°è¯•é‡è¿... (${this.reconnectAttempts}/${this.maxReconnectAttempts})`);
      setTimeout(() => this.connect(), this.reconnectInterval);
    } else {
      console.error('è¾¾åˆ°æœ€å¤§é‡è¿æ¬¡æ•°ï¼Œåœæ­¢é‡è¿');
    }
  }
  
  startHeartbeat() {
    this.heartbeatTimer = setInterval(() => {
      if (this.ws.readyState === WebSocket.OPEN) {
        this.ws.send(JSON.stringify({ type: 'ping' }));
      }
    }, 30000);
  }
}
```

### æ³¨æ„äº‹é¡¹

1. **TokenéªŒè¯**ï¼šå¿…é¡»åœ¨è¿æ¥URLä¸­æºå¸¦æœ‰æ•ˆçš„JWT Token
2. **å¿ƒè·³ä¿æŒ**ï¼šå»ºè®®æ¯30ç§’å‘é€ä¸€æ¬¡pingæ¶ˆæ¯ä¿æŒè¿æ¥
3. **æ–­çº¿é‡è¿**ï¼šå®ç°è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼Œé¿å…ç½‘ç»œæ³¢åŠ¨å¯¼è‡´è¿æ¥æ–­å¼€
4. **æ¶ˆæ¯å»é‡**ï¼šæ ¹æ®messageIdå»é‡ï¼Œé¿å…é‡å¤æ˜¾ç¤º
5. **æ€§èƒ½ä¼˜åŒ–**ï¼šå¤§é‡æ¶ˆæ¯æ—¶ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
6. **å…¼å®¹æ€§**ï¼šWebSocketè¿æ¥å¤±è´¥æ—¶é™çº§ä¸ºHTTPè½®è¯¢

---

## 76. è·å–ä¼šè¯åˆ—è¡¨

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/chat/conversations`
- **æ¥å£è¯´æ˜**ï¼šè·å–å½“å‰ç”¨æˆ·çš„èŠå¤©ä¼šè¯åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | Integer | å¦ | é¡µç ï¼ˆé»˜è®¤1ï¼‰ |
| size | Integer | å¦ | æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/api/chat/conversations?page=1&size=20" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [
      {
        "conversationId": "conv_abc123",
        "type": 1,
        "otherUserId": "U1699123456789AB12CD",
        "otherUserNickname": "å¼ ä¸‰",
        "otherUserAvatar": "https://example.com/avatar.jpg",
        "otherUserOnline": true,
        "lastMessage": {
          "content": "ä½ å¥½",
          "sendTime": "2024-11-29T10:30:00"
        },
        "unreadCount": 3,
        "updateTime": "2024-11-29T10:30:00"
      }
    ],
    "total": 10,
    "size": 20,
    "current": 1,
    "pages": 1
  }
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| conversationId | String | ä¼šè¯ID |
| type | Integer | ä¼šè¯ç±»å‹ï¼ˆ1-å•èŠï¼Œ2-ç¾¤èŠï¼‰ |
| otherUserId | String | å¯¹æ–¹ç”¨æˆ·ID |
| otherUserNickname | String | å¯¹æ–¹ç”¨æˆ·æ˜µç§° |
| otherUserAvatar | String | å¯¹æ–¹ç”¨æˆ·å¤´åƒ |
| otherUserOnline | Boolean | å¯¹æ–¹æ˜¯å¦åœ¨çº¿ |
| lastMessage | Object | æœ€åä¸€æ¡æ¶ˆæ¯ |
| unreadCount | Integer | æœªè¯»æ¶ˆæ¯æ•° |
| updateTime | String | æœ€åæ›´æ–°æ—¶é—´ |

### æ³¨æ„äº‹é¡¹
- ä¼šè¯åˆ—è¡¨æŒ‰æœ€åæ¶ˆæ¯æ—¶é—´å€’åºæ’åˆ—
- å·²åˆ é™¤çš„ä¼šè¯ä¸æ˜¾ç¤º

---

## 77. åˆ›å»ºæˆ–è·å–ä¼šè¯

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/chat/conversations`
- **æ¥å£è¯´æ˜**ï¼šåˆ›å»ºæˆ–è·å–ä¸æŒ‡å®šç”¨æˆ·çš„ä¼šè¯
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| otherUserId | String | æ˜¯ | å¯¹æ–¹ç”¨æˆ·IDï¼ˆä¸šåŠ¡ç”¨æˆ·IDï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/chat/conversations \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "otherUserId": "U1699123456789AB12CD"
  }'
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "conversationId": "conv_abc123",
    "type": 1,
    "otherUserId": "U1699123456789AB12CD",
    "otherUserNickname": "å¼ ä¸‰",
    "otherUserAvatar": "https://example.com/avatar.jpg",
    "otherUserOnline": true,
    "lastMessage": null,
    "unreadCount": 0,
    "updateTime": "2024-11-29T10:30:00"
  }
}
```

### æ³¨æ„äº‹é¡¹
- å¦‚æœä¼šè¯å·²å­˜åœ¨ï¼Œè¿”å›ç°æœ‰ä¼šè¯
- å¦‚æœä¼šè¯ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°ä¼šè¯
- å¦‚æœç”¨æˆ·ä¹‹å‰åˆ é™¤äº†ä¼šè¯ï¼Œä¼šè‡ªåŠ¨æ¢å¤

---

## 78. è·å–ä¼šè¯æ¶ˆæ¯å†å²

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/chat/conversations/{conversationId}/messages`
- **æ¥å£è¯´æ˜**ï¼šè·å–æŒ‡å®šä¼šè¯çš„æ¶ˆæ¯å†å²è®°å½•ï¼ˆæ¸¸æ ‡åˆ†é¡µï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| conversationId | String | æ˜¯ | ä¼šè¯ID |

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| beforeMessageId | Long | å¦ | è·å–è¯¥æ¶ˆæ¯ä¹‹å‰çš„æ¶ˆæ¯ï¼ˆæ¸¸æ ‡åˆ†é¡µï¼‰ |
| size | Integer | å¦ | æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/api/chat/conversations/conv_abc123/messages?size=20" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [
      {
        "id": 12345,
        "messageId": "msg_xyz789",
        "conversationId": "conv_abc123",
        "fromUserId": "U1699123456789AB12CD",
        "fromUserNickname": "å¼ ä¸‰",
        "fromUserAvatar": "https://example.com/avatar.jpg",
        "toUserId": "U1699123456789AB12EF",
        "messageType": 1,
        "content": "ä½ å¥½",
        "mediaUrl": null,
        "mediaDuration": null,
        "status": 4,
        "isRecalled": false,
        "sendTime": "2024-11-29T10:30:00",
        "readTime": "2024-11-29T10:31:00",
        "isSelf": false
      }
    ],
    "total": 100,
    "size": 20,
    "current": 1
  }
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| messageId | String | æ¶ˆæ¯ID |
| messageType | Integer | æ¶ˆæ¯ç±»å‹ï¼ˆ1-æ–‡æœ¬ï¼Œ2-å›¾ç‰‡ï¼Œ3-è¯­éŸ³ï¼Œ4-è§†é¢‘ï¼‰ |
| content | String | æ¶ˆæ¯å†…å®¹ |
| mediaUrl | String | åª’ä½“æ–‡ä»¶URL |
| mediaDuration | Integer | åª’ä½“æ—¶é•¿ï¼ˆç§’ï¼‰ |
| status | Integer | æ¶ˆæ¯çŠ¶æ€ï¼ˆ1-å‘é€ä¸­ï¼Œ2-å·²å‘é€ï¼Œ3-å·²é€è¾¾ï¼Œ4-å·²è¯»ï¼Œ5-å¤±è´¥ï¼‰ |
| isRecalled | Boolean | æ˜¯å¦å·²æ’¤å› |
| isSelf | Boolean | æ˜¯å¦æ˜¯è‡ªå·±å‘é€çš„ |

### æ³¨æ„äº‹é¡¹
- æ¶ˆæ¯æŒ‰æ—¶é—´å€’åºè¿”å›ï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰
- ä½¿ç”¨æ¸¸æ ‡åˆ†é¡µï¼Œä¼ å…¥`beforeMessageId`è·å–æ›´æ—©çš„æ¶ˆæ¯
- å·²æ’¤å›çš„æ¶ˆæ¯ä»ç„¶è¿”å›ï¼Œä½†`isRecalled`ä¸ºtrue

---

## 79. å‘é€æ¶ˆæ¯

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/chat/messages`
- **æ¥å£è¯´æ˜**ï¼šå‘é€èŠå¤©æ¶ˆæ¯
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| conversationId | String | æ˜¯ | ä¼šè¯ID |
| toUserId | String | æ˜¯ | æ¥æ”¶è€…ç”¨æˆ·ID |
| messageType | Integer | æ˜¯ | æ¶ˆæ¯ç±»å‹ï¼ˆ1-æ–‡æœ¬ï¼Œ2-å›¾ç‰‡ï¼Œ3-è¯­éŸ³ï¼Œ4-è§†é¢‘ï¼‰ |
| content | String | å¦ | æ¶ˆæ¯å†…å®¹ï¼ˆæ–‡æœ¬æ¶ˆæ¯å¿…å¡«ï¼‰ |
| mediaUrl | String | å¦ | åª’ä½“URLï¼ˆå›¾ç‰‡/è¯­éŸ³/è§†é¢‘æ¶ˆæ¯å¿…å¡«ï¼‰ |
| mediaDuration | Integer | å¦ | åª’ä½“æ—¶é•¿ï¼ˆç§’ï¼Œè¯­éŸ³/è§†é¢‘æ¶ˆæ¯é€‰å¡«ï¼‰ |
| clientMsgId | String | å¦ | å®¢æˆ·ç«¯æ¶ˆæ¯IDï¼ˆç”¨äºå»é‡ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**æ–‡æœ¬æ¶ˆæ¯**ï¼š
```bash
curl -X POST http://localhost:8080/api/chat/messages \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "conversationId": "conv_abc123",
    "toUserId": "U1699123456789AB12CD",
    "messageType": 1,
    "content": "ä½ å¥½"
  }'
```

**å›¾ç‰‡æ¶ˆæ¯**ï¼š
```bash
curl -X POST http://localhost:8080/api/chat/messages \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "conversationId": "conv_abc123",
    "toUserId": "U1699123456789AB12CD",
    "messageType": 2,
    "mediaUrl": "https://example.com/image.jpg"
  }'
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 12345,
    "messageId": "msg_xyz789",
    "conversationId": "conv_abc123",
    "fromUserId": "U1699123456789AB12EF",
    "fromUserNickname": "æˆ‘",
    "fromUserAvatar": "https://example.com/my_avatar.jpg",
    "toUserId": "U1699123456789AB12CD",
    "messageType": 1,
    "content": "ä½ å¥½",
    "mediaUrl": null,
    "mediaDuration": null,
    "status": 2,
    "isRecalled": false,
    "sendTime": "2024-11-29T10:30:00",
    "readTime": null,
    "isSelf": true
  }
}
```

### æ³¨æ„äº‹é¡¹
- å›¾ç‰‡ã€è¯­éŸ³ã€è§†é¢‘éœ€è¦å…ˆé€šè¿‡OSSä¸Šä¼ æ¥å£ä¸Šä¼ æ–‡ä»¶è·å–URL
- å‘é€æˆåŠŸåï¼Œå¯¹æ–¹çš„æœªè¯»æ•°ä¼šè‡ªåŠ¨+1
- ä¼šè¯çš„æœ€åæ¶ˆæ¯ä¼šè‡ªåŠ¨æ›´æ–°

---

## 80. æ’¤å›æ¶ˆæ¯

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/chat/messages/{messageId}/recall`
- **æ¥å£è¯´æ˜**ï¼šæ’¤å›å·²å‘é€çš„æ¶ˆæ¯ï¼ˆ2åˆ†é’Ÿå†…ï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| messageId | String | æ˜¯ | æ¶ˆæ¯ID |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/chat/messages/msg_xyz789/recall \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": true
}
```

**è¶…æ—¶å¤±è´¥**ï¼š
```json
{
  "code": 400,
  "message": "è¶…è¿‡2åˆ†é’Ÿçš„æ¶ˆæ¯æ— æ³•æ’¤å›",
  "data": null
}
```

### æ³¨æ„äº‹é¡¹
- åªèƒ½æ’¤å›2åˆ†é’Ÿå†…å‘é€çš„æ¶ˆæ¯
- åªèƒ½æ’¤å›è‡ªå·±å‘é€çš„æ¶ˆæ¯
- æ’¤å›åæ¶ˆæ¯ä»ä¿ç•™åœ¨æ•°æ®åº“ï¼Œä½†æ ‡è®°ä¸ºå·²æ’¤å›

---

## 81. æ ‡è®°æ¶ˆæ¯å·²è¯»

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/chat/conversations/{conversationId}/read`
- **æ¥å£è¯´æ˜**ï¼šæ ‡è®°æŒ‡å®šä¼šè¯çš„æ‰€æœ‰æ¶ˆæ¯ä¸ºå·²è¯»
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| conversationId | String | æ˜¯ | ä¼šè¯ID |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/chat/conversations/conv_abc123/read \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": true
}
```

### æ³¨æ„äº‹é¡¹
- ä¼šå°†è¯¥ä¼šè¯ä¸­æ‰€æœ‰æœªè¯»æ¶ˆæ¯æ ‡è®°ä¸ºå·²è¯»
- æœªè¯»æ•°ä¼šæ¸…é›¶
- å¯¹æ–¹ä¼šæ”¶åˆ°æ¶ˆæ¯å·²è¯»çš„é€šçŸ¥ï¼ˆWebSocketæ¨é€ï¼‰

---

## 82. è·å–æœªè¯»æ¶ˆæ¯æ€»æ•°

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/chat/unread-count`
- **æ¥å£è¯´æ˜**ï¼šè·å–å½“å‰ç”¨æˆ·æ‰€æœ‰ä¼šè¯çš„æœªè¯»æ¶ˆæ¯æ€»æ•°
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET http://localhost:8080/api/chat/unread-count \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": 15
}
```

### æ³¨æ„äº‹é¡¹
- è¿”å›æ‰€æœ‰ä¼šè¯çš„æœªè¯»æ¶ˆæ¯æ€»æ•°
- ç”¨äºæ˜¾ç¤ºèŠå¤©å…¥å£çš„çº¢ç‚¹æ•°å­—
- ä¸åŒ…æ‹¬å·²åˆ é™¤çš„ä¼šè¯

---

## 83. åˆ é™¤ä¼šè¯

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`DELETE /api/chat/conversations/{conversationId}`
- **æ¥å£è¯´æ˜**ï¼šåˆ é™¤æŒ‡å®šä¼šè¯ï¼ˆä»…å¯¹å½“å‰ç”¨æˆ·ç”Ÿæ•ˆï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| conversationId | String | æ˜¯ | ä¼šè¯ID |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X DELETE http://localhost:8080/api/chat/conversations/conv_abc123 \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": true
}
```

### æ³¨æ„äº‹é¡¹
- åˆ é™¤ä¼šè¯åï¼Œè¯¥ä¼šè¯ä¸å†æ˜¾ç¤ºåœ¨ä¼šè¯åˆ—è¡¨ä¸­
- å¯¹æ–¹çš„ä¼šè¯ä¸å—å½±å“
- åˆ é™¤åå¦‚æœæ”¶åˆ°æ–°æ¶ˆæ¯ï¼Œä¼šè¯ä¼šè‡ªåŠ¨æ¢å¤
- å†å²æ¶ˆæ¯ä¸ä¼šçœŸæ­£åˆ é™¤

---

# å…«ã€æ˜Ÿçƒå¥‡é‡ç®¡ç†

## 84. è·å–æ˜Ÿçƒåˆ—è¡¨

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/planet/list`
- **æ¥å£è¯´æ˜**ï¼šè·å–æ‰€æœ‰å¯ç”¨çš„æ˜Ÿçƒåˆ—è¡¨
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šå¦

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET http://localhost:8080/api/planet/list
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "planetId": "planet_music",
      "planetName": "éŸ³ä¹æ˜Ÿçƒ",
      "planetIcon": "https://example.com/planet_music.png",
      "planetDesc": "åœ¨è¿™é‡Œé‡è§çƒ­çˆ±éŸ³ä¹çš„çµé­‚",
      "themeTags": ["éŸ³ä¹", "æ¼”å”±ä¼š", "ä¹å™¨"],
      "bgColor": "#FF6B9D",
      "onlineUserCount": 128
    },
    {
      "planetId": "planet_sport",
      "planetName": "è¿åŠ¨æ˜Ÿçƒ",
      "planetIcon": "https://example.com/planet_sport.png",
      "planetDesc": "å’Œè¿åŠ¨è¾¾äººä¸€èµ·æŒ¥æ´’æ±—æ°´",
      "themeTags": ["å¥èº«", "è·‘æ­¥", "çƒç±»"],
      "bgColor": "#4ECDC4",
      "onlineUserCount": 256
    }
  ]
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| planetId | String | æ˜ŸçƒID |
| planetName | String | æ˜Ÿçƒåç§° |
| planetIcon | String | æ˜Ÿçƒå›¾æ ‡URL |
| planetDesc | String | æ˜Ÿçƒæè¿° |
| themeTags | Array | ä¸»é¢˜æ ‡ç­¾åˆ—è¡¨ |
| bgColor | String | èƒŒæ™¯è‰²ï¼ˆåå…­è¿›åˆ¶é¢œè‰²ä»£ç ï¼‰ |
| onlineUserCount | Integer | å½“å‰åœ¨çº¿äººæ•° |

### æ³¨æ„äº‹é¡¹
- åªè¿”å›å¯ç”¨çŠ¶æ€çš„æ˜Ÿçƒ
- æ˜ŸçƒæŒ‰æ’åºå­—æ®µæ’åº
- åœ¨çº¿äººæ•°å®æ—¶æ›´æ–°

---

## 85. è¿›å…¥æ˜Ÿçƒï¼ˆå¼€å§‹å¥‡é‡ï¼‰

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/planet/enter`
- **æ¥å£è¯´æ˜**ï¼šè¿›å…¥æŒ‡å®šæ˜Ÿçƒï¼Œå¼€å§‹ä¸€æ¬¡å¥‡é‡åŒ¹é…
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
Content-Type: application/json
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| planetId | String | æ˜¯ | æ˜ŸçƒID |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/planet/enter \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "planetId": "planet_music"
  }'
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "encounterId": "enc_abc123xyz",
    "planetId": "planet_music",
    "planetName": "éŸ³ä¹æ˜Ÿçƒ",
    "userId": "U1699123456789AB12CD",
    "nickname": "ç¥ç§˜æ˜Ÿå‹",
    "avatar": null,
    "age": 25,
    "city": "åŒ—äº¬",
    "tags": null,
    "bio": null,
    "unlockLevel": 1,
    "interactionCount": 0,
    "expireTime": "2024-11-30T10:30:00",
    "remainingSeconds": 86400,
    "availableTasks": [
      {
        "taskId": "task_001",
        "taskName": "åˆ†äº«ä½ å–œæ¬¢çš„éŸ³ä¹",
        "taskDesc": "å‘Šè¯‰å¯¹æ–¹ä½ æœ€å–œæ¬¢çš„ä¸€é¦–æ­Œ",
        "taskType": 1,
        "rewardPoints": 10,
        "unlockLevel": 2,
        "completed": false
      }
    ]
  }
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| encounterId | String | å¥‡é‡IDï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰ |
| unlockLevel | Integer | è§£é”ç­‰çº§ï¼ˆ1-åŸºç¡€ä¿¡æ¯ï¼Œ2-éƒ¨åˆ†ä¿¡æ¯ï¼Œ3-å®Œæ•´ä¿¡æ¯ï¼‰ |
| interactionCount | Integer | å·²äº’åŠ¨æ¬¡æ•° |
| remainingSeconds | Long | å¥‡é‡å‰©ä½™æ—¶é—´ï¼ˆç§’ï¼‰ |
| availableTasks | Array | å¯å®Œæˆçš„ä»»åŠ¡åˆ—è¡¨ |

### ä¸šåŠ¡è¯´æ˜

**ä¿¡æ¯è§£é”æœºåˆ¶**ï¼š
- **ç­‰çº§1ï¼ˆåŸºç¡€ä¿¡æ¯ï¼‰**ï¼šåªèƒ½çœ‹åˆ°å¹´é¾„ã€åŸå¸‚
- **ç­‰çº§2ï¼ˆéƒ¨åˆ†ä¿¡æ¯ï¼‰**ï¼šå¯ä»¥çœ‹åˆ°æ˜µç§°é¦–å­—æ¯ã€å¤´åƒã€éƒ¨åˆ†æ ‡ç­¾
- **ç­‰çº§3ï¼ˆå®Œæ•´ä¿¡æ¯ï¼‰**ï¼šå¯ä»¥çœ‹åˆ°å®Œæ•´æ˜µç§°ã€å®Œæ•´æ ‡ç­¾ã€ä¸ªäººç®€ä»‹

**åŒ¹é…æœºåˆ¶**ï¼š
- ä¼˜å…ˆåŒ¹é…æœ‰å…±åŒæ ‡ç­¾çš„ç”¨æˆ·
- 72å°æ—¶å†…å¥‡é‡è¿‡çš„ç”¨æˆ·ä¸å†åŒ¹é…
- åŠ å…¥éšæœºæ€§ï¼Œé¿å…æ¯æ¬¡éƒ½åŒ¹é…åŒä¸€ä¸ªäºº

### æ³¨æ„äº‹é¡¹
- å¦‚æœæœ‰æ­£åœ¨è¿›è¡Œçš„å¥‡é‡ï¼Œè¿”å›å½“å‰å¥‡é‡
- å¥‡é‡æœ‰æ•ˆæœŸ24å°æ—¶ï¼Œè¿‡æœŸåè‡ªåŠ¨å¤±æ•ˆ
- å®Œæˆä»»åŠ¡å¯ä»¥è§£é”æ›´å¤šä¿¡æ¯

---

## 86. è·å–å¥‡é‡è¯¦æƒ…

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/planet/encounters/{encounterId}`
- **æ¥å£è¯´æ˜**ï¼šè·å–æŒ‡å®šå¥‡é‡çš„è¯¦ç»†ä¿¡æ¯
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| encounterId | String | æ˜¯ | å¥‡é‡ID |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET http://localhost:8080/api/planet/encounters/enc_abc123xyz \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**ç­‰çº§1å“åº”ï¼ˆåŸºç¡€ä¿¡æ¯ï¼‰**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "encounterId": "enc_abc123xyz",
    "planetId": "planet_music",
    "planetName": "éŸ³ä¹æ˜Ÿçƒ",
    "userId": "U1699123456789AB12CD",
    "nickname": "ç¥ç§˜æ˜Ÿå‹",
    "avatar": null,
    "age": 25,
    "city": "åŒ—äº¬",
    "tags": null,
    "bio": null,
    "unlockLevel": 1,
    "interactionCount": 0,
    "expireTime": "2024-11-30T10:30:00",
    "remainingSeconds": 86000,
    "availableTasks": [...]
  }
}
```

**ç­‰çº§2å“åº”ï¼ˆéƒ¨åˆ†ä¿¡æ¯ï¼‰**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "encounterId": "enc_abc123xyz",
    "planetId": "planet_music",
    "planetName": "éŸ³ä¹æ˜Ÿçƒ",
    "userId": "U1699123456789AB12CD",
    "nickname": "å¼ **",
    "avatar": "https://example.com/avatar_blur.jpg",
    "age": 25,
    "city": "åŒ—äº¬",
    "tags": ["éŸ³ä¹", "æ—…è¡Œ", "æ‘„å½±"],
    "bio": null,
    "unlockLevel": 2,
    "interactionCount": 1,
    "expireTime": "2024-11-30T10:30:00",
    "remainingSeconds": 86000,
    "availableTasks": [...]
  }
}
```

**ç­‰çº§3å“åº”ï¼ˆå®Œæ•´ä¿¡æ¯ï¼‰**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "encounterId": "enc_abc123xyz",
    "planetId": "planet_music",
    "planetName": "éŸ³ä¹æ˜Ÿçƒ",
    "userId": "U1699123456789AB12CD",
    "nickname": "å¼ ä¸‰",
    "avatar": "https://example.com/avatar.jpg",
    "age": 25,
    "city": "åŒ—äº¬",
    "tags": ["éŸ³ä¹", "æ—…è¡Œ", "æ‘„å½±", "ç¾é£Ÿ", "ç”µå½±"],
    "bio": "çƒ­çˆ±ç”Ÿæ´»ï¼Œå–œæ¬¢éŸ³ä¹å’Œæ—…è¡Œ",
    "unlockLevel": 3,
    "interactionCount": 3,
    "expireTime": "2024-11-30T10:30:00",
    "remainingSeconds": 86000,
    "availableTasks": [...]
  }
}
```

### æ³¨æ„äº‹é¡¹
- æ ¹æ®è§£é”ç­‰çº§æ˜¾ç¤ºä¸åŒç¨‹åº¦çš„ä¿¡æ¯
- å¥‡é‡è¿‡æœŸåçŠ¶æ€ä¼šè‡ªåŠ¨æ›´æ–°ä¸ºå·²è¿‡æœŸ
- å®Œæˆæ›´å¤šä»»åŠ¡å¯ä»¥æå‡è§£é”ç­‰çº§

---

## 87. å®Œæˆä»»åŠ¡

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/planet/encounters/{encounterId}/task`
- **æ¥å£è¯´æ˜**ï¼šå®Œæˆæ˜Ÿçƒä»»åŠ¡ï¼Œè§£é”æ›´å¤šç”¨æˆ·ä¿¡æ¯
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
Content-Type: application/json
```

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| encounterId | String | æ˜¯ | å¥‡é‡ID |

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| taskId | String | æ˜¯ | ä»»åŠ¡ID |
| answer | Object | å¦ | ä»»åŠ¡å›ç­”å†…å®¹ï¼ˆJSONæ ¼å¼ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/planet/encounters/enc_abc123xyz/task \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "taskId": "task_001",
    "answer": {
      "text": "æˆ‘æœ€å–œæ¬¢çš„æ­Œæ˜¯ã€Šå¹³å‡¡ä¹‹è·¯ã€‹",
      "reason": "è¿™é¦–æ­Œè®©æˆ‘æ„Ÿå—åˆ°åŠ›é‡"
    }
  }'
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "success": true,
    "newUnlockLevel": 2,
    "rewardPoints": 10,
    "message": "ä»»åŠ¡å®Œæˆï¼è§£é”äº†æ›´å¤šä¿¡æ¯",
    "updatedEncounter": {
      "encounterId": "enc_abc123xyz",
      "unlockLevel": 2,
      "nickname": "å¼ **",
      "avatar": "https://example.com/avatar_blur.jpg",
      "tags": ["éŸ³ä¹", "æ—…è¡Œ", "æ‘„å½±"],
      ...
    }
  }
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | Boolean | æ˜¯å¦æˆåŠŸ |
| newUnlockLevel | Integer | æ–°çš„è§£é”ç­‰çº§ |
| rewardPoints | Integer | è·å¾—çš„ç§¯åˆ†å¥–åŠ± |
| updatedEncounter | Object | æ›´æ–°åçš„å¥‡é‡ä¿¡æ¯ |

### æ³¨æ„äº‹é¡¹
- æ¯ä¸ªä»»åŠ¡åªèƒ½å®Œæˆä¸€æ¬¡
- å®Œæˆä»»åŠ¡åè‡ªåŠ¨æå‡è§£é”ç­‰çº§
- ä¸åŒä»»åŠ¡è§£é”ä¸åŒç­‰çº§çš„ä¿¡æ¯
- ä»»åŠ¡ç­”æ¡ˆä¼šä¿å­˜ï¼ŒåŒæ–¹å¯ä»¥äº’ç›¸æŸ¥çœ‹

---

## 88. è¡¨è¾¾å…´è¶£

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/planet/encounters/{encounterId}/interest`
- **æ¥å£è¯´æ˜**ï¼šå¯¹å¥‡é‡çš„ç”¨æˆ·è¡¨è¾¾å…´è¶£ï¼Œå¯èƒ½å»ºç«‹è”ç³»
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| encounterId | String | æ˜¯ | å¥‡é‡ID |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/planet/encounters/enc_abc123xyz/interest \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": true
}
```

### æ³¨æ„äº‹é¡¹
- è¡¨è¾¾å…´è¶£åï¼Œå¯¹æ–¹ä¼šæ”¶åˆ°é€šçŸ¥
- å¦‚æœåŒæ–¹äº’ç›¸è¡¨è¾¾å…´è¶£ï¼Œå¯ä»¥å»ºç«‹è”ç³»
- è¡¨è¾¾å…´è¶£åå¥‡é‡çŠ¶æ€å˜ä¸º"å·²äº’åŠ¨"
- å¯ä»¥å¼€å§‹èŠå¤©

---

## 89. è·³è¿‡å¥‡é‡

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`POST /api/planet/encounters/{encounterId}/skip`
- **æ¥å£è¯´æ˜**ï¼šè·³è¿‡å½“å‰å¥‡é‡ï¼Œå¯ä»¥é‡æ–°åŒ¹é…
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| encounterId | String | æ˜¯ | å¥‡é‡ID |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/api/planet/encounters/enc_abc123xyz/skip \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": true
}
```

### æ³¨æ„äº‹é¡¹
- è·³è¿‡åå¥‡é‡çŠ¶æ€å˜ä¸º"å·²è·³è¿‡"
- è·³è¿‡åå¯ä»¥é‡æ–°è¿›å…¥æ˜ŸçƒåŒ¹é…æ–°ç”¨æˆ·
- è·³è¿‡çš„ç”¨æˆ·åœ¨72å°æ—¶å†…ä¸ä¼šå†æ¬¡åŒ¹é…åˆ°

---

## 90. è·å–å¥‡é‡å†å²

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£è·¯å¾„**ï¼š`GET /api/planet/encounters/history`
- **æ¥å£è¯´æ˜**ï¼šè·å–ç”¨æˆ·çš„å¥‡é‡å†å²è®°å½•ï¼ˆå·²äº’åŠ¨æˆ–å·²è·³è¿‡ï¼‰
- **æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

### è¯·æ±‚å¤´
```
Authorization: Bearer {token}
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | Integer | å¦ | é¡µç ï¼ˆé»˜è®¤1ï¼‰ |
| size | Integer | å¦ | æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

**curlå‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/api/planet/encounters/history?page=1&size=20" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "encounterId": "enc_abc123xyz",
      "planetId": "planet_music",
      "planetName": "éŸ³ä¹æ˜Ÿçƒ",
      "userId": "U1699123456789AB12CD",
      "nickname": "å¼ ä¸‰",
      "avatar": "https://example.com/avatar.jpg",
      "age": 25,
      "city": "åŒ—äº¬",
      "tags": ["éŸ³ä¹", "æ—…è¡Œ"],
      "bio": "çƒ­çˆ±éŸ³ä¹çš„äºº",
      "unlockLevel": 3,
      "interactionCount": 3,
      "expireTime": "2024-11-29T10:30:00",
      "remainingSeconds": 0
    }
  ]
}
```

### æ³¨æ„äº‹é¡¹
- åªè¿”å›å·²äº’åŠ¨æˆ–å·²è·³è¿‡çš„å¥‡é‡
- æŒ‰æ—¶é—´å€’åºæ’åˆ—
- å¯ä»¥æŸ¥çœ‹å†å²å¥‡é‡çš„å®Œæ•´ä¿¡æ¯

---

**æ–‡æ¡£ç»“æŸ**

